export function getHtml(){
  return "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/ico\" href=\"/favicon.ico\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>remult-admin</title>\n    <script type=\"module\" crossorigin>\nvar uf=Object.defineProperty;var ff=(t,e,n)=>e in t?uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var li=(t,e,n)=>ff(t,typeof e!=\"symbol\"?e+\"\":e,n);(function(){const e=document.createElement(\"link\").relList;if(e&&e.supports&&e.supports(\"modulepreload\"))return;for(const r of document.querySelectorAll('link[rel=\"modulepreload\"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type===\"childList\")for(const s of o.addedNodes)s.tagName===\"LINK\"&&s.rel===\"modulepreload\"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin===\"use-credentials\"?o.credentials=\"include\":r.crossOrigin===\"anonymous\"?o.credentials=\"omit\":o.credentials=\"same-origin\",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function le(){}function _e(t,e){for(const n in e)t[n]=e[n];return t}function Ol(t){return t()}function Io(){return Object.create(null)}function Ke(t){t.forEach(Ol)}function Fe(t){return typeof t==\"function\"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t==\"object\"||typeof t==\"function\"}function Il(t,e){return t!=t?e==e:t!==e}function cf(t){return Object.keys(t).length===0}function Kn(t,...e){if(t==null){for(const i of e)i(void 0);return le}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Q(t){let e;return Kn(t,n=>e=n)(),e}function j(t,e,n){t.$$.on_destroy.push(Kn(e,n))}function rt(t,e,n,i){if(t){const r=Tl(t,e,n,i);return t[0](r)}}function Tl(t,e,n,i){return t[1]&&i?_e(n.ctx.slice(),t[1](i(e))):n.ctx}function ot(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r==\"object\"){const o=[],s=Math.max(e.dirty.length,r.length);for(let l=0;l<s;l+=1)o[l]=e.dirty[l]|r[l];return o}return e.dirty|r}return e.dirty}function st(t,e,n,i,r,o){if(r){const s=Tl(e,n,i,o);t.p(s,r)}}function lt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function mt(t){const e={};for(const n in t)n[0]!==\"$\"&&(e[n]=t[n]);return e}function Re(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!==\"$\"&&(n[i]=t[i]);return n}function df(t){const e={};for(const n in t)e[n]=!0;return e}function To(t){return t??\"\"}function Ni(t,e,n){return t.set(n),e}function Ue(t){return t&&Fe(t.destroy)?t.destroy:le}const Ml=typeof window<\"u\"?window:typeof globalThis<\"u\"?globalThis:global;function G(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function Cn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function ne(t){return document.createElement(t)}function Ce(t){return document.createElementNS(\"http://www.w3.org/2000/svg\",t)}function He(t){return document.createTextNode(t)}function de(){return He(\" \")}function Xe(){return He(\"\")}function be(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const hf=[\"width\",\"height\"];function On(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i===\"style\"?t.style.cssText=e[i]:i===\"__value\"?t.value=t[i]=e[i]:n[i]&&n[i].set&&hf.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function gf(t){return Array.from(t.childNodes)}function ft(t,e){e=\"\"+e,t.data!==e&&(t.data=e)}function Mo(t,e){t.value=e??\"\"}function se(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,\"\")}let ai;function mf(){if(ai===void 0){ai=!1;try{typeof window<\"u\"&&window.parent&&window.parent.document}catch{ai=!0}}return ai}function yf(t,e){getComputedStyle(t).position===\"static\"&&(t.style.position=\"relative\");const i=ne(\"iframe\");i.setAttribute(\"style\",\"display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;\"),i.setAttribute(\"aria-hidden\",\"true\"),i.tabIndex=-1;const r=mf();let o;return r?(i.src=\"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\\/script>\",o=be(window,\"message\",s=>{s.source===i.contentWindow&&e()})):(i.src=\"about:blank\",i.onload=()=>{o=be(i.contentWindow,\"resize\",e),e()}),G(t,i),()=>{(r||o&&i.contentWindow)&&o(),B(i)}}function he(t,e,n){t.classList.toggle(e,!!n)}function pf(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function Wt(t,e){return new t(e)}let Jn;function Vn(t){Jn=t}function nn(){if(!Jn)throw new Error(\"Function called outside component initialization\");return Jn}function tr(t){nn().$$.on_mount.push(t)}function bf(t){nn().$$.after_update.push(t)}function nr(t){nn().$$.on_destroy.push(t)}function ei(){const t=nn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=pf(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function Di(t,e){return nn().$$.context.set(t,e),e}function Fi(t){return nn().$$.context.get(t)}function wf(t){return nn().$$.context.has(t)}function ke(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const mn=[],In=[];let vn=[];const Rr=[],Al=Promise.resolve();let zr=!1;function Pl(){zr||(zr=!0,Al.then(Nl))}function _f(){return Pl(),Al}function Ri(t){vn.push(t)}function vf(t){Rr.push(t)}const wr=new Set;let cn=0;function Nl(){if(cn!==0)return;const t=Jn;do{try{for(;cn<mn.length;){const e=mn[cn];cn++,Vn(e),kf(e.$$)}}catch(e){throw mn.length=0,cn=0,e}for(Vn(null),mn.length=0,cn=0;In.length;)In.pop()();for(let e=0;e<vn.length;e+=1){const n=vn[e];wr.has(n)||(wr.add(n),n())}vn.length=0}while(mn.length);for(;Rr.length;)Rr.pop()();zr=!1,wr.clear(),Vn(t)}function kf(t){if(t.fragment!==null){t.update(),Ke(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ri)}}function Sf(t){const e=[],n=[];vn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),vn=e}const ki=new Set;let jt;function Te(){jt={r:0,c:[],p:jt}}function Me(){jt.r||Ke(jt.c),jt=jt.p}function P(t,e){t&&t.i&&(ki.delete(t),t.i(e))}function R(t,e,n,i){if(t&&t.o){if(ki.has(t))return;ki.add(t),jt.c.push(()=>{ki.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function We(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ir(t,e){R(t,1,1,()=>{e.delete(t.key)})}function rr(t,e,n,i,r,o,s,l,a,u,f,c){let d=t.length,h=o.length,g=d;const y={};for(;g--;)y[t[g].key]=g;const p=[],m=new Map,_=new Map,b=[];for(g=h;g--;){const k=c(r,o,g),E=n(k);let C=s.get(E);C?b.push(()=>C.p(k,e)):(C=u(E,k),C.c()),m.set(E,p[g]=C),E in y&&_.set(E,Math.abs(g-y[E]))}const v=new Set,M=new Set;function O(k){P(k,1),k.m(l,f),s.set(k.key,k),f=k.first,h--}for(;d&&h;){const k=p[h-1],E=t[d-1],C=k.key,D=E.key;k===E?(f=k.first,d--,h--):m.has(D)?!s.has(C)||v.has(C)?O(k):M.has(D)?d--:_.get(C)>_.get(D)?(M.add(C),O(k)):(v.add(D),d--):(a(E,s),d--)}for(;d--;){const k=t[d];m.has(k.key)||a(k,s)}for(;h;)O(p[h-1]);return Ke(b),p}function ct(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const s=t[o],l=e[o];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)r[a]||(n[a]=l[a],r[a]=1);t[o]=l}else for(const a in s)r[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Ct(t){return typeof t==\"object\"&&t!==null?t:{}}function Ef(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function ee(t){t&&t.c()}function x(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ri(()=>{const o=t.$$.on_mount.map(Ol).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ke(o),t.$$.on_mount=[]}),r.forEach(Ri)}function $(t,e){const n=t.$$;n.fragment!==null&&(Sf(n.after_update),Ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Cf(t,e){t.$$.dirty[0]===-1&&(mn.push(t),Pl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ae(t,e,n,i,r,o,s=null,l=[-1]){const a=Jn;Vn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:le,not_equal:r,bound:Io(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Io(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,d,...h)=>{const g=h.length?h[0]:d;return u.ctx&&r(u.ctx[c],u.ctx[c]=g)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](g),f&&Cf(t,c)),d}):[],u.update(),f=!0,Ke(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=gf(e.target);u.fragment&&u.fragment.l(c),c.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&P(t.$$.fragment),x(t,e.target,e.anchor),Nl()}Vn(a)}class ue{constructor(){li(this,\"$$\");li(this,\"$$set\")}$destroy(){$(this,1),this.$destroy=le}$on(e,n){if(!Fe(n))return le;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!cf(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Of=\"4\";typeof window<\"u\"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Of);const dn=[];function ut(t,e){return{subscribe:re(t,e).subscribe}}function re(t,e=le){let n;const i=new Set;function r(l){if(ce(t,l)&&(t=l,n)){const a=!dn.length;for(const u of i)u[1](),dn.push(u,t);if(a){for(let u=0;u<dn.length;u+=2)dn[u][0](dn[u+1]);dn.length=0}}}function o(l){r(l(t))}function s(l,a=le){const u=[l,a];return i.add(u),i.size===1&&(n=e(r,o)||le),l(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function Xt(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error(\"derived() expects stores as input, got a falsy value\");const o=e.length<2;return ut(n,(s,l)=>{let a=!1;const u=[];let f=0,c=le;const d=()=>{if(f)return;c();const g=e(i?u[0]:u,s,l);o?s(g):c=Fe(g)?g:le},h=r.map((g,y)=>Kn(g,p=>{u[y]=p,f&=~(1<<y),a&&d()},()=>{f|=1<<y}));return a=!0,d(),function(){Ke(h),c(),a=!1}})}function Dl(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,r,o,s=[],l=\"\",a=t.split(\"/\");for(a[0]||a.shift();r=a.shift();)n=r[0],n===\"*\"?(s.push(\"wild\"),l+=\"/(.*)\"):n===\":\"?(i=r.indexOf(\"?\",1),o=r.indexOf(\".\",1),s.push(r.substring(1,~i?i:~o?o:r.length)),l+=~i&&!~o?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~o&&(l+=(~i?\"?\":\"\")+\"\\\\\"+r.substring(o))):l+=\"/\"+r;return{keys:s,pattern:new RegExp(\"^\"+l+\"/?$\",\"i\")}}function If(t){let e,n,i;const r=[t[2]];var o=t[0];function s(l,a){let u={};for(let f=0;f<r.length;f+=1)u=_e(u,r[f]);return a!==void 0&&a&4&&(u=_e(u,ct(r,[Ct(l[2])]))),{props:u}}return o&&(e=Wt(o,s(t)),e.$on(\"routeEvent\",t[7])),{c(){e&&ee(e.$$.fragment),n=Xe()},m(l,a){e&&x(e,l,a),q(l,n,a),i=!0},p(l,a){if(a&1&&o!==(o=l[0])){if(e){Te();const u=e;R(u.$$.fragment,1,0,()=>{$(u,1)}),Me()}o?(e=Wt(o,s(l,a)),e.$on(\"routeEvent\",l[7]),ee(e.$$.fragment),P(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}else if(o){const u=a&4?ct(r,[Ct(l[2])]):{};e.$set(u)}},i(l){i||(e&&P(e.$$.fragment,l),i=!0)},o(l){e&&R(e.$$.fragment,l),i=!1},d(l){l&&B(n),e&&$(e,l)}}}function Tf(t){let e,n,i;const r=[{params:t[1]},t[2]];var o=t[0];function s(l,a){let u={};for(let f=0;f<r.length;f+=1)u=_e(u,r[f]);return a!==void 0&&a&6&&(u=_e(u,ct(r,[a&2&&{params:l[1]},a&4&&Ct(l[2])]))),{props:u}}return o&&(e=Wt(o,s(t)),e.$on(\"routeEvent\",t[6])),{c(){e&&ee(e.$$.fragment),n=Xe()},m(l,a){e&&x(e,l,a),q(l,n,a),i=!0},p(l,a){if(a&1&&o!==(o=l[0])){if(e){Te();const u=e;R(u.$$.fragment,1,0,()=>{$(u,1)}),Me()}o?(e=Wt(o,s(l,a)),e.$on(\"routeEvent\",l[6]),ee(e.$$.fragment),P(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}else if(o){const u=a&6?ct(r,[a&2&&{params:l[1]},a&4&&Ct(l[2])]):{};e.$set(u)}},i(l){i||(e&&P(e.$$.fragment,l),i=!0)},o(l){e&&R(e.$$.fragment,l),i=!1},d(l){l&&B(n),e&&$(e,l)}}}function Mf(t){let e,n,i,r;const o=[Tf,If],s=[];function l(a,u){return a[1]?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),i=Xe()},m(a,u){s[e].m(a,u),q(a,i,u),r=!0},p(a,[u]){let f=e;e=l(a),e===f?s[e].p(a,u):(Te(),R(s[f],1,1,()=>{s[f]=null}),Me(),n=s[e],n?n.p(a,u):(n=s[e]=o[e](a),n.c()),P(n,1),n.m(i.parentNode,i))},i(a){r||(P(n),r=!0)},o(a){R(n),r=!1},d(a){a&&B(i),s[e].d(a)}}}function Ao(){const t=window.location.href.indexOf(\"#/\");let e=t>-1?window.location.href.substr(t+1):\"/\";const n=e.indexOf(\"?\");let i=\"\";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const or=ut(null,function(e){e(Ao());const n=()=>{e(Ao())};return window.addEventListener(\"hashchange\",n,!1),function(){window.removeEventListener(\"hashchange\",n,!1)}});Xt(or,t=>t.location);Xt(or,t=>t.querystring);const Po=re(void 0);function Af(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Pf(t,e,n){let{routes:i={}}=e,{prefix:r=\"\"}=e,{restoreScrollState:o=!1}=e;class s{constructor(M,O){if(!O||typeof O!=\"function\"&&(typeof O!=\"object\"||O._sveltesparouter!==!0))throw Error(\"Invalid component object\");if(!M||typeof M==\"string\"&&(M.length<1||M.charAt(0)!=\"/\"&&M.charAt(0)!=\"*\")||typeof M==\"object\"&&!(M instanceof RegExp))throw Error('Invalid value for \"path\" argument - strings must start with / or *');const{pattern:k,keys:E}=Dl(M);this.path=M,typeof O==\"object\"&&O._sveltesparouter===!0?(this.component=O.component,this.conditions=O.conditions||[],this.userData=O.userData,this.props=O.props||{}):(this.component=()=>Promise.resolve(O),this.conditions=[],this.props={}),this._pattern=k,this._keys=E}match(M){if(r){if(typeof r==\"string\")if(M.startsWith(r))M=M.substr(r.length)||\"/\";else return null;else if(r instanceof RegExp){const C=M.match(r);if(C&&C[0])M=M.substr(C[0].length)||\"/\";else return null}}const O=this._pattern.exec(M);if(O===null)return null;if(this._keys===!1)return O;const k={};let E=0;for(;E<this._keys.length;){try{k[this._keys[E]]=decodeURIComponent(O[E+1]||\"\")||null}catch{k[this._keys[E]]=null}E++}return k}async checkConditions(M){for(let O=0;O<this.conditions.length;O++)if(!await this.conditions[O](M))return!1;return!0}}const l=[];i instanceof Map?i.forEach((v,M)=>{l.push(new s(M,v))}):Object.keys(i).forEach(v=>{l.push(new s(v,i[v]))});let a=null,u=null,f={};const c=ei();async function d(v,M){await _f(),c(v,M)}let h=null,g=null;o&&(g=v=>{v.state&&(v.state.__svelte_spa_router_scrollY||v.state.__svelte_spa_router_scrollX)?h=v.state:h=null},window.addEventListener(\"popstate\",g),bf(()=>{Af(h)}));let y=null,p=null;const m=or.subscribe(async v=>{y=v;let M=0;for(;M<l.length;){const O=l[M].match(v.location);if(!O){M++;continue}const k={route:l[M].path,location:v.location,querystring:v.querystring,userData:l[M].userData,params:O&&typeof O==\"object\"&&Object.keys(O).length?O:null};if(!await l[M].checkConditions(k)){n(0,a=null),p=null,d(\"conditionsFailed\",k);return}d(\"routeLoading\",Object.assign({},k));const E=l[M].component;if(p!=E){E.loading?(n(0,a=E.loading),p=E,n(1,u=E.loadingParams),n(2,f={}),d(\"routeLoaded\",Object.assign({},k,{component:a,name:a.name,params:u}))):(n(0,a=null),p=null);const C=await E();if(v!=y)return;n(0,a=C&&C.default||C),p=E}O&&typeof O==\"object\"&&Object.keys(O).length?n(1,u=O):n(1,u=null),n(2,f=l[M].props),d(\"routeLoaded\",Object.assign({},k,{component:a,name:a.name,params:u})).then(()=>{Po.set(u)});return}n(0,a=null),p=null,Po.set(void 0)});nr(()=>{m(),g&&window.removeEventListener(\"popstate\",g)});function _(v){ke.call(this,t,v)}function b(v){ke.call(this,t,v)}return t.$$set=v=>{\"routes\"in v&&n(3,i=v.routes),\"prefix\"in v&&n(4,r=v.prefix),\"restoreScrollState\"in v&&n(5,o=v.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?\"manual\":\"auto\")},[a,u,f,i,r,o,_,b]}class Nf extends ue{constructor(e){super(),ae(this,e,Pf,Mf,ce,{routes:3,prefix:4,restoreScrollState:5})}}function Ae(t){if(typeof t==\"string\"||typeof t==\"number\")return\"\"+t;let e=\"\";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Ae(t[n]))!==\"\"&&(e+=(e&&\" \")+i);else for(let n in t)t[n]&&(e+=(e&&\" \")+n);return e}var Df={value:()=>{}};function sr(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+\"\")||i in n||/[\\s.]/.test(i))throw new Error(\"illegal type: \"+i);n[i]=[]}return new Si(n)}function Si(t){this._=t}function Ff(t,e){return t.trim().split(/^|\\s+/).map(function(n){var i=\"\",r=n.indexOf(\".\");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);return{type:n,name:i}})}Si.prototype=sr.prototype={constructor:Si,on:function(t,e){var n=this._,i=Ff(t+\"\",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Rf(n[r],t.name)))return r;return}if(e!=null&&typeof e!=\"function\")throw new Error(\"invalid callback: \"+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=No(n[r],t.name,e);else if(e==null)for(r in n)n[r]=No(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Si(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Rf(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function No(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Df,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Lr=\"http://www.w3.org/1999/xhtml\";const Do={svg:\"http://www.w3.org/2000/svg\",xhtml:Lr,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};function lr(t){var e=t+=\"\",n=e.indexOf(\":\");return n>=0&&(e=t.slice(0,n))!==\"xmlns\"&&(t=t.slice(n+1)),Do.hasOwnProperty(e)?{space:Do[e],local:t}:t}function zf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Lr&&e.documentElement.namespaceURI===Lr?e.createElement(t):e.createElementNS(n,t)}}function Lf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fl(t){var e=lr(t);return(e.local?Lf:zf)(e)}function Hf(){}function to(t){return t==null?Hf:function(){return this.querySelector(t)}}function Bf(t){typeof t!=\"function\"&&(t=to(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=new Array(s),a,u,f=0;f<s;++f)(a=o[f])&&(u=t.call(a,a.__data__,f,o))&&(\"__data__\"in a&&(u.__data__=a.__data__),l[f]=u);return new dt(i,this._parents)}function Vf(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qf(){return[]}function Rl(t){return t==null?qf:function(){return this.querySelectorAll(t)}}function Wf(t){return function(){return Vf(t.apply(this,arguments))}}function Xf(t){typeof t==\"function\"?t=Wf(t):t=Rl(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new dt(i,r)}function zl(t){return function(){return this.matches(t)}}function Ll(t){return function(e){return e.matches(t)}}var Yf=Array.prototype.find;function Kf(t){return function(){return Yf.call(this.children,t)}}function Jf(){return this.firstElementChild}function Uf(t){return this.select(t==null?Jf:Kf(typeof t==\"function\"?t:Ll(t)))}var jf=Array.prototype.filter;function Gf(){return Array.from(this.children)}function Zf(t){return function(){return jf.call(this.children,t)}}function Qf(t){return this.selectAll(t==null?Gf:Zf(typeof t==\"function\"?t:Ll(t)))}function xf(t){typeof t!=\"function\"&&(t=zl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new dt(i,this._parents)}function Hl(t){return new Array(t.length)}function $f(){return new dt(this._enter||this._groups.map(Hl),this._parents)}function zi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zi.prototype={constructor:zi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ec(t){return function(){return t}}function tc(t,e,n,i,r,o){for(var s=0,l,a=e.length,u=o.length;s<u;++s)(l=e[s])?(l.__data__=o[s],i[s]=l):n[s]=new zi(t,o[s]);for(;s<a;++s)(l=e[s])&&(r[s]=l)}function nc(t,e,n,i,r,o,s){var l,a,u=new Map,f=e.length,c=o.length,d=new Array(f),h;for(l=0;l<f;++l)(a=e[l])&&(d[l]=h=s.call(a,a.__data__,l,e)+\"\",u.has(h)?r[l]=a:u.set(h,a));for(l=0;l<c;++l)h=s.call(t,o[l],l,o)+\"\",(a=u.get(h))?(i[l]=a,a.__data__=o[l],u.delete(h)):n[l]=new zi(t,o[l]);for(l=0;l<f;++l)(a=e[l])&&u.get(d[l])===a&&(r[l]=a)}function ic(t){return t.__data__}function rc(t,e){if(!arguments.length)return Array.from(this,ic);var n=e?nc:tc,i=this._parents,r=this._groups;typeof t!=\"function\"&&(t=ec(t));for(var o=r.length,s=new Array(o),l=new Array(o),a=new Array(o),u=0;u<o;++u){var f=i[u],c=r[u],d=c.length,h=oc(t.call(f,f&&f.__data__,u,i)),g=h.length,y=l[u]=new Array(g),p=s[u]=new Array(g),m=a[u]=new Array(d);n(f,c,y,p,m,h,e);for(var _=0,b=0,v,M;_<g;++_)if(v=y[_]){for(_>=b&&(b=_+1);!(M=p[b])&&++b<g;);v._next=M||null}}return s=new dt(s,i),s._enter=l,s._exit=a,s}function oc(t){return typeof t==\"object\"&&\"length\"in t?t:Array.from(t)}function sc(){return new dt(this._exit||this._groups.map(Hl),this._parents)}function lc(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t==\"function\"?(i=t(i),i&&(i=i.selection())):i=i.append(t+\"\"),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function ac(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),l=new Array(r),a=0;a<s;++a)for(var u=n[a],f=i[a],c=u.length,d=l[a]=new Array(c),h,g=0;g<c;++g)(h=u[g]||f[g])&&(d[g]=h);for(;a<r;++a)l[a]=n[a];return new dt(l,this._parents)}function uc(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function fc(t){t||(t=cc);function e(c,d){return c&&d?t(c.__data__,d.__data__):!c-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],l=s.length,a=r[o]=new Array(l),u,f=0;f<l;++f)(u=s[f])&&(a[f]=u);a.sort(e)}return new dt(r,this._parents).order()}function cc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hc(){return Array.from(this)}function gc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function mc(){let t=0;for(const e of this)++t;return t}function yc(){return!this.node()}function pc(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,l;o<s;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function bc(t){return function(){this.removeAttribute(t)}}function wc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _c(t,e){return function(){this.setAttribute(t,e)}}function vc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Sc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ec(t,e){var n=lr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?wc:bc:typeof e==\"function\"?n.local?Sc:kc:n.local?vc:_c)(n,e))}function Bl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Cc(t){return function(){this.style.removeProperty(t)}}function Oc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ic(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Tc(t,e,n){return arguments.length>1?this.each((e==null?Cc:typeof e==\"function\"?Ic:Oc)(t,e,n??\"\")):Tn(this.node(),t)}function Tn(t,e){return t.style.getPropertyValue(e)||Bl(t).getComputedStyle(t,null).getPropertyValue(e)}function Mc(t){return function(){delete this[t]}}function Ac(t,e){return function(){this[t]=e}}function Pc(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Nc(t,e){return arguments.length>1?this.each((e==null?Mc:typeof e==\"function\"?Pc:Ac)(t,e)):this.node()[t]}function Vl(t){return t.trim().split(/^|\\s+/)}function no(t){return t.classList||new ql(t)}function ql(t){this._node=t,this._names=Vl(t.getAttribute(\"class\")||\"\")}ql.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}};function Wl(t,e){for(var n=no(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Xl(t,e){for(var n=no(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Dc(t){return function(){Wl(this,t)}}function Fc(t){return function(){Xl(this,t)}}function Rc(t,e){return function(){(e.apply(this,arguments)?Wl:Xl)(this,t)}}function zc(t,e){var n=Vl(t+\"\");if(arguments.length<2){for(var i=no(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e==\"function\"?Rc:e?Dc:Fc)(n,e))}function Lc(){this.textContent=\"\"}function Hc(t){return function(){this.textContent=t}}function Bc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??\"\"}}function Vc(t){return arguments.length?this.each(t==null?Lc:(typeof t==\"function\"?Bc:Hc)(t)):this.node().textContent}function qc(){this.innerHTML=\"\"}function Wc(t){return function(){this.innerHTML=t}}function Xc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??\"\"}}function Yc(t){return arguments.length?this.each(t==null?qc:(typeof t==\"function\"?Xc:Wc)(t)):this.node().innerHTML}function Kc(){this.nextSibling&&this.parentNode.appendChild(this)}function Jc(){return this.each(Kc)}function Uc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jc(){return this.each(Uc)}function Gc(t){var e=typeof t==\"function\"?t:Fl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Zc(){return null}function Qc(t,e){var n=typeof t==\"function\"?t:Fl(t),i=e==null?Zc:typeof e==\"function\"?e:to(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function xc(){var t=this.parentNode;t&&t.removeChild(this)}function $c(){return this.each(xc)}function ed(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function td(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nd(t){return this.select(t?td:ed)}function id(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__}function rd(t){return function(e){t.call(this,e,this.__data__)}}function od(t){return t.trim().split(/^|\\s+/).map(function(e){var n=\"\",i=e.indexOf(\".\");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function sd(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ld(t,e,n){return function(){var i=this.__on,r,o=rd(e);if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ad(t,e,n){var i=od(t+\"\"),r,o=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,f;a<u;++a)for(r=0,f=l[a];r<o;++r)if((s=i[r]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?ld:sd,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function Yl(t,e,n){var i=Bl(t),r=i.CustomEvent;typeof r==\"function\"?r=new r(e,n):(r=i.document.createEvent(\"Event\"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ud(t,e){return function(){return Yl(this,t,e)}}function fd(t,e){return function(){return Yl(this,t,e.apply(this,arguments))}}function cd(t,e){return this.each((typeof e==\"function\"?fd:ud)(t,e))}function*dd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Kl=[null];function dt(t,e){this._groups=t,this._parents=e}function ti(){return new dt([[document.documentElement]],Kl)}function hd(){return this}dt.prototype=ti.prototype={constructor:dt,select:Bf,selectAll:Xf,selectChild:Uf,selectChildren:Qf,filter:xf,data:rc,enter:$f,exit:sc,join:lc,merge:ac,selection:hd,order:uc,sort:fc,call:dc,nodes:hc,node:gc,size:mc,empty:yc,each:pc,attr:Ec,style:Tc,property:Nc,classed:zc,text:Vc,html:Yc,raise:Jc,lower:jc,append:Gc,insert:Qc,remove:$c,clone:nd,datum:id,on:ad,dispatch:cd,[Symbol.iterator]:dd};function ht(t){return typeof t==\"string\"?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],Kl)}function gd(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pt(t,e){if(t=gd(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const md={passive:!1},Un={capture:!0,passive:!1};function _r(t){t.stopImmediatePropagation()}function kn(t){t.preventDefault(),t.stopImmediatePropagation()}function Jl(t){var e=t.document.documentElement,n=ht(t).on(\"dragstart.drag\",kn,Un);\"onselectstart\"in e?n.on(\"selectstart.drag\",kn,Un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=\"none\")}function Ul(t,e){var n=t.document.documentElement,i=ht(t).on(\"dragstart.drag\",null);e&&(i.on(\"click.drag\",kn,Un),setTimeout(function(){i.on(\"click.drag\",null)},0)),\"onselectstart\"in n?i.on(\"selectstart.drag\",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ui=t=>()=>t;function Hr(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:l,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Hr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function yd(t){return!t.ctrlKey&&!t.button}function pd(){return this.parentNode}function bd(t,e){return e??{x:t.x,y:t.y}}function wd(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function _d(){var t=yd,e=pd,n=bd,i=wd,r={},o=sr(\"start\",\"drag\",\"end\"),s=0,l,a,u,f,c=0;function d(v){v.on(\"mousedown.drag\",h).filter(i).on(\"touchstart.drag\",p).on(\"touchmove.drag\",m,md).on(\"touchend.drag touchcancel.drag\",_).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function h(v,M){if(!(f||!t.call(this,v,M))){var O=b(this,e.call(this,v,M),v,M,\"mouse\");O&&(ht(v.view).on(\"mousemove.drag\",g,Un).on(\"mouseup.drag\",y,Un),Jl(v.view),_r(v),u=!1,l=v.clientX,a=v.clientY,O(\"start\",v))}}function g(v){if(kn(v),!u){var M=v.clientX-l,O=v.clientY-a;u=M*M+O*O>c}r.mouse(\"drag\",v)}function y(v){ht(v.view).on(\"mousemove.drag mouseup.drag\",null),Ul(v.view,u),kn(v),r.mouse(\"end\",v)}function p(v,M){if(t.call(this,v,M)){var O=v.changedTouches,k=e.call(this,v,M),E=O.length,C,D;for(C=0;C<E;++C)(D=b(this,k,v,M,O[C].identifier,O[C]))&&(_r(v),D(\"start\",v,O[C]))}}function m(v){var M=v.changedTouches,O=M.length,k,E;for(k=0;k<O;++k)(E=r[M[k].identifier])&&(kn(v),E(\"drag\",v,M[k]))}function _(v){var M=v.changedTouches,O=M.length,k,E;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),k=0;k<O;++k)(E=r[M[k].identifier])&&(_r(v),E(\"end\",v,M[k]))}function b(v,M,O,k,E,C){var D=o.copy(),z=pt(C||O,M),X,A,w;if((w=n.call(v,new Hr(\"beforestart\",{sourceEvent:O,target:d,identifier:E,active:s,x:z[0],y:z[1],dx:0,dy:0,dispatch:D}),k))!=null)return X=w.x-z[0]||0,A=w.y-z[1]||0,function N(T,F,V){var K=z,W;switch(T){case\"start\":r[E]=N,W=s++;break;case\"end\":delete r[E],--s;case\"drag\":z=pt(V||F,M),W=s;break}D.call(T,v,new Hr(T,{sourceEvent:F,subject:w,target:d,identifier:E,active:W,x:z[0]+X,y:z[1]+A,dx:z[0]-K[0],dy:z[1]-K[1],dispatch:D}),k)}}return d.filter=function(v){return arguments.length?(t=typeof v==\"function\"?v:ui(!!v),d):t},d.container=function(v){return arguments.length?(e=typeof v==\"function\"?v:ui(v),d):e},d.subject=function(v){return arguments.length?(n=typeof v==\"function\"?v:ui(v),d):n},d.touchable=function(v){return arguments.length?(i=typeof v==\"function\"?v:ui(!!v),d):i},d.on=function(){var v=o.on.apply(o,arguments);return v===o?d:v},d.clickDistance=function(v){return arguments.length?(c=(v=+v)*v,d):Math.sqrt(c)},d}function io(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ni(){}var jn=.7,Li=1/jn,Sn=\"\\\\s*([+-]?\\\\d+)\\\\s*\",Gn=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",St=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",vd=/^#([0-9a-f]{3,8})$/,kd=new RegExp(`^rgb\\\\(${Sn},${Sn},${Sn}\\\\)$`),Sd=new RegExp(`^rgb\\\\(${St},${St},${St}\\\\)$`),Ed=new RegExp(`^rgba\\\\(${Sn},${Sn},${Sn},${Gn}\\\\)$`),Cd=new RegExp(`^rgba\\\\(${St},${St},${St},${Gn}\\\\)$`),Od=new RegExp(`^hsl\\\\(${Gn},${St},${St}\\\\)$`),Id=new RegExp(`^hsla\\\\(${Gn},${St},${St},${Gn}\\\\)$`),Fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};io(ni,Zn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ro,formatHex:Ro,formatHex8:Td,formatHsl:Md,formatRgb:zo,toString:zo});function Ro(){return this.rgb().formatHex()}function Td(){return this.rgb().formatHex8()}function Md(){return Gl(this).formatHsl()}function zo(){return this.rgb().formatRgb()}function Zn(t){var e,n;return t=(t+\"\").trim().toLowerCase(),(e=vd.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Lo(e):n===3?new nt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kd.exec(t))?new nt(e[1],e[2],e[3],1):(e=Sd.exec(t))?new nt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ed.exec(t))?fi(e[1],e[2],e[3],e[4]):(e=Cd.exec(t))?fi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Od.exec(t))?Vo(e[1],e[2]/100,e[3]/100,1):(e=Id.exec(t))?Vo(e[1],e[2]/100,e[3]/100,e[4]):Fo.hasOwnProperty(t)?Lo(Fo[t]):t===\"transparent\"?new nt(NaN,NaN,NaN,0):null}function Lo(t){return new nt(t>>16&255,t>>8&255,t&255,1)}function fi(t,e,n,i){return i<=0&&(t=e=n=NaN),new nt(t,e,n,i)}function Ad(t){return t instanceof ni||(t=Zn(t)),t?(t=t.rgb(),new nt(t.r,t.g,t.b,t.opacity)):new nt}function Br(t,e,n,i){return arguments.length===1?Ad(t):new nt(t,e,n,i??1)}function nt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}io(nt,Br,jl(ni,{brighter(t){return t=t==null?Li:Math.pow(Li,t),new nt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jn:Math.pow(jn,t),new nt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new nt(xt(this.r),xt(this.g),xt(this.b),Hi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ho,formatHex:Ho,formatHex8:Pd,formatRgb:Bo,toString:Bo}));function Ho(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}`}function Pd(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}${Gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bo(){const t=Hi(this.opacity);return`${t===1?\"rgb(\":\"rgba(\"}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${t===1?\")\":`, ${t})`}`}function Hi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gt(t){return t=xt(t),(t<16?\"0\":\"\")+t.toString(16)}function Vo(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bt(t,e,n,i)}function Gl(t){if(t instanceof bt)return new bt(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=Zn(t)),!t)return new bt;if(t instanceof bt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-r,a=(o+r)/2;return l?(e===o?s=(n-i)/l+(n<i)*6:n===o?s=(i-e)/l+2:s=(e-n)/l+4,l/=a<.5?o+r:2-o-r,s*=60):l=a>0&&a<1?0:s,new bt(s,l,a,t.opacity)}function Nd(t,e,n,i){return arguments.length===1?Gl(t):new bt(t,e,n,i??1)}function bt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}io(bt,Nd,jl(ni,{brighter(t){return t=t==null?Li:Math.pow(Li,t),new bt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jn:Math.pow(jn,t),new bt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new nt(vr(t>=240?t-240:t+120,r,i),vr(t,r,i),vr(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new bt(qo(this.h),ci(this.s),ci(this.l),Hi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hi(this.opacity);return`${t===1?\"hsl(\":\"hsla(\"}${qo(this.h)}, ${ci(this.s)*100}%, ${ci(this.l)*100}%${t===1?\")\":`, ${t})`}`}}));function qo(t){return t=(t||0)%360,t<0?t+360:t}function ci(t){return Math.max(0,Math.min(1,t||0))}function vr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Zl=t=>()=>t;function Dd(t,e){return function(n){return t+n*e}}function Fd(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Rd(t){return(t=+t)==1?Ql:function(e,n){return n-e?Fd(e,n,t):Zl(isNaN(e)?n:e)}}function Ql(t,e){var n=e-t;return n?Dd(t,n):Zl(isNaN(t)?e:t)}const Wo=function t(e){var n=Rd(e);function i(r,o){var s=n((r=Br(r)).r,(o=Br(o)).r),l=n(r.g,o.g),a=n(r.b,o.b),u=Ql(r.opacity,o.opacity);return function(f){return r.r=s(f),r.g=l(f),r.b=a(f),r.opacity=u(f),r+\"\"}}return i.gamma=t,i}(1);function Bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Vr=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,kr=new RegExp(Vr.source,\"g\");function zd(t){return function(){return t}}function Ld(t){return function(e){return t(e)+\"\"}}function Hd(t,e){var n=Vr.lastIndex=kr.lastIndex=0,i,r,o,s=-1,l=[],a=[];for(t=t+\"\",e=e+\"\";(i=Vr.exec(t))&&(r=kr.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,a.push({i:s,x:Bt(i,r)})),n=kr.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?a[0]?Ld(a[0].x):zd(e):(e=a.length,function(u){for(var f=0,c;f<e;++f)l[(c=a[f]).i]=c.x(u);return l.join(\"\")})}var Xo=180/Math.PI,qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xl(t,e,n,i,r,o){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Xo,skewX:Math.atan(a)*Xo,scaleX:s,scaleY:l}}var di;function Bd(t){const e=new(typeof DOMMatrix==\"function\"?DOMMatrix:WebKitCSSMatrix)(t+\"\");return e.isIdentity?qr:xl(e.a,e.b,e.c,e.d,e.e,e.f)}function Vd(t){return t==null||(di||(di=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),di.setAttribute(\"transform\",t),!(t=di.transform.baseVal.consolidate()))?qr:(t=t.matrix,xl(t.a,t.b,t.c,t.d,t.e,t.f))}function $l(t,e,n,i){function r(u){return u.length?u.pop()+\" \":\"\"}function o(u,f,c,d,h,g){if(u!==c||f!==d){var y=h.push(\"translate(\",null,e,null,n);g.push({i:y-4,x:Bt(u,c)},{i:y-2,x:Bt(f,d)})}else(c||d)&&h.push(\"translate(\"+c+e+d+n)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(r(c)+\"rotate(\",null,i)-2,x:Bt(u,f)})):f&&c.push(r(c)+\"rotate(\"+f+i)}function l(u,f,c,d){u!==f?d.push({i:c.push(r(c)+\"skewX(\",null,i)-2,x:Bt(u,f)}):f&&c.push(r(c)+\"skewX(\"+f+i)}function a(u,f,c,d,h,g){if(u!==c||f!==d){var y=h.push(r(h)+\"scale(\",null,\",\",null,\")\");g.push({i:y-4,x:Bt(u,c)},{i:y-2,x:Bt(f,d)})}else(c!==1||d!==1)&&h.push(r(h)+\"scale(\"+c+\",\"+d+\")\")}return function(u,f){var c=[],d=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),l(u.skewX,f.skewX,c,d),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var g=-1,y=d.length,p;++g<y;)c[(p=d[g]).i]=p.x(h);return c.join(\"\")}}}var qd=$l(Bd,\"px, \",\"px)\",\"deg)\"),Wd=$l(Vd,\", \",\")\",\")\"),Xd=1e-12;function Yo(t){return((t=Math.exp(t))+1/t)/2}function Yd(t){return((t=Math.exp(t))-1/t)/2}function Kd(t){return((t=Math.exp(2*t))-1)/(t+1)}const Jd=function t(e,n,i){function r(o,s){var l=o[0],a=o[1],u=o[2],f=s[0],c=s[1],d=s[2],h=f-l,g=c-a,y=h*h+g*g,p,m;if(y<Xd)m=Math.log(d/u)/e,p=function(k){return[l+k*h,a+k*g,u*Math.exp(e*k*m)]};else{var _=Math.sqrt(y),b=(d*d-u*u+i*y)/(2*u*n*_),v=(d*d-u*u-i*y)/(2*d*n*_),M=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(v*v+1)-v);m=(O-M)/e,p=function(k){var E=k*m,C=Yo(M),D=u/(n*_)*(C*Kd(e*E+M)-Yd(M));return[l+D*h,a+D*g,u*C/Yo(e*E+M)]}}return p.duration=m*1e3*e/Math.SQRT2,p}return r.rho=function(o){var s=Math.max(.001,+o),l=s*s,a=l*l;return t(s,l,a)},r}(Math.SQRT2,2,4);var Mn=0,Ln=0,Dn=0,ea=1e3,Bi,Hn,Vi=0,tn=0,ar=0,Qn=typeof performance==\"object\"&&performance.now?performance:Date,ta=typeof window==\"object\"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ro(){return tn||(ta(Ud),tn=Qn.now()+ar)}function Ud(){tn=0}function qi(){this._call=this._time=this._next=null}qi.prototype=na.prototype={constructor:qi,restart:function(t,e,n){if(typeof t!=\"function\")throw new TypeError(\"callback is not a function\");n=(n==null?ro():+n)+(e==null?0:+e),!this._next&&Hn!==this&&(Hn?Hn._next=this:Bi=this,Hn=this),this._call=t,this._time=n,Wr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wr())}};function na(t,e,n){var i=new qi;return i.restart(t,e,n),i}function jd(){ro(),++Mn;for(var t=Bi,e;t;)(e=tn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Mn}function Ko(){tn=(Vi=Qn.now())+ar,Mn=Ln=0;try{jd()}finally{Mn=0,Zd(),tn=0}}function Gd(){var t=Qn.now(),e=t-Vi;e>ea&&(ar-=e,Vi=t)}function Zd(){for(var t,e=Bi,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Bi=n);Hn=t,Wr(i)}function Wr(t){if(!Mn){Ln&&(Ln=clearTimeout(Ln));var e=t-tn;e>24?(t<1/0&&(Ln=setTimeout(Ko,t-Qn.now()-ar)),Dn&&(Dn=clearInterval(Dn))):(Dn||(Vi=Qn.now(),Dn=setInterval(Gd,ea)),Mn=1,ta(Ko))}}function Jo(t,e,n){var i=new qi;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Qd=sr(\"start\",\"end\",\"cancel\",\"interrupt\"),xd=[],ia=0,Uo=1,Xr=2,Ei=3,jo=4,Yr=5,Ci=6;function ur(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;$d(t,n,{name:e,index:i,group:r,on:Qd,tween:xd,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ia})}function oo(t,e){var n=_t(t,e);if(n.state>ia)throw new Error(\"too late; already scheduled\");return n}function Ot(t,e){var n=_t(t,e);if(n.state>Ei)throw new Error(\"too late; already running\");return n}function _t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error(\"transition not found\");return n}function $d(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=na(o,0,n.time);function o(u){n.state=Uo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,c,d,h;if(n.state!==Uo)return a();for(f in i)if(h=i[f],h.name===n.name){if(h.state===Ei)return Jo(s);h.state===jo?(h.state=Ci,h.timer.stop(),h.on.call(\"interrupt\",t,t.__data__,h.index,h.group),delete i[f]):+f<e&&(h.state=Ci,h.timer.stop(),h.on.call(\"cancel\",t,t.__data__,h.index,h.group),delete i[f])}if(Jo(function(){n.state===Ei&&(n.state=jo,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Xr,n.on.call(\"start\",t,t.__data__,n.index,n.group),n.state===Xr){for(n.state=Ei,r=new Array(d=n.tween.length),f=0,c=-1;f<d;++f)(h=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Yr,1),c=-1,d=r.length;++c<d;)r[c].call(t,f);n.state===Yr&&(n.on.call(\"end\",t,t.__data__,n.index,n.group),a())}function a(){n.state=Ci,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Oi(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+\"\";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Xr&&i.state<Yr,i.state=Ci,i.timer.stop(),i.on.call(r?\"interrupt\":\"cancel\",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function eh(t){return this.each(function(){Oi(this,t)})}function th(t,e){var n,i;return function(){var r=Ot(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function nh(t,e,n){var i,r;if(typeof n!=\"function\")throw new Error;return function(){var o=Ot(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var l={name:e,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===e){r[a]=l;break}a===u&&r.push(l)}o.tween=r}}function ih(t,e){var n=this._id;if(t+=\"\",arguments.length<2){for(var i=_t(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?th:nh)(n,t,e))}function so(t,e,n){var i=t._id;return t.each(function(){var r=Ot(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return _t(r,i).value[e]}}function ra(t,e){var n;return(typeof e==\"number\"?Bt:e instanceof Zn?Wo:(n=Zn(e))?(e=n,Wo):Hd)(t,e)}function rh(t){return function(){this.removeAttribute(t)}}function oh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sh(t,e,n){var i,r=n+\"\",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function lh(t,e,n){var i,r=n+\"\",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function ah(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+\"\",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function uh(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+\"\",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function fh(t,e){var n=lr(t),i=n===\"transform\"?Wd:ra;return this.attrTween(t,typeof e==\"function\"?(n.local?uh:ah)(n,i,so(this,\"attr.\"+t,e)):e==null?(n.local?oh:rh)(n):(n.local?lh:sh)(n,i,e))}function ch(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function dh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hh(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&dh(t,o)),n}return r._value=e,r}function gh(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&ch(t,o)),n}return r._value=e,r}function mh(t,e){var n=\"attr.\"+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!=\"function\")throw new Error;var i=lr(t);return this.tween(n,(i.local?hh:gh)(i,e))}function yh(t,e){return function(){oo(this,t).delay=+e.apply(this,arguments)}}function ph(t,e){return e=+e,function(){oo(this,t).delay=e}}function bh(t){var e=this._id;return arguments.length?this.each((typeof t==\"function\"?yh:ph)(e,t)):_t(this.node(),e).delay}function wh(t,e){return function(){Ot(this,t).duration=+e.apply(this,arguments)}}function _h(t,e){return e=+e,function(){Ot(this,t).duration=e}}function vh(t){var e=this._id;return arguments.length?this.each((typeof t==\"function\"?wh:_h)(e,t)):_t(this.node(),e).duration}function kh(t,e){if(typeof e!=\"function\")throw new Error;return function(){Ot(this,t).ease=e}}function Sh(t){var e=this._id;return arguments.length?this.each(kh(e,t)):_t(this.node(),e).ease}function Eh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!=\"function\")throw new Error;Ot(this,t).ease=n}}function Ch(t){if(typeof t!=\"function\")throw new Error;return this.each(Eh(this._id,t))}function Oh(t){typeof t!=\"function\"&&(t=zl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Rt(i,this._parents,this._name,this._id)}function Ih(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),l=0;l<o;++l)for(var a=e[l],u=n[l],f=a.length,c=s[l]=new Array(f),d,h=0;h<f;++h)(d=a[h]||u[h])&&(c[h]=d);for(;l<i;++l)s[l]=e[l];return new Rt(s,this._parents,this._name,this._id)}function Th(t){return(t+\"\").trim().split(/^|\\s+/).every(function(e){var n=e.indexOf(\".\");return n>=0&&(e=e.slice(0,n)),!e||e===\"start\"})}function Mh(t,e,n){var i,r,o=Th(e)?oo:Ot;return function(){var s=o(this,t),l=s.on;l!==i&&(r=(i=l).copy()).on(e,n),s.on=r}}function Ah(t,e){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(t):this.each(Mh(n,t,e))}function Ph(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Nh(){return this.on(\"end.remove\",Ph(this._id))}function Dh(t){var e=this._name,n=this._id;typeof t!=\"function\"&&(t=to(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var l=i[s],a=l.length,u=o[s]=new Array(a),f,c,d=0;d<a;++d)(f=l[d])&&(c=t.call(f,f.__data__,d,l))&&(\"__data__\"in f&&(c.__data__=f.__data__),u[d]=c,ur(u[d],e,n,d,u,_t(f,n)));return new Rt(o,this._parents,e,n)}function Fh(t){var e=this._name,n=this._id;typeof t!=\"function\"&&(t=Rl(t));for(var i=this._groups,r=i.length,o=[],s=[],l=0;l<r;++l)for(var a=i[l],u=a.length,f,c=0;c<u;++c)if(f=a[c]){for(var d=t.call(f,f.__data__,c,a),h,g=_t(f,n),y=0,p=d.length;y<p;++y)(h=d[y])&&ur(h,e,n,y,d,g);o.push(d),s.push(f)}return new Rt(o,s,e,n)}var Rh=ti.prototype.constructor;function zh(){return new Rh(this._groups,this._parents)}function Lh(t,e){var n,i,r;return function(){var o=Tn(this,t),s=(this.style.removeProperty(t),Tn(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function oa(t){return function(){this.style.removeProperty(t)}}function Hh(t,e,n){var i,r=n+\"\",o;return function(){var s=Tn(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Bh(t,e,n){var i,r,o;return function(){var s=Tn(this,t),l=n(this),a=l+\"\";return l==null&&(a=l=(this.style.removeProperty(t),Tn(this,t))),s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l))}}function Vh(t,e){var n,i,r,o=\"style.\"+e,s=\"end.\"+o,l;return function(){var a=Ot(this,t),u=a.on,f=a.value[o]==null?l||(l=oa(e)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(s,r=f),a.on=i}}function qh(t,e,n){var i=(t+=\"\")==\"transform\"?qd:ra;return e==null?this.styleTween(t,Lh(t,i)).on(\"end.style.\"+t,oa(t)):typeof e==\"function\"?this.styleTween(t,Bh(t,i,so(this,\"style.\"+t,e))).each(Vh(this._id,t)):this.styleTween(t,Hh(t,i,e),n).on(\"end.style.\"+t,null)}function Wh(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Xh(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Wh(t,s,n)),i}return o._value=e,o}function Yh(t,e,n){var i=\"style.\"+(t+=\"\");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=\"function\")throw new Error;return this.tween(i,Xh(t,e,n??\"\"))}function Kh(t){return function(){this.textContent=t}}function Jh(t){return function(){var e=t(this);this.textContent=e??\"\"}}function Uh(t){return this.tween(\"text\",typeof t==\"function\"?Jh(so(this,\"text\",t)):Kh(t==null?\"\":t+\"\"))}function jh(t){return function(e){this.textContent=t.call(this,e)}}function Gh(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&jh(r)),e}return i._value=t,i}function Zh(t){var e=\"text\";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!=\"function\")throw new Error;return this.tween(e,Gh(t))}function Qh(){for(var t=this._name,e=this._id,n=sa(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var f=_t(a,e);ur(a,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Rt(i,this._parents,t,n)}function xh(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var l={value:s},a={value:function(){--r===0&&o()}};n.each(function(){var u=Ot(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),u.on=e}),r===0&&o()})}var $h=0;function Rt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function sa(){return++$h}var At=ti.prototype;Rt.prototype={constructor:Rt,select:Dh,selectAll:Fh,selectChild:At.selectChild,selectChildren:At.selectChildren,filter:Oh,merge:Ih,selection:zh,transition:Qh,call:At.call,nodes:At.nodes,node:At.node,size:At.size,empty:At.empty,each:At.each,on:Ah,attr:fh,attrTween:mh,style:qh,styleTween:Yh,text:Uh,textTween:Zh,remove:Nh,tween:ih,delay:bh,duration:vh,ease:Sh,easeVarying:Ch,end:xh,[Symbol.iterator]:At[Symbol.iterator]};function eg(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tg={time:null,delay:0,duration:250,ease:eg};function ng(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ig(t){var e,n;t instanceof Rt?(e=t._id,t=t._name):(e=sa(),(n=tg).time=ro(),t=t==null?null:t+\"\");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&ur(a,t,e,u,s,n||ng(a,e));return new Rt(i,this._parents,t,e)}ti.prototype.interrupt=eh;ti.prototype.transition=ig;const hi=t=>()=>t;function rg(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Nt(t,e,n){this.k=t,this.x=e,this.y=n}Nt.prototype={constructor:Nt,scale:function(t){return t===1?this:new Nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return\"translate(\"+this.x+\",\"+this.y+\") scale(\"+this.k+\")\"}};var fr=new Nt(1,0,0);la.prototype=Nt.prototype;function la(t){for(;!t.__zoom;)if(!(t=t.parentNode))return fr;return t.__zoom}function Sr(t){t.stopImmediatePropagation()}function Fn(t){t.preventDefault(),t.stopImmediatePropagation()}function og(t){return(!t.ctrlKey||t.type===\"wheel\")&&!t.button}function sg(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute(\"viewBox\")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Go(){return this.__zoom||fr}function lg(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ag(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function ug(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function aa(){var t=og,e=sg,n=ug,i=lg,r=ag,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Jd,u=sr(\"start\",\"zoom\",\"end\"),f,c,d,h=500,g=150,y=0,p=10;function m(w){w.property(\"__zoom\",Go).on(\"wheel.zoom\",E,{passive:!1}).on(\"mousedown.zoom\",C).on(\"dblclick.zoom\",D).filter(r).on(\"touchstart.zoom\",z).on(\"touchmove.zoom\",X).on(\"touchend.zoom touchcancel.zoom\",A).style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}m.transform=function(w,N,T,F){var V=w.selection?w.selection():w;V.property(\"__zoom\",Go),w!==V?M(w,N,T,F):V.interrupt().each(function(){O(this,arguments).event(F).start().zoom(null,typeof N==\"function\"?N.apply(this,arguments):N).end()})},m.scaleBy=function(w,N,T,F){m.scaleTo(w,function(){var V=this.__zoom.k,K=typeof N==\"function\"?N.apply(this,arguments):N;return V*K},T,F)},m.scaleTo=function(w,N,T,F){m.transform(w,function(){var V=e.apply(this,arguments),K=this.__zoom,W=T==null?v(V):typeof T==\"function\"?T.apply(this,arguments):T,U=K.invert(W),H=typeof N==\"function\"?N.apply(this,arguments):N;return n(b(_(K,H),W,U),V,s)},T,F)},m.translateBy=function(w,N,T,F){m.transform(w,function(){return n(this.__zoom.translate(typeof N==\"function\"?N.apply(this,arguments):N,typeof T==\"function\"?T.apply(this,arguments):T),e.apply(this,arguments),s)},null,F)},m.translateTo=function(w,N,T,F,V){m.transform(w,function(){var K=e.apply(this,arguments),W=this.__zoom,U=F==null?v(K):typeof F==\"function\"?F.apply(this,arguments):F;return n(fr.translate(U[0],U[1]).scale(W.k).translate(typeof N==\"function\"?-N.apply(this,arguments):-N,typeof T==\"function\"?-T.apply(this,arguments):-T),K,s)},F,V)};function _(w,N){return N=Math.max(o[0],Math.min(o[1],N)),N===w.k?w:new Nt(N,w.x,w.y)}function b(w,N,T){var F=N[0]-T[0]*w.k,V=N[1]-T[1]*w.k;return F===w.x&&V===w.y?w:new Nt(w.k,F,V)}function v(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function M(w,N,T,F){w.on(\"start.zoom\",function(){O(this,arguments).event(F).start()}).on(\"interrupt.zoom end.zoom\",function(){O(this,arguments).event(F).end()}).tween(\"zoom\",function(){var V=this,K=arguments,W=O(V,K).event(F),U=e.apply(V,K),H=T==null?v(U):typeof T==\"function\"?T.apply(V,K):T,oe=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),ie=V.__zoom,pe=typeof N==\"function\"?N.apply(V,K):N,Se=a(ie.invert(H).concat(oe/ie.k),pe.invert(H).concat(oe/pe.k));return function(L){if(L===1)L=pe;else{var ve=Se(L),Oe=oe/ve[2];L=new Nt(Oe,H[0]-ve[0]*Oe,H[1]-ve[1]*Oe)}W.zoom(null,L)}})}function O(w,N,T){return!T&&w.__zooming||new k(w,N)}function k(w,N){this.that=w,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,N),this.taps=0}k.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(\"start\")),this},zoom:function(w,N){return this.mouse&&w!==\"mouse\"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&w!==\"touch\"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&w!==\"touch\"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit(\"zoom\"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(\"end\")),this},emit:function(w){var N=ht(this.that).datum();u.call(w,this.that,new rg(w,{sourceEvent:this.sourceEvent,target:m,type:w,transform:this.that.__zoom,dispatch:u}),N)}};function E(w,...N){if(!t.apply(this,arguments))return;var T=O(this,N).event(w),F=this.__zoom,V=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,i.apply(this,arguments)))),K=pt(w);if(T.wheel)(T.mouse[0][0]!==K[0]||T.mouse[0][1]!==K[1])&&(T.mouse[1]=F.invert(T.mouse[0]=K)),clearTimeout(T.wheel);else{if(F.k===V)return;T.mouse=[K,F.invert(K)],Oi(this),T.start()}Fn(w),T.wheel=setTimeout(W,g),T.zoom(\"mouse\",n(b(_(F,V),T.mouse[0],T.mouse[1]),T.extent,s));function W(){T.wheel=null,T.end()}}function C(w,...N){if(d||!t.apply(this,arguments))return;var T=w.currentTarget,F=O(this,N,!0).event(w),V=ht(w.view).on(\"mousemove.zoom\",H,!0).on(\"mouseup.zoom\",oe,!0),K=pt(w,T),W=w.clientX,U=w.clientY;Jl(w.view),Sr(w),F.mouse=[K,this.__zoom.invert(K)],Oi(this),F.start();function H(ie){if(Fn(ie),!F.moved){var pe=ie.clientX-W,Se=ie.clientY-U;F.moved=pe*pe+Se*Se>y}F.event(ie).zoom(\"mouse\",n(b(F.that.__zoom,F.mouse[0]=pt(ie,T),F.mouse[1]),F.extent,s))}function oe(ie){V.on(\"mousemove.zoom mouseup.zoom\",null),Ul(ie.view,F.moved),Fn(ie),F.event(ie).end()}}function D(w,...N){if(t.apply(this,arguments)){var T=this.__zoom,F=pt(w.changedTouches?w.changedTouches[0]:w,this),V=T.invert(F),K=T.k*(w.shiftKey?.5:2),W=n(b(_(T,K),F,V),e.apply(this,N),s);Fn(w),l>0?ht(this).transition().duration(l).call(M,W,F,w):ht(this).call(m.transform,W,F,w)}}function z(w,...N){if(t.apply(this,arguments)){var T=w.touches,F=T.length,V=O(this,N,w.changedTouches.length===F).event(w),K,W,U,H;for(Sr(w),W=0;W<F;++W)U=T[W],H=pt(U,this),H=[H,this.__zoom.invert(H),U.identifier],V.touch0?!V.touch1&&V.touch0[2]!==H[2]&&(V.touch1=H,V.taps=0):(V.touch0=H,K=!0,V.taps=1+!!f);f&&(f=clearTimeout(f)),K&&(V.taps<2&&(c=H[0],f=setTimeout(function(){f=null},h)),Oi(this),V.start())}}function X(w,...N){if(this.__zooming){var T=O(this,N).event(w),F=w.changedTouches,V=F.length,K,W,U,H;for(Fn(w),K=0;K<V;++K)W=F[K],U=pt(W,this),T.touch0&&T.touch0[2]===W.identifier?T.touch0[0]=U:T.touch1&&T.touch1[2]===W.identifier&&(T.touch1[0]=U);if(W=T.that.__zoom,T.touch1){var oe=T.touch0[0],ie=T.touch0[1],pe=T.touch1[0],Se=T.touch1[1],L=(L=pe[0]-oe[0])*L+(L=pe[1]-oe[1])*L,ve=(ve=Se[0]-ie[0])*ve+(ve=Se[1]-ie[1])*ve;W=_(W,Math.sqrt(L/ve)),U=[(oe[0]+pe[0])/2,(oe[1]+pe[1])/2],H=[(ie[0]+Se[0])/2,(ie[1]+Se[1])/2]}else if(T.touch0)U=T.touch0[0],H=T.touch0[1];else return;T.zoom(\"touch\",n(b(W,U,H),T.extent,s))}}function A(w,...N){if(this.__zooming){var T=O(this,N).event(w),F=w.changedTouches,V=F.length,K,W;for(Sr(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),K=0;K<V;++K)W=F[K],T.touch0&&T.touch0[2]===W.identifier?delete T.touch0:T.touch1&&T.touch1[2]===W.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(W=pt(W,this),Math.hypot(c[0]-W[0],c[1]-W[1])<p)){var U=ht(this).on(\"dblclick.zoom\");U&&U.apply(this,arguments)}}}return m.wheelDelta=function(w){return arguments.length?(i=typeof w==\"function\"?w:hi(+w),m):i},m.filter=function(w){return arguments.length?(t=typeof w==\"function\"?w:hi(!!w),m):t},m.touchable=function(w){return arguments.length?(r=typeof w==\"function\"?w:hi(!!w),m):r},m.extent=function(w){return arguments.length?(e=typeof w==\"function\"?w:hi([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),m):e},m.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],m):[o[0],o[1]]},m.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(w){return arguments.length?(n=w,m):n},m.duration=function(w){return arguments.length?(l=+w,m):l},m.interpolate=function(w){return arguments.length?(a=w,m):a},m.on=function(){var w=u.on.apply(u,arguments);return w===u?m:w},m.clickDistance=function(w){return arguments.length?(y=(w=+w)*w,m):Math.sqrt(y)},m.tapDistance=function(w){return arguments.length?(p=+w,m):p},m}const ii={error001:()=>\"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001\",error002:()=>\"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",error003:t=>`Node type \"${t}\" not found. Using fallback type \"default\".`,error004:()=>\"The React Flow parent container needs a width and a height to render the graph.\",error005:()=>\"Only child nodes can use a parent extent.\",error006:()=>\"Can't create edge. An edge needs a source and a target.\",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type \"${t}\" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: \"${n&&i}\", edge id: ${e}.`,error010:()=>\"Handle: No node id found. Make sure to only use a Handle inside a custom Node.\",error011:t=>`Edge type \"${t}\" not found. Using fallback type \"default\".`,error012:t=>`Node with id \"${t}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,error013:(t=\"react\")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},Zo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Yt;(function(t){t.Strict=\"strict\",t.Loose=\"loose\"})(Yt||(Yt={}));var Et;(function(t){t.Free=\"free\",t.Vertical=\"vertical\",t.Horizontal=\"horizontal\"})(Et||(Et={}));var Wi;(function(t){t.Partial=\"partial\",t.Full=\"full\"})(Wi||(Wi={}));var En;(function(t){t.Bezier=\"default\",t.Straight=\"straight\",t.Step=\"step\",t.SmoothStep=\"smoothstep\",t.SimpleBezier=\"simplebezier\"})(En||(En={}));var Xi;(function(t){t.Arrow=\"arrow\",t.ArrowClosed=\"arrowclosed\"})(Xi||(Xi={}));var ye;(function(t){t.Left=\"left\",t.Top=\"top\",t.Right=\"right\",t.Bottom=\"bottom\"})(ye||(ye={}));function fg(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Qo(t,e,n){if(!n)return;const i=[];t.forEach((r,o)=>{e!=null&&e.has(o)||i.push(r)}),i.length&&n(i)}const cg=t=>\"id\"in t&&\"source\"in t&&\"target\"in t,Nn=(t,e=[0,0])=>{const{width:n,height:i}=ri(t),r=\"internals\"in t?t.internals.positionAbsolute:t.position,o=t.origin||e,s=n*o[0],l=i*o[1];return{position:{x:t.position.x-s,y:t.position.y-l},positionAbsolute:{x:r.x-s,y:r.y-l}}},ua=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const o=Yi(r,e.nodeOrigin);return cr(i,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dr(n)},lo=(t,e={nodeOrigin:[0,0]})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter==null||e.filter(i)){const r=Yi(i,e.nodeOrigin);n=cr(n,r)}}),dr(n)},fa=(t,e,[n,i,r]=[0,0,1],o=!1,s=!1,l=[0,0])=>{const a={...fo(e,[n,i,r]),width:e.width/r,height:e.height/r},u=[];for(const[,f]of t){const{measured:c,selectable:d=!0,hidden:h=!1}=f,g=c.width??f.width??f.initialWidth??null,y=c.height??f.height??f.initialHeight??null;if(s&&!d||h)continue;const p=ha(a,ao(f,l)),m=g===null||y===null,_=o&&p>0,b=(g??0)*(y??0);(m||_||p>=b||f.dragging)&&u.push(f)}return u},Kr=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function dg({nodeLookup:t,width:e,height:n,panZoom:i,minZoom:r,maxZoom:o,nodeOrigin:s=[0,0]},l){const a=[],u=l!=null&&l.nodes?new Set(l.nodes.map(f=>f.id)):null;if(t.forEach(f=>{f.measured.width&&f.measured.height&&((l==null?void 0:l.includeHiddenNodes)||!f.hidden)&&(!u||u.has(f.id))&&a.push(f)}),a.length>0){const f=ua(a,{nodeOrigin:s}),c=ga(f,e,n,(l==null?void 0:l.minZoom)??r,(l==null?void 0:l.maxZoom)??o,(l==null?void 0:l.padding)??.1);return i.setViewport(c,{duration:l==null?void 0:l.duration}),!0}return!1}function hg(t,e){var n,i;return!e||e===\"parent\"?e:[e[0],[e[1][0]-(((n=t.measured)==null?void 0:n.width)??0),e[1][1]-(((i=t.measured)==null?void 0:i.height)??0)]]}function gg({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=l?Nn(l,l.origin||i).positionAbsolute:{x:0,y:0};let f=hg(s,s.extent||r);if(s.extent===\"parent\"&&!s.expandParent)if(!l)o==null||o(\"005\",ii.error005());else{const d=s.measured.width,h=s.measured.height,g=l.measured.width,y=l.measured.height;if(d&&h&&g&&y){const p=s.origin||i,m=a+d*p[0],_=u+h*p[1];f=[[m,_],[m+g-d,_+y-h]]}}else l&&$o(s.extent)&&(f=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const c=$o(f)?yg(e,f):e;return{position:{x:c.x-a,y:c.y-u},positionAbsolute:c}}async function mg({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(t.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=o.has(d.id),g=!h&&d.parentId&&s.find(y=>y.id===d.parentId);(h||g)&&s.push(d)}const l=new Set(e.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),f=Kr(s,a);for(const d of a)l.has(d.id)&&!f.find(g=>g.id===d.id)&&f.push(d);if(!r)return{edges:f,nodes:s};const c=await r({nodes:s,edges:f});return typeof c==\"boolean\"?c?{edges:f,nodes:s}:{edges:[],nodes:[]}:c}const An=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),yg=(t={x:0,y:0},e)=>({x:An(t.x,e[0][0],e[1][0]),y:An(t.y,e[0][1],e[1][1])}),xo=(t,e,n)=>t<e?An(Math.abs(t-e),1,50)/50:t>n?-An(Math.abs(t-n),1,50)/50:0,ca=(t,e)=>{const n=xo(t.x,35,e.width-35)*20,i=xo(t.y,35,e.height-35)*20;return[n,i]},cr=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Jr=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),dr=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),ao=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=Nn(t,e).positionAbsolute;return{x:n,y:i,width:((r=t.measured)==null?void 0:r.width)??t.width??0,height:((o=t.measured)==null?void 0:o.height)??t.height??0}},Yi=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=Nn(t,e).positionAbsolute;return{x:n,y:i,x2:n+(((r=t.measured)==null?void 0:r.width)??t.width??0),y2:i+(((o=t.measured)==null?void 0:o.height)??t.height??0)}},da=(t,e)=>dr(cr(Jr(t),Jr(e))),ha=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},pn=t=>!isNaN(t)&&isFinite(t),pg=(t,e)=>{},bg=({x:t,y:e,width:n,height:i,origin:r=[0,0]})=>!n||!i||r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-i*r[1]},uo=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),fo=({x:t,y:e},[n,i,r],o=!1,s=[1,1])=>{const l={x:(t-n)/r,y:(e-i)/r};return o?uo(l,s):l},wg=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i}),ga=(t,e,n,i,r,o)=>{const s=e/(t.width*(1+o)),l=n/(t.height*(1+o)),a=Math.min(s,l),u=An(a,i,r),f=t.x+t.width/2,c=t.y+t.height/2,d=e/2-f*u,h=n/2-c*u;return{x:d,y:h,zoom:u}},Ki=()=>{var t;return typeof navigator<\"u\"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf(\"Mac\"))>=0};function $o(t){return t!==void 0&&t!==\"parent\"}function ri(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function Ji(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Er(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:r,y:o}=Dt(t),s=fo({x:r,y:o},i),{x:l,y:a}=n?uo(s,e):s;return{xSnapped:l,ySnapped:a,...s}}const ma=t=>({width:t.offsetWidth,height:t.offsetHeight}),_g=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},vg=[\"INPUT\",\"SELECT\",\"TEXTAREA\"];function kg(t){var i,r;const e=((r=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:r[0])||t.target;return vg.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute(\"contenteditable\"))||!!(e!=null&&e.closest(\".nokey\"))}const ya=t=>\"clientX\"in t,Dt=(t,e)=>{var o,s;const n=ya(t),i=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,r=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},es=(t,e,n,i,r=[0,0])=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const s=Array.from(o),l={x:n.left+n.width*r[0],y:n.top+n.height*r[1]};return s.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute(\"data-handleid\"),position:a.getAttribute(\"data-handlepos\"),x:(u.left-l.x)/i,y:(u.top-l.y)/i,...ma(a)}})};function Sg({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:l}){const a=t*.125+r*.375+s*.375+n*.125,u=e*.125+o*.375+l*.375+i*.125,f=Math.abs(a-t),c=Math.abs(u-e);return[a,u,f,c]}function gi(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ts({pos:t,x1:e,y1:n,x2:i,y2:r,c:o}){switch(t){case ye.Left:return[e-gi(e-i,o),n];case ye.Right:return[e+gi(i-e,o),n];case ye.Top:return[e,n-gi(n-r,o)];case ye.Bottom:return[e,n+gi(r-n,o)]}}function pa({sourceX:t,sourceY:e,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:o=ye.Top,curvature:s=.25}){const[l,a]=ts({pos:n,x1:t,y1:e,x2:i,y2:r,c:s}),[u,f]=ts({pos:o,x1:i,y1:r,x2:t,y2:e,c:s}),[c,d,h,g]=Sg({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${l},${a} ${u},${f} ${i},${r}`,c,d,h,g]}function ba({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,o=n<t?n+r:n-r,s=Math.abs(i-e)/2,l=i<e?i+s:i-s;return[o,l,r,s]}function Eg({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(o?s:0)}function Cg({sourceNode:t,targetNode:e,width:n,height:i,transform:r}){const o=cr(Yi(t),Yi(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return ha(s,dr(o))>0}const Og=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||\"\"}-${n}${i||\"\"}`,Ig=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Tg=(t,e)=>{if(!t.source||!t.target)return e;let n;return cg(t)?n={...t}:n={...t,id:Og(t)},Ig(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function wa({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,o,s,l]=ba({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,o,s,l]}const ns={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},Mg=({source:t,sourcePosition:e=ye.Bottom,target:n})=>e===ye.Left||e===ye.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},is=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Ag({source:t,sourcePosition:e=ye.Bottom,target:n,targetPosition:i=ye.Top,center:r,offset:o}){const s=ns[e],l=ns[i],a={x:t.x+s.x*o,y:t.y+s.y*o},u={x:n.x+l.x*o,y:n.y+l.y*o},f=Mg({source:a,sourcePosition:e,target:u}),c=f.x!==0?\"x\":\"y\",d=f[c];let h=[],g,y;const p={x:0,y:0},m={x:0,y:0},[_,b,v,M]=ba({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[c]*l[c]===-1){g=r.x??_,y=r.y??b;const k=[{x:g,y:a.y},{x:g,y:u.y}],E=[{x:a.x,y},{x:u.x,y}];s[c]===d?h=c===\"x\"?k:E:h=c===\"x\"?E:k}else{const k=[{x:a.x,y:u.y}],E=[{x:u.x,y:a.y}];if(c===\"x\"?h=s.x===d?E:k:h=s.y===d?k:E,e===i){const A=Math.abs(t[c]-n[c]);if(A<=o){const w=Math.min(o-1,o-A);s[c]===d?p[c]=(a[c]>t[c]?-1:1)*w:m[c]=(u[c]>n[c]?-1:1)*w}}if(e!==i){const A=c===\"x\"?\"y\":\"x\",w=s[c]===l[A],N=a[A]>u[A],T=a[A]<u[A];(s[c]===1&&(!w&&N||w&&T)||s[c]!==1&&(!w&&T||w&&N))&&(h=c===\"x\"?k:E)}const C={x:a.x+p.x,y:a.y+p.y},D={x:u.x+m.x,y:u.y+m.y},z=Math.max(Math.abs(C.x-h[0].x),Math.abs(D.x-h[0].x)),X=Math.max(Math.abs(C.y-h[0].y),Math.abs(D.y-h[0].y));z>=X?(g=(C.x+D.x)/2,y=h[0].y):(g=h[0].x,y=(C.y+D.y)/2)}return[[t,{x:a.x+p.x,y:a.y+p.y},...h,{x:u.x+m.x,y:u.y+m.y},n],g,y,v,M]}function Pg(t,e,n,i){const r=Math.min(is(t,e)/2,is(e,n)/2,i),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${o+r*u},${s}Q ${o},${s} ${o},${s+r*f}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${o},${s+r*a}Q ${o},${s} ${o+r*l},${s}`}function Ui({sourceX:t,sourceY:e,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:o=ye.Top,borderRadius:s=5,centerX:l,centerY:a,offset:u=20}){const[f,c,d,h,g]=Ag({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:l,y:a},offset:u});return[f.reduce((p,m,_)=>{let b=\"\";return _>0&&_<f.length-1?b=Pg(f[_-1],m,f[_+1],s):b=`${_===0?\"M\":\"L\"}${m.x} ${m.y}`,p+=b,p},\"\"),c,d,h,g]}function rs(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Ng(t){var h;const{sourceNode:e,targetNode:n}=t;if(!rs(e)||!rs(n))return null;const i=e.internals.handleBounds||os(e.handles),r=n.internals.handleBounds||os(n.handles),o=ls((i==null?void 0:i.source)??[],t.sourceHandle),s=ls(t.connectionMode===Yt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),t.targetHandle),l=(o==null?void 0:o.position)||ye.Bottom,a=(s==null?void 0:s.position)||ye.Top;if(!o||!s)return(h=t.onError)==null||h.call(t,\"008\",ii.error008(o?\"target\":\"source\",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const[u,f]=ss(l,e,o),[c,d]=ss(a,n,s);return{sourceX:u,sourceY:f,targetX:c,targetY:d,sourcePosition:l,targetPosition:a}}function os(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type===\"source\"?e.push(i):i.type===\"target\"&&n.push(i);return{source:e,target:n}}function ss(t,e,n=null){const i=((n==null?void 0:n.x)??0)+e.internals.positionAbsolute.x,r=((n==null?void 0:n.y)??0)+e.internals.positionAbsolute.y,{width:o,height:s}=n??ri(e);switch(t){case ye.Top:return[i+o/2,r];case ye.Right:return[i+o,r+s/2];case ye.Bottom:return[i+o/2,r+s];case ye.Left:return[i,r+s/2]}}function ls(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Ur(t,e){return t?typeof t==\"string\"?t:`${e?`${e}__`:\"\"}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join(\"&\")}`:\"\"}function Dg(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return t.reduce((s,l)=>([l.markerStart||i,l.markerEnd||r].forEach(a=>{if(a&&typeof a==\"object\"){const u=Ur(a,e);o.has(u)||(s.push({id:u,color:a.color||n,...a}),o.add(u))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}function Fg(t,e={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const n=e!=null&&e.elevateNodesOnSelect?1e3:0;for(const[,i]of t){const r=i.parentId;if(!r)continue;if(!t.has(r))throw new Error(`Parent node ${r} not found`);const o=t.get(r),{x:s,y:l,z:a}=va(i,t,{...i.position,z:(pn(i.zIndex)?i.zIndex:0)+(i.selected?n:0)},(o==null?void 0:o.origin)??e.nodeOrigin),u=i.internals.positionAbsolute,f=s!==u.x||l!==u.y;(f||a!==i.internals.z)&&(i.internals={...i.internals,positionAbsolute:f?{x:s,y:l}:u,z:a})}}function _a(t,e,n,i={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{},checkEquality:!0}){const r=new Map(e);e.clear(),n.clear();const o=i!=null&&i.elevateNodesOnSelect?1e3:0;t.forEach(s=>{var a,u;let l=r.get(s.id);if(i.checkEquality&&s===(l==null?void 0:l.internals.userNode)||(l={...i.defaults,...s,measured:{width:(a=s.measured)==null?void 0:a.width,height:(u=s.measured)==null?void 0:u.height},internals:{positionAbsolute:s.position,handleBounds:l==null?void 0:l.internals.handleBounds,z:(pn(s.zIndex)?s.zIndex:0)+(s.selected?o:0),userNode:s}}),e.set(s.id,l),s.parentId){const f=n.get(s.parentId);f?f.push(l):n.set(s.parentId,[l])}}),n.size>0&&Fg(e,i)}function va(t,e,n,i=[0,0]){if(!t.parentId)return n;const r=e.get(t.parentId),o=Nn(r,i).position;return va(r,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(r.internals.z??0)>(n.z??0)?r.internals.z??0:n.z??0},r.origin||i)}function Rg(t,e,n,i){var s;const r=[],o=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const u=((s=o.get(l.parentId))==null?void 0:s.expandedRect)??ao(a,a.origin??i),f=da(u,l.rect);o.set(l.parentId,{expandedRect:f,parent:a})}return o.size>0&&o.forEach(({expandedRect:l,parent:a},u)=>{const{position:f}=Nn(a,a.origin),c=ri(a),d=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,h=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0;if(d>0||h>0){r.push({id:u,type:\"position\",position:{x:f.x-d,y:f.y-h}});const g=n.get(u);g==null||g.forEach(y=>{t.some(p=>p.id===y.id)||r.push({id:y.id,type:\"position\",position:{x:y.position.x+d,y:y.position.y+h}})})}(c.width<l.width||c.height<l.height)&&r.push({id:u,type:\"dimensions\",setAttributes:!0,dimensions:{width:Math.max(c.width,Math.round(l.width)),height:Math.max(c.height,Math.round(l.height))}})}),r}function zg(t,e,n,i,r){const o=i==null?void 0:i.querySelector(\".xyflow__viewport\");let s=!1;if(!o)return{changes:[],updatedInternals:s};const l=[],a=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(a.transform),f=[];if(t.forEach(c=>{const d=e.get(c.id);if(d!=null&&d.hidden)d.internals={...d.internals,handleBounds:void 0},s=!0;else if(d){const h=ma(c.nodeElement),g=d.measured.width!==h.width||d.measured.height!==h.height;if(!!(h.width&&h.height&&(g||!d.internals.handleBounds||c.force))){const p=c.nodeElement.getBoundingClientRect();d.measured=h,d.internals={...d.internals,handleBounds:{source:es(\".source\",c.nodeElement,p,u,d.origin||r),target:es(\".target\",c.nodeElement,p,u,d.origin||r)}},s=!0,g&&(l.push({id:d.id,type:\"dimensions\",dimensions:h}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:ao(d,r)}))}}}),f.length>0){const c=Rg(f,e,n,r);l.push(...c)}return{changes:l,updatedInternals:s}}function Lg({delta:t,panZoom:e,transform:n,translateExtent:i,width:r,height:o}){if(!e||!t.x&&!t.y)return!1;const s=e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,o]],i);return!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2])}function ka(t,e,n){t.clear(),e.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:l=null}=i,a=`${r}-source-${s}`,u=`${o}-target-${l}`,f=t.get(a)||new Map,c=t.get(u)||new Map,d={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:l};e.set(i.id,i),t.set(a,f.set(`${o}-${l}`,d)),t.set(u,c.set(`${r}-${s}`,d))}}function Sa(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Sa(n,e):!1}function as(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Hg(t,e,n,i){const r=new Map;for(const[o,s]of t)if((s.selected||s.id===i)&&(!s.parentId||!Sa(s,t))&&(s.draggable||e&&typeof s.draggable>\"u\")){const l=t.get(o);l&&r.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function Cr({nodeId:t,dragItems:e,nodeLookup:n}){var o,s;const i=[];for(const[l,a]of e){const u=(o=n.get(l))==null?void 0:o.internals.userNode;u&&i.push({...u,position:a.position})}if(!t)return[i[0],i];const r=n.get(t).internals.userNode;return[{...r,position:((s=e.get(t))==null?void 0:s.position)||r.position},i]}function Bg({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,l=new Map,a=!1,u={x:0,y:0},f=null,c=!1,d=null,h=!1;function g({noDragClassName:p,handleSelector:m,domNode:_,isSelectable:b,nodeId:v}){d=ht(_);function M({x:C,y:D},z){const{nodeLookup:X,nodeExtent:A,snapGrid:w,snapToGrid:N,nodeOrigin:T,onNodeDrag:F,onSelectionDrag:V,onError:K,updateNodePositions:W}=e();o={x:C,y:D};let U=!1,H={x:0,y:0,x2:0,y2:0};if(l.size>1&&A){const oe=lo(l,{nodeOrigin:T});H=Jr(oe)}for(const[oe,ie]of l){let pe={x:C-ie.distance.x,y:D-ie.distance.y};N&&(pe=uo(pe,w));let Se=[[A[0][0],A[0][1]],[A[1][0],A[1][1]]];if(l.size>1&&A&&!ie.extent){const{positionAbsolute:Oe}=ie.internals,Ee=Oe.x-H.x+A[0][0],Ne=Oe.x+ie.measured.width-H.x2+A[1][0],De=Oe.y-H.y+A[0][1],Be=Oe.y+ie.measured.height-H.y2+A[1][1];Se=[[Ee,De],[Ne,Be]]}const{position:L,positionAbsolute:ve}=gg({nodeId:oe,nextPosition:pe,nodeLookup:X,nodeExtent:Se,nodeOrigin:T,onError:K});U=U||ie.position.x!==L.x||ie.position.y!==L.y,ie.position=L,ie.internals.positionAbsolute=ve}if(U&&(W(l,!0),z&&(i||F||!v&&V))){const[oe,ie]=Cr({nodeId:v,dragItems:l,nodeLookup:X});i==null||i(z,l,oe,ie),F==null||F(z,oe,ie),v||V==null||V(z,ie)}}function O(){if(!f)return;const[C,D]=ca(u,f);if(C!==0||D!==0){const{transform:z,panBy:X}=e();o.x=(o.x??0)-C/z[2],o.y=(o.y??0)-D/z[2],X({x:C,y:D})&&M(o,null)}s=requestAnimationFrame(O)}function k(C){var U;const{nodeLookup:D,multiSelectionActive:z,nodesDraggable:X,transform:A,snapGrid:w,snapToGrid:N,selectNodesOnDrag:T,onNodeDragStart:F,onSelectionDragStart:V,unselectNodesAndEdges:K}=e();c=!0,(!T||!b)&&!z&&v&&((U=D.get(v))!=null&&U.selected||K()),b&&T&&v&&(t==null||t(v));const W=Er(C.sourceEvent,{transform:A,snapGrid:w,snapToGrid:N});if(o=W,l=Hg(D,X,W,v),l.size>0&&(n||F||!v&&V)){const[H,oe]=Cr({nodeId:v,dragItems:l,nodeLookup:D});n==null||n(C.sourceEvent,l,H,oe),F==null||F(C.sourceEvent,H,oe),v||V==null||V(C.sourceEvent,oe)}}const E=_d().on(\"start\",C=>{const{domNode:D,nodeDragThreshold:z,transform:X,snapGrid:A,snapToGrid:w}=e();h=!1,z===0&&k(C),o=Er(C.sourceEvent,{transform:X,snapGrid:A,snapToGrid:w}),f=(D==null?void 0:D.getBoundingClientRect())||null,u=Dt(C.sourceEvent,f)}).on(\"drag\",C=>{const{autoPanOnNodeDrag:D,transform:z,snapGrid:X,snapToGrid:A,nodeDragThreshold:w}=e(),N=Er(C.sourceEvent,{transform:z,snapGrid:X,snapToGrid:A});if(C.sourceEvent.type===\"touchmove\"&&C.sourceEvent.touches.length>1&&(h=!0),!h){if(!a&&D&&c&&(a=!0,O()),!c){const T=N.xSnapped-(o.x??0),F=N.ySnapped-(o.y??0);Math.sqrt(T*T+F*F)>w&&k(C)}(o.x!==N.xSnapped||o.y!==N.ySnapped)&&l&&c&&(u=Dt(C.sourceEvent,f),M(N,C.sourceEvent))}}).on(\"end\",C=>{if(!(!c||h)&&(a=!1,c=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:D,updateNodePositions:z,onNodeDragStop:X,onSelectionDragStop:A}=e();if(z(l,!1),r||X||!v&&A){const[w,N]=Cr({nodeId:v,dragItems:l,nodeLookup:D});r==null||r(C.sourceEvent,l,w,N),X==null||X(C.sourceEvent,w,N),v||A==null||A(C.sourceEvent,N)}}}).filter(C=>{const D=C.target;return!C.button&&(!p||!as(D,`.${p}`,_))&&(!m||as(D,m,_))});d.call(E)}function y(){d==null||d.on(\".drag\",null)}return{update:g,destroy:y}}function us(t,e,n,i){return(e[n]||[]).reduce((r,o)=>(`${t.id}-${o.id}-${n}`!==i&&r.push({id:o.id||null,type:n,nodeId:t.id,x:t.internals.positionAbsolute.x+o.x+o.width/2,y:t.internals.positionAbsolute.y+o.y+o.height/2}),r),[])}function Vg(t,e,n){let i=[],r=1/0;for(const o of n){const s=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));s<=e&&(s<r?i=[o]:s===r&&i.push(o),r=s)}return i.length?i.length===1?i[0]:i.find(o=>o.type===\"target\")||i[0]:null}function qg({nodeLookup:t,nodeId:e,handleId:n,handleType:i}){const r=[];for(const[,o]of t)if(o.internals.handleBounds){const s=`${e}-${n}-${i}`,l=us(o,o.internals.handleBounds,\"source\",s),a=us(o,o.internals.handleBounds,\"target\",s);r.push(...l,...a)}return r}function Ea(t,e){return t||(e!=null&&e.classList.contains(\"target\")?\"target\":e!=null&&e.classList.contains(\"source\")?\"source\":null)}function Wg(t,e){let n=null;return e?n=\"valid\":t&&!e&&(n=\"invalid\"),n}const Ca=()=>!0;let mi=null;function Xg(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:c,panBy:d,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:p,isValidConnection:m=Ca,onEdgeUpdateEnd:_,updateConnection:b,getTransform:v,getConnectionStartHandle:M}){const O=_g(t.target);let k=0,E;const{x:C,y:D}=Dt(t),z=O==null?void 0:O.elementFromPoint(C,D),X=Ea(o,z),A=l==null?void 0:l.getBoundingClientRect();if(!A||!X)return;let w=Dt(t,A),N=!1,T=null,F=!1,V=null;const K=qg({nodeLookup:a,nodeId:r,handleId:i,handleType:X});function W(){if(!f||!A)return;const[oe,ie]=ca(w,A);d({x:oe,y:ie}),k=requestAnimationFrame(W)}mi={nodeId:r,handleId:i,type:X},b({connectionPosition:w,connectionStatus:null,connectionStartHandle:mi,connectionEndHandle:null}),g==null||g(t,{nodeId:r,handleId:i,handleType:X});function U(oe){M()||H(oe);const ie=v();w=Dt(oe,A),E=Vg(fo(w,ie,!1,[1,1]),n,K),N||(W(),N=!0);const pe=Oa(oe,{handle:E,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:s?\"target\":\"source\",isValidConnection:m,doc:O,lib:u,flowId:c});V=pe.handleDomNode,T=pe.connection,F=pe.isValid,b({connectionStartHandle:mi,connectionPosition:E&&F?wg({x:E.x,y:E.y},ie):w,connectionStatus:Wg(!!E,F),connectionEndHandle:pe.endHandle})}function H(oe){(E||V)&&T&&F&&(y==null||y(T)),p==null||p(oe),o&&(_==null||_(oe)),h(),cancelAnimationFrame(k),N=!1,F=!1,T=null,V=null,mi=null,O.removeEventListener(\"mousemove\",U),O.removeEventListener(\"mouseup\",H),O.removeEventListener(\"touchmove\",U),O.removeEventListener(\"touchend\",H)}O.addEventListener(\"mousemove\",U),O.addEventListener(\"mouseup\",H),O.addEventListener(\"touchmove\",U),O.addEventListener(\"touchend\",H)}function Oa(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:l,flowId:a,isValidConnection:u=Ca}){const f=o===\"target\",c=e?s.querySelector(`.${l}-flow__handle[data-id=\"${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}\"]`):null,{x:d,y:h}=Dt(t),g=s.elementFromPoint(d,h),y=g!=null&&g.classList.contains(`${l}-flow__handle`)?g:c,p={handleDomNode:y,isValid:!1,connection:null,endHandle:null};if(y){const m=Ea(void 0,y),_=y.getAttribute(\"data-nodeid\"),b=y.getAttribute(\"data-handleid\"),v=y.classList.contains(\"connectable\"),M=y.classList.contains(\"connectableend\");if(!_)return p;const O={source:f?_:i,sourceHandle:f?b:r,target:f?i:_,targetHandle:f?r:b};p.connection=O,v&&M&&(n===Yt.Strict?f&&m===\"source\"||!f&&m===\"target\":_!==i||b!==r)&&(p.endHandle={nodeId:_,handleId:b,type:m},p.isValid=u(O))}return p}const Yg={onPointerDown:Xg,isValid:Oa};function Kg({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const r=ht(t);function o({translateExtent:l,width:a,height:u,zoomStep:f=10,pannable:c=!0,zoomable:d=!0,inversePan:h=!1}){const g=b=>{const v=n();if(b.sourceEvent.type!==\"wheel\"||!e)return;const M=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*f,O=v[2]*Math.pow(2,M);e.scaleTo(O)};let y=[0,0];const p=b=>{(b.sourceEvent.type===\"mousedown\"||b.sourceEvent.type===\"touchstart\")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},m=b=>{const v=n();if(b.sourceEvent.type!==\"mousemove\"&&b.sourceEvent.type!==\"touchmove\"||!e)return;const M=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],O=[M[0]-y[0],M[1]-y[1]];y=M;const k=i()*Math.max(v[2],Math.log(v[2]))*(h?-1:1),E={x:v[0]-O[0]*k,y:v[1]-O[1]*k},C=[[0,0],[a,u]];e.setViewportConstrained({x:E.x,y:E.y,zoom:v[2]},C,l)},_=aa().on(\"start\",p).on(\"zoom\",c?m:null).on(\"zoom.wheel\",d?g:null);r.call(_,{})}function s(){r.on(\"zoom\",null)}return{update:o,destroy:s,pointer:pt}}const Jg=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,hr=t=>({x:t.x,y:t.y,zoom:t.k}),Or=({x:t,y:e,zoom:n})=>fr.translate(t,e).scale(n),bn=(t,e)=>t.target.closest(`.${e}`),Ia=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Ir=(t,e=0)=>typeof e==\"number\"&&e>0?t.transition().duration(e):t,Ta=t=>{const e=t.ctrlKey&&Ki()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Ug({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(bn(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const c=n.property(\"__zoom\").k||1;if(f.ctrlKey&&s){const p=pt(f),m=Ta(f),_=c*Math.pow(2,m);i.scaleTo(n,_,p,f);return}const d=f.deltaMode===1?20:1;let h=r===Et.Vertical?0:f.deltaX*d,g=r===Et.Horizontal?0:f.deltaY*d;!Ki()&&f.shiftKey&&r!==Et.Vertical&&(h=f.deltaY*d,g=0),i.translateBy(n,-(h/c)*o,-(g/c)*o,{internal:!0});const y=hr(n.property(\"__zoom\"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l==null||l(f,y)),t.isPanScrolling&&(a==null||a(f,y),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,y),t.isPanScrolling=!1},150))}}function jg({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,r){if(!e&&i.type===\"wheel\"&&!i.ctrlKey||bn(i,t))return null;i.preventDefault(),n.call(this,i,r)}}function Gg({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var o,s,l;if((o=i.sourceEvent)!=null&&o.internal)return;const r=hr(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)===\"mousedown\"&&e(!0),n&&(n==null||n(i.sourceEvent,r))}}function Zg({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,l;t.usedRightMouseButton=!!(n&&Ia(e,t.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((l=o.sourceEvent)!=null&&l.internal)&&(r==null||r(o.sourceEvent,hr(o.transform)))}}function Qg({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,o&&Ia(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),r&&Jg(t.prevViewport,s.transform))){const a=hr(s.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,a)},n?150:0)}}}function xg({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:l,noPanClassName:a,lib:u}){return f=>{var g;const c=t||e,d=n&&f.ctrlKey;if(f.button===1&&f.type===\"mousedown\"&&(bn(f,`${u}-flow__node`)||bn(f,`${u}-flow__edge`)))return!0;if(!i&&!c&&!r&&!o&&!n||s||bn(f,l)&&f.type===\"wheel\"||bn(f,a)&&(f.type!==\"wheel\"||r&&f.type===\"wheel\"&&!t)||!n&&f.ctrlKey&&f.type===\"wheel\")return!1;if(!n&&f.type===\"touchstart\"&&((g=f.touches)==null?void 0:g.length)>1)return f.preventDefault(),!1;if(!c&&!r&&!d&&f.type===\"wheel\"||!i&&(f.type===\"mousedown\"||f.type===\"touchstart\")||Array.isArray(i)&&!i.includes(f.button)&&f.type===\"mousedown\")return!1;const h=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type===\"wheel\")&&h}}function $g({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:r,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:l,onTransformChange:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=t.getBoundingClientRect(),d=aa().scaleExtent([e,n]).translateExtent(i),h=ht(t).call(d);b({x:r.x,y:r.y,zoom:An(r.zoom,e,n)},[[0,0],[c.width,c.height]],i);const g=h.on(\"wheel.zoom\"),y=h.on(\"dblclick.zoom\");d.wheelDelta(Ta);function p(z,X){h&&(d==null||d.transform(Ir(h,X==null?void 0:X.duration),z))}function m({noWheelClassName:z,noPanClassName:X,onPaneContextMenu:A,userSelectionActive:w,panOnScroll:N,panOnDrag:T,panOnScrollMode:F,panOnScrollSpeed:V,preventScrolling:K,zoomOnPinch:W,zoomOnScroll:U,zoomOnDoubleClick:H,zoomActivationKeyPressed:oe,lib:ie}){w&&!f.isZoomingOrPanning&&_();const Se=N&&!oe&&!w?Ug({zoomPanValues:f,noWheelClassName:z,d3Selection:h,d3Zoom:d,panOnScrollMode:F,panOnScrollSpeed:V,zoomOnPinch:W,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:l}):jg({noWheelClassName:z,preventScrolling:K,d3ZoomHandler:g});if(h.on(\"wheel.zoom\",Se,{passive:!1}),!w){const ve=Gg({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:s});d.on(\"start\",ve);const Oe=Zg({zoomPanValues:f,panOnDrag:T,onPaneContextMenu:!!A,onPanZoom:o,onTransformChange:a});d.on(\"zoom\",Oe);const Ee=Qg({zoomPanValues:f,panOnDrag:T,panOnScroll:N,onPaneContextMenu:A,onPanZoomEnd:l,onDraggingChange:u});d.on(\"end\",Ee)}const L=xg({zoomActivationKeyPressed:oe,panOnDrag:T,zoomOnScroll:U,panOnScroll:N,zoomOnDoubleClick:H,zoomOnPinch:W,userSelectionActive:w,noPanClassName:X,noWheelClassName:z,lib:ie});d.filter(L),H?h.on(\"dblclick.zoom\",y):h.on(\"dblclick.zoom\",null)}function _(){d.on(\"zoom\",null)}function b(z,X,A){const w=Or(z),N=d==null?void 0:d.constrain()(w,X,A);return N&&p(N),N}function v(z,X){const A=Or(z);return p(A,X),A}function M(z){if(h){const X=Or(z),A=h.property(\"__zoom\");(A.k!==z.zoom||A.x!==z.x||A.y!==z.y)&&(d==null||d.transform(h,X,null,{sync:!0}))}}function O(){const z=h?la(h.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function k(z,X){h&&(d==null||d.scaleTo(Ir(h,X==null?void 0:X.duration),z))}function E(z,X){h&&(d==null||d.scaleBy(Ir(h,X==null?void 0:X.duration),z))}function C(z){d==null||d.scaleExtent(z)}function D(z){d==null||d.translateExtent(z)}return{update:m,destroy:_,setViewport:v,setViewportConstrained:b,getViewport:O,scaleTo:k,scaleBy:E,setScaleExtent:C,setTranslateExtent:D,syncViewport:M}}var fs;(function(t){t.Line=\"line\",t.Handle=\"handle\"})(fs||(fs={}));function em(t){let e,n,i,r,o,s;const l=t[44].default,a=rt(l,t,t[43],null);return{c(){e=ne(\"div\"),a&&a.c(),S(e,\"data-handleid\",t[7]),S(e,\"data-nodeid\",t[14]),S(e,\"data-handlepos\",t[3]),S(e,\"data-id\",n=t[13]+\"-\"+t[14]+\"-\"+(t[1]||null)+\"-\"+t[2]),S(e,\"class\",i=Ae([\"svelte-flow__handle\",`svelte-flow__handle-${t[3]}`,\"nodrag\",\"nopan\",t[3],t[5]])),S(e,\"style\",t[4]),S(e,\"role\",\"button\"),S(e,\"tabindex\",\"-1\"),he(e,\"valid\",t[8]),he(e,\"connectingto\",t[6]),he(e,\"connectingfrom\",t[10]),he(e,\"source\",!t[12]),he(e,\"target\",t[12]),he(e,\"connectablestart\",t[0]),he(e,\"connectableend\",t[0]),he(e,\"connectable\",t[0]),he(e,\"connectionindicator\",t[0]&&(!t[11]||t[9]))},m(u,f){q(u,e,f),a&&a.m(e,null),r=!0,o||(s=[be(e,\"mousedown\",t[32]),be(e,\"touchstart\",t[32])],o=!0)},p(u,f){a&&a.p&&(!r||f[1]&4096)&&st(a,l,u,u[43],r?ot(l,u[43],f,null):lt(u[43]),null),(!r||f[0]&128)&&S(e,\"data-handleid\",u[7]),(!r||f[0]&8)&&S(e,\"data-handlepos\",u[3]),(!r||f[0]&8198&&n!==(n=u[13]+\"-\"+u[14]+\"-\"+(u[1]||null)+\"-\"+u[2]))&&S(e,\"data-id\",n),(!r||f[0]&40&&i!==(i=Ae([\"svelte-flow__handle\",`svelte-flow__handle-${u[3]}`,\"nodrag\",\"nopan\",u[3],u[5]])))&&S(e,\"class\",i),(!r||f[0]&16)&&S(e,\"style\",u[4]),(!r||f[0]&296)&&he(e,\"valid\",u[8]),(!r||f[0]&104)&&he(e,\"connectingto\",u[6]),(!r||f[0]&1064)&&he(e,\"connectingfrom\",u[10]),(!r||f[0]&4136)&&he(e,\"source\",!u[12]),(!r||f[0]&4136)&&he(e,\"target\",u[12]),(!r||f[0]&41)&&he(e,\"connectablestart\",u[0]),(!r||f[0]&41)&&he(e,\"connectableend\",u[0]),(!r||f[0]&41)&&he(e,\"connectable\",u[0]),(!r||f[0]&2601)&&he(e,\"connectionindicator\",u[0]&&(!u[11]||u[9]))},i(u){r||(P(a,u),r=!0)},o(u){R(a,u),r=!1},d(u){u&&B(e),a&&a.d(u),o=!1,Ke(s)}}}function tm(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,p,m,_,b,v,M,O,k,E,C,D,{$$slots:z={},$$scope:X}=e,{id:A=void 0}=e,{type:w=\"source\"}=e,{position:N=ye.Top}=e,{style:T=void 0}=e,{isConnectable:F=void 0}=e,{isValidConnection:V=void 0}=e,{onconnect:K=void 0}=e,{ondisconnect:W=void 0}=e,{class:U=void 0}=e;const H=Fi(\"svelteflow__node_id\"),oe=Fi(\"svelteflow__node_connectable\");j(t,oe,Z=>n(42,D=Z));const ie=Ye(),{connectionMode:pe,domNode:Se,nodeLookup:L,connectionRadius:ve,viewport:Oe,isValidConnection:Ee,lib:Ne,addEdge:De,onedgecreate:Be,panBy:J,cancelConnection:Ve,updateConnection:Ie,autoPanOnConnect:It,edges:Tt,connectionLookup:Mt,onconnect:je,onconnectstart:vt,onconnectend:te,flowId:zt,connection:Lt}=ie;j(t,pe,Z=>n(39,c=Z)),j(t,Se,Z=>n(54,E=Z)),j(t,L,Z=>n(53,k=Z)),j(t,ve,Z=>n(55,C=Z)),j(t,Oe,Z=>n(45,g=Z)),j(t,Ee,Z=>n(50,b=Z)),j(t,Ne,Z=>n(52,O=Z)),j(t,Be,Z=>n(49,_=Z)),j(t,It,Z=>n(51,M=Z)),j(t,Tt,Z=>n(41,h=Z)),j(t,Mt,Z=>n(40,d=Z)),j(t,je,Z=>n(48,m=Z)),j(t,vt,Z=>n(47,p=Z)),j(t,te,Z=>n(46,y=Z)),j(t,zt,Z=>n(13,v=Z)),j(t,Lt,Z=>n(38,f=Z));function Ut(Z){const Qe=ya(Z);(Qe&&Z.button===0||!Qe)&&Yg.onPointerDown(Z,{handleId:r,nodeId:H,isTarget:i,connectionRadius:C,domNode:E,nodeLookup:k,connectionMode:c,lib:O,autoPanOnConnect:M,flowId:v,isValidConnection:V??b,updateConnection:Ie,cancelConnection:Ve,panBy:J,onConnect:et=>{const at=_?_(et):et;at&&(De(at),m==null||m(et))},onConnectStart:(et,at)=>{p==null||p(et,{nodeId:at.nodeId,handleId:at.handleId,handleType:at.handleType})},onConnectEnd:et=>{y==null||y(et)},getTransform:()=>[g.x,g.y,g.zoom],getConnectionStartHandle:()=>f.startHandle})}let Y=null,yt;return t.$$set=Z=>{\"id\"in Z&&n(1,A=Z.id),\"type\"in Z&&n(2,w=Z.type),\"position\"in Z&&n(3,N=Z.position),\"style\"in Z&&n(4,T=Z.style),\"isConnectable\"in Z&&n(0,F=Z.isConnectable),\"isValidConnection\"in Z&&n(33,V=Z.isValidConnection),\"onconnect\"in Z&&n(34,K=Z.onconnect),\"ondisconnect\"in Z&&n(35,W=Z.ondisconnect),\"class\"in Z&&n(5,U=Z.class),\"$$scope\"in Z&&n(43,X=Z.$$scope)},t.$$.update=()=>{var Z,Qe,et,at,rn,on,sn,ln,Ht;if(t.$$.dirty[0]&4&&n(12,i=w===\"target\"),t.$$.dirty[0]&1|t.$$.dirty[1]&2048&&n(0,F=F!==void 0?F:D),t.$$.dirty[0]&2&&n(7,r=A||null),t.$$.dirty[0]&6|t.$$.dirty[1]&1560&&(K||W)&&n(37,yt=d.get(`${H}-${w}-${A||null}`)),t.$$.dirty[1]&120){if(Y&&!fg(yt,Y)){const an=yt??new Map;Qo(Y,an,W),Qo(an,Y,K)}n(36,Y=yt??new Map)}t.$$.dirty[1]&128&&n(11,o=!!f.startHandle),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(10,s=((Z=f.startHandle)==null?void 0:Z.nodeId)===H&&((Qe=f.startHandle)==null?void 0:Qe.type)===w&&((et=f.startHandle)==null?void 0:et.handleId)===r),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(6,l=((at=f.endHandle)==null?void 0:at.nodeId)===H&&((rn=f.endHandle)==null?void 0:rn.type)===w&&((on=f.endHandle)==null?void 0:on.handleId)===r),t.$$.dirty[0]&132|t.$$.dirty[1]&384&&n(9,a=c===Yt.Strict?((sn=f.startHandle)==null?void 0:sn.type)!==w:H!==((ln=f.startHandle)==null?void 0:ln.nodeId)||r!==((Ht=f.startHandle)==null?void 0:Ht.handleId)),t.$$.dirty[0]&64|t.$$.dirty[1]&128&&n(8,u=l&&f.status===\"valid\")},[F,A,w,N,T,U,l,r,u,a,s,o,i,v,H,oe,pe,Se,L,ve,Oe,Ee,Ne,Be,It,Tt,Mt,je,vt,te,zt,Lt,Ut,V,K,W,Y,yt,f,c,d,h,D,X,z]}class Vt extends ue{constructor(e){super(),ae(this,e,tm,em,ce,{id:1,type:2,position:3,style:4,isConnectable:0,isValidConnection:33,onconnect:34,ondisconnect:35,class:5},null,[-1,-1])}}function nm(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+\"\",r,o,s,l;return e=new Vt({props:{type:\"target\",position:t[1]??ye.Top}}),s=new Vt({props:{type:\"source\",position:t[2]??ye.Bottom}}),{c(){ee(e.$$.fragment),n=de(),r=He(i),o=de(),ee(s.$$.fragment)},m(u,f){x(e,u,f),q(u,n,f),q(u,r,f),q(u,o,f),x(s,u,f),l=!0},p(u,[f]){var h;const c={};f&2&&(c.position=u[1]??ye.Top),e.$set(c),(!l||f&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+\"\")&&ft(r,i);const d={};f&4&&(d.position=u[2]??ye.Bottom),s.$set(d)},i(u){l||(P(e.$$.fragment,u),P(s.$$.fragment,u),l=!0)},o(u){R(e.$$.fragment,u),R(s.$$.fragment,u),l=!1},d(u){u&&(B(n),B(r),B(o)),$(e,u),$(s,u)}}}function im(t,e,n){const i=[\"data\",\"targetPosition\",\"sourcePosition\"];Re(e,i);let{data:r={label:\"Node\"}}=e,{targetPosition:o=void 0}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=_e(_e({},e),mt(l)),n(3,Re(e,i)),\"data\"in l&&n(0,r=l.data),\"targetPosition\"in l&&n(1,o=l.targetPosition),\"sourcePosition\"in l&&n(2,s=l.sourcePosition)},[r,o,s]}class Ma extends ue{constructor(e){super(),ae(this,e,im,nm,ce,{data:0,targetPosition:1,sourcePosition:2})}}function rm(t){var s;let e=((s=t[0])==null?void 0:s.label)+\"\",n,i,r,o;return r=new Vt({props:{type:\"source\",position:t[1]??ye.Bottom}}),{c(){n=He(e),i=de(),ee(r.$$.fragment)},m(l,a){q(l,n,a),q(l,i,a),x(r,l,a),o=!0},p(l,[a]){var f;(!o||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+\"\")&&ft(n,e);const u={};a&2&&(u.position=l[1]??ye.Bottom),r.$set(u)},i(l){o||(P(r.$$.fragment,l),o=!0)},o(l){R(r.$$.fragment,l),o=!1},d(l){l&&(B(n),B(i)),$(r,l)}}}function om(t,e,n){const i=[\"data\",\"sourcePosition\"];Re(e,i);let{data:r={label:\"Node\"}}=e,{sourcePosition:o=void 0}=e;return t.$$set=s=>{e=_e(_e({},e),mt(s)),n(2,Re(e,i)),\"data\"in s&&n(0,r=s.data),\"sourcePosition\"in s&&n(1,o=s.sourcePosition)},[r,o]}class sm extends ue{constructor(e){super(),ae(this,e,om,rm,ce,{data:0,sourcePosition:1})}}function lm(t){var s;let e=((s=t[0])==null?void 0:s.label)+\"\",n,i,r,o;return r=new Vt({props:{type:\"target\",position:t[1]??ye.Top}}),{c(){n=He(e),i=de(),ee(r.$$.fragment)},m(l,a){q(l,n,a),q(l,i,a),x(r,l,a),o=!0},p(l,[a]){var f;(!o||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+\"\")&&ft(n,e);const u={};a&2&&(u.position=l[1]??ye.Top),r.$set(u)},i(l){o||(P(r.$$.fragment,l),o=!0)},o(l){R(r.$$.fragment,l),o=!1},d(l){l&&(B(n),B(i)),$(r,l)}}}function am(t,e,n){const i=[\"data\",\"targetPosition\"];Re(e,i);let{data:r={label:\"Node\"}}=e,{targetPosition:o=void 0}=e;return t.$$set=s=>{e=_e(_e({},e),mt(s)),n(2,Re(e,i)),\"data\"in s&&n(0,r=s.data),\"targetPosition\"in s&&n(1,o=s.targetPosition)},[r,o]}class um extends ue{constructor(e){super(),ae(this,e,am,lm,ce,{data:0,targetPosition:1})}}function fm(t,e,n){const i=[];return Re(e,i),t.$$set=r=>{e=_e(_e({},e),mt(r)),n(0,Re(e,i))},[]}class cm extends ue{constructor(e){super(),ae(this,e,fm,null,ce,{})}}function cs(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function dm(t,{target:e,domNode:n}){return cs(t,n,e),{async update({target:i,domNode:r}){cs(t,r,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function hm(t){let e,n,i,r,o;const s=t[3].default,l=rt(s,t,t[2],null);return{c(){e=ne(\"div\"),l&&l.c()},m(a,u){q(a,e,u),l&&l.m(e,null),i=!0,r||(o=Ue(n=dm.call(null,e,{target:\".svelte-flow__edgelabel-renderer\",domNode:t[0]})),r=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&st(l,s,a,a[2],i?ot(s,a[2],u,null):lt(a[2]),null),n&&Fe(n.update)&&u&1&&n.update.call(null,{target:\".svelte-flow__edgelabel-renderer\",domNode:a[0]})},i(a){i||(P(l,a),i=!0)},o(a){R(l,a),i=!1},d(a){a&&B(e),l&&l.d(a),r=!1,o()}}}function gm(t,e,n){let i,{$$slots:r={},$$scope:o}=e;const{domNode:s}=Ye();return j(t,s,l=>n(0,i=l)),t.$$set=l=>{\"$$scope\"in l&&n(2,o=l.$$scope)},[i,s,o,r]}class mm extends ue{constructor(e){super(),ae(this,e,gm,hm,ce,{})}}function Aa(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=Ye();return l=>{const a=Q(t).get(l);if(!a){console.warn(\"012\",ii.error012(l));return}(a.selectable||Q(s)&&typeof a.selectable>\"u\")&&(e.set(null),n.set(null),a.selected?a.selected&&Q(i)&&o({nodes:[],edges:[a]}):r([l]))}}function ym(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,r,o,s;const l=t[5].default,a=rt(l,t,t[7],null);return{c(){e=ne(\"div\"),a&&a.c(),S(e,\"class\",\"svelte-flow__edge-label\"),S(e,\"style\",n=\"pointer-events: all;\"+t[0]),S(e,\"role\",\"button\"),S(e,\"tabindex\",\"-1\"),se(e,\"transform\",i)},m(u,f){q(u,e,f),a&&a.m(e,null),r=!0,o||(s=[be(e,\"keyup\",bm),be(e,\"click\",t[6])],o=!0)},p(u,f){a&&a.p&&(!r||f&128)&&st(a,l,u,u[7],r?ot(l,u[7],f,null):lt(u[7]),null),(!r||f&1&&n!==(n=\"pointer-events: all;\"+u[0]))&&S(e,\"style\",n);const c=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||c)&&se(e,\"transform\",i)},i(u){r||(P(a,u),r=!0)},o(u){R(a,u),r=!1},d(u){u&&B(e),a&&a.d(u),o=!1,Ke(s)}}}function pm(t){let e,n;return e=new mm({props:{$$slots:{default:[ym]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&135&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}const bm=()=>{};function wm(t,e,n){let{$$slots:i={},$$scope:r}=e,{style:o=void 0}=e,{x:s=void 0}=e,{y:l=void 0}=e;const a=Aa(),u=Fi(\"svelteflow__edge_id\"),f=()=>{u&&a(u)};return t.$$set=c=>{\"style\"in c&&n(0,o=c.style),\"x\"in c&&n(1,s=c.x),\"y\"in c&&n(2,l=c.y),\"$$scope\"in c&&n(7,r=c.$$scope)},[o,s,l,a,u,i,f,r]}class _m extends ue{constructor(e){super(),ae(this,e,wm,pm,ce,{style:0,x:1,y:2})}}function vm(t){let e;return{c(){e=Ce(\"path\"),S(e,\"d\",t[1]),S(e,\"stroke-opacity\",0),S(e,\"stroke-width\",t[10]),S(e,\"fill\",\"none\"),S(e,\"class\",\"svelte-flow__edge-interaction\")},m(n,i){q(n,e,i)},p(n,i){i&2&&S(e,\"d\",n[1])},d(n){n&&B(e)}}}function ds(t){let e,n;return e=new _m({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[km]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&8&&(o.x=i[3]),r&16&&(o.y=i[4]),r&32&&(o.style=i[5]),r&4100&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function km(t){let e;return{c(){e=He(t[2])},m(n,i){q(n,e,i)},p(n,i){i&4&&ft(e,n[2])},d(n){n&&B(e)}}}function Sm(t){let e,n,i,r,o,s,l=t[10]&&vm(t),a=t[2]&&ds(t);return{c(){e=Ce(\"path\"),i=de(),l&&l.c(),r=de(),a&&a.c(),o=Xe(),S(e,\"id\",t[0]),S(e,\"d\",t[1]),S(e,\"class\",n=Ae([\"svelte-flow__edge-path\",t[9]])),S(e,\"marker-start\",t[6]),S(e,\"marker-end\",t[7]),S(e,\"fill\",\"none\"),S(e,\"style\",t[8])},m(u,f){q(u,e,f),q(u,i,f),l&&l.m(u,f),q(u,r,f),a&&a.m(u,f),q(u,o,f),s=!0},p(u,[f]){(!s||f&1)&&S(e,\"id\",u[0]),(!s||f&2)&&S(e,\"d\",u[1]),(!s||f&512&&n!==(n=Ae([\"svelte-flow__edge-path\",u[9]])))&&S(e,\"class\",n),(!s||f&64)&&S(e,\"marker-start\",u[6]),(!s||f&128)&&S(e,\"marker-end\",u[7]),(!s||f&256)&&S(e,\"style\",u[8]),u[10]&&l.p(u,f),u[2]?a?(a.p(u,f),f&4&&P(a,1)):(a=ds(u),a.c(),P(a,1),a.m(o.parentNode,o)):a&&(Te(),R(a,1,1,()=>{a=null}),Me())},i(u){s||(P(a),s=!0)},o(u){R(a),s=!1},d(u){u&&(B(e),B(i),B(r),B(o)),l&&l.d(u),a&&a.d(u)}}}function Em(t,e,n){let{id:i=void 0}=e,{path:r}=e,{label:o=void 0}=e,{labelX:s=void 0}=e,{labelY:l=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:c=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,g=d===void 0?20:d;return t.$$set=y=>{\"id\"in y&&n(0,i=y.id),\"path\"in y&&n(1,r=y.path),\"label\"in y&&n(2,o=y.label),\"labelX\"in y&&n(3,s=y.labelX),\"labelY\"in y&&n(4,l=y.labelY),\"labelStyle\"in y&&n(5,a=y.labelStyle),\"markerStart\"in y&&n(6,u=y.markerStart),\"markerEnd\"in y&&n(7,f=y.markerEnd),\"style\"in y&&n(8,c=y.style),\"interactionWidth\"in y&&n(11,d=y.interactionWidth),\"class\"in y&&n(9,h=y.class)},[i,r,o,s,l,a,u,f,c,h,g,d]}class gr extends ue{constructor(e){super(),ae(this,e,Em,Sm,ce,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Cm(t){let e,n;return e=new gr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Om(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Re(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:_}=e;return t.$$set=b=>{e=_e(_e({},e),mt(b)),n(15,Re(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,_=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=pa({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:_}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,_]}class Pa extends ue{constructor(e){super(),ae(this,e,Om,Cm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Im(t){let e,n;return e=new gr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Tm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Re(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:_}=e;return t.$$set=b=>{e=_e(_e({},e),mt(b)),n(15,Re(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,_=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=Ui({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:_}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,_]}class Mm extends ue{constructor(e){super(),ae(this,e,Tm,Im,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Am(t){let e,n;return e=new gr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Pm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"targetX\",\"targetY\"];Re(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{targetX:y}=e,{targetY:p}=e;return t.$$set=m=>{e=_e(_e({},e),mt(m)),n(13,Re(e,s)),\"label\"in m&&n(0,l=m.label),\"labelStyle\"in m&&n(1,a=m.labelStyle),\"style\"in m&&n(2,u=m.style),\"markerStart\"in m&&n(3,f=m.markerStart),\"markerEnd\"in m&&n(4,c=m.markerEnd),\"interactionWidth\"in m&&n(5,d=m.interactionWidth),\"sourceX\"in m&&n(9,h=m.sourceX),\"sourceY\"in m&&n(10,g=m.sourceY),\"targetX\"in m&&n(11,y=m.targetX),\"targetY\"in m&&n(12,p=m.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,r,o]=wa({sourceX:h,sourceY:g,targetX:y,targetY:p}),i,(n(7,r),n(9,h),n(10,g),n(11,y),n(12,p)),(n(6,o),n(9,h),n(10,g),n(11,y),n(12,p)))},[l,a,u,f,c,d,o,r,i,h,g,y,p]}class Nm extends ue{constructor(e){super(),ae(this,e,Pm,Am,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Dm(t){let e,n;return e=new gr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Fm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Re(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:_}=e;return t.$$set=b=>{e=_e(_e({},e),mt(b)),n(15,Re(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,_=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=Ui({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:_,borderRadius:0}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,_)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,_]}class Rm extends ue{constructor(e){super(),ae(this,e,Fm,Dm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function zm(t,e){const n=t.set,i=e.set,r=Q(t),o=Q(e);let l=r.length===0&&o.length>0?o:r;t.set(l);const a=u=>{const f=n(u);return l=f,i(l),f};t.set=e.set=a,t.update=e.update=u=>a(u(l))}function Lm(t,e){const n=t.set,i=e.set;let r=Q(e);t.set(r);const o=s=>{n(s),i(s),r=s};t.set=e.set=o,t.update=e.update=s=>o(s(r))}const Hm=(t,e,n)=>{if(!n)return;const i=Q(t),r=e.set,o=n.set;let s=n?Q(n):{x:0,y:0,zoom:1};e.set(s),e.set=l=>(r(l),o(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),r(l),o(l),s=l,l),e.update=l=>{e.set(l(s))},n.update=l=>{n.set(l(s))}},Bm=(t,e,n)=>{const{subscribe:i,set:r,update:o}=re([]);let s=t,l={},a=!0;const u=h=>(_a(h,e,n,{elevateNodesOnSelect:a,defaults:l,checkEquality:!1}),s=h,r(s),s),f=h=>u(h(s)),c=h=>{l=h},d=h=>{a=h.elevateNodesOnSelect??a};return u(s),{subscribe:i,set:u,update:f,setDefaultOptions:c,setOptions:d}},Vm=(t,e,n,i)=>{const{subscribe:r,set:o,update:s}=re([]);let l=t,a={};const u=d=>{const h=a?d.map(g=>({...a,...g})):d;ka(e,n,h),l=h,o(l)},f=d=>u(d(l)),c=d=>{a=d};return u(l),{subscribe:r,set:u,update:f,setDefaultOptions:c}},Na={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},qm={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function Wm(t,e){return Xt([e,t.connectionLineType,t.connectionMode,t.nodeLookup,t.viewport],([n,i,r,o,s])=>{var M,O,k,E,C,D;if(!((M=n.connectionStartHandle)!=null&&M.nodeId))return Na;const l=o.get((O=n.connectionStartHandle)==null?void 0:O.nodeId),a=l==null?void 0:l.internals.handleBounds,u=(a==null?void 0:a[n.connectionStartHandle.type||\"source\"])||[],f=u||(a==null?void 0:a[((k=n==null?void 0:n.connectionStartHandle)==null?void 0:k.type)===\"source\"?\"target\":\"source\"]),c=r===Yt.Strict?u:f,d=(E=n.connectionStartHandle)!=null&&E.handleId?c==null?void 0:c.find(z=>{var X;return z.id===((X=n.connectionStartHandle)==null?void 0:X.handleId)}):c==null?void 0:c[0],h=d?d.x+d.width/2:((l==null?void 0:l.measured.width)??0)/2,g=d?d.y+d.height/2:(l==null?void 0:l.measured.height)??0,y=((l==null?void 0:l.internals.positionAbsolute.x)??0)+h,p=((l==null?void 0:l.internals.positionAbsolute.y)??0)+g,m=d==null?void 0:d.position,_=m?qm[m]:void 0,b={sourceX:y,sourceY:p,sourcePosition:m,targetX:((((C=n.connectionPosition)==null?void 0:C.x)??0)-s.x)/s.zoom,targetY:((((D=n.connectionPosition)==null?void 0:D.y)??0)-s.y)/s.zoom,targetPosition:_};let v=\"\";return i===En.Bezier?[v]=pa(b):i===En.Step?[v]=Ui({...b,borderRadius:0}):i===En.SmoothStep?[v]=Ui(b):[v]=wa(b),{path:v,...b,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const Da={input:sm,output:um,default:Ma,group:cm},Fa={straight:Nm,smoothstep:Mm,default:Pa,step:Rm},Xm=({nodes:t=[],edges:e=[],width:n,height:i,fitView:r})=>{const o=new Map,s=new Map;_a(t,o,s,{nodeOrigin:[0,0],elevateNodesOnSelect:!1,checkEquality:!1});const l=new Map,a=new Map;ka(l,a,e);let u={x:0,y:0,zoom:1};if(r&&n&&i){const f=t.filter(d=>d.width&&d.height||d.initialWidth&&d.initialHeight),c=ua(f,{nodeOrigin:[0,0]});u=ga(c,n,i,.5,2,.1)}return{flowId:re(null),nodes:Bm(t,o,s),nodeLookup:ut(o),parentLookup:ut(s),edgeLookup:ut(a),visibleNodes:ut([]),edges:Vm(e,l,a),visibleEdges:ut([]),connectionLookup:ut(l),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re([0,0]),nodeDragThreshold:re(1),nodeExtent:re(Zo),translateExtent:re(Zo),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(Wi.Partial),nodeTypes:re(Da),edgeTypes:re(Fa),viewport:re(u),connectionMode:re(Yt.Strict),domNode:re(null),connection:ut(Na),connectionLineType:re(En.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:ut([]),defaultMarkerColor:re(\"#b1b1b7\"),lib:ut(\"svelte\"),onlyRenderVisibleElements:re(!1),onerror:re(pg),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:ut(!1)}};function Ym(t){const e=Xt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,r,o,s,l])=>r&&s&&l?n.filter(u=>{const f=i.get(u.source),c=i.get(u.target);return f&&c&&Cg({sourceNode:f,targetNode:c,width:s,height:l,transform:[o.x,o.y,o.zoom]})}):n);return Xt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,r,o])=>n.reduce((l,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return l;const c=Ng({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:r,onError:o});return c&&l.push({...a,zIndex:Eg({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...c}),l},[]))}function Km(t){return Xt([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?fa(e,{x:0,y:0,width:i,height:r},s,!0):Array.from(e.values())})}const co=Symbol();function Jm({nodes:t,edges:e,width:n,height:i,fitView:r}){const o=Xm({nodes:t,edges:e,width:n,height:i,fitView:r});function s(A){o.nodeTypes.set({...Da,...A})}function l(A){o.edgeTypes.set({...Fa,...A})}function a(A){const w=Q(o.edges);o.edges.set(Tg(A,w))}const u=(A,w=!1)=>{var T;const N=Q(o.nodeLookup);for(const[F,V]of A){const K=(T=N.get(F))==null?void 0:T.internals.userNode;K&&(K.position=V.position,K.dragging=w)}o.nodes.update(F=>F)};function f(A){var F,V,K;const w=Q(o.nodeLookup),{changes:N,updatedInternals:T}=zg(A,w,Q(o.parentLookup),Q(o.domNode),Q(o.nodeOrigin));if(T){if(!Q(o.fitViewOnInitDone)&&Q(o.fitViewOnInit)){const W=Q(o.fitViewOptions),U=c({...W,nodes:W==null?void 0:W.nodes});o.fitViewOnInitDone.set(U)}for(const W of N){const U=(F=w.get(W.id))==null?void 0:F.internals.userNode;if(U)switch(W.type){case\"dimensions\":{const H={...U.measured,...W.dimensions};W.setAttributes&&(U.width=((V=W.dimensions)==null?void 0:V.width)??U.width,U.height=((K=W.dimensions)==null?void 0:K.height)??U.height),U.measured=H;break}case\"position\":U.position=W.position??U.position;break}}o.nodes.update(W=>W),Q(o.nodesInitialized)||o.nodesInitialized.set(!0)}}function c(A){const w=Q(o.panZoom);return w?dg({nodeLookup:Q(o.nodeLookup),width:Q(o.width),height:Q(o.height),minZoom:Q(o.minZoom),maxZoom:Q(o.maxZoom),panZoom:w,nodeOrigin:Q(o.nodeOrigin)},A):!1}function d(A,w){const N=Q(o.panZoom);N&&N.scaleBy(A,w)}function h(A){d(1.2,A)}function g(A){d(1/1.2,A)}function y(A){const w=Q(o.panZoom);w&&(w.setScaleExtent([A,Q(o.maxZoom)]),o.minZoom.set(A))}function p(A){const w=Q(o.panZoom);w&&(w.setScaleExtent([Q(o.minZoom),A]),o.maxZoom.set(A))}function m(A){const w=Q(o.panZoom);w&&(w.setTranslateExtent(A),o.translateExtent.set(A))}function _(A){let w=!1;return A.forEach(N=>{N.selected&&(N.selected=!1,w=!0)}),w}function b(A){_((A==null?void 0:A.nodes)||Q(o.nodes))&&o.nodes.set(Q(o.nodes)),_((A==null?void 0:A.edges)||Q(o.edges))&&o.edges.set(Q(o.edges))}o.deleteKeyPressed.subscribe(async A=>{var w;if(A){const N=Q(o.nodes),T=Q(o.edges),F=N.filter(U=>U.selected),V=T.filter(U=>U.selected),{nodes:K,edges:W}=await mg({nodesToRemove:F,edgesToRemove:V,nodes:N,edges:T,onBeforeDelete:Q(o.onbeforedelete)});(K.length||W.length)&&(o.nodes.update(U=>U.filter(H=>!K.some(oe=>oe.id===H.id))),o.edges.update(U=>U.filter(H=>!W.some(oe=>oe.id===H.id))),(w=Q(o.ondelete))==null||w({nodes:K,edges:W}))}});function v(A){const w=Q(o.multiselectionKeyPressed);o.nodes.update(N=>N.map(T=>{const F=A.includes(T.id),V=w&&T.selected||F;return T.selected=V,T})),w||o.edges.update(N=>N.map(T=>(T.selected=!1,T)))}function M(A){const w=Q(o.multiselectionKeyPressed);o.edges.update(N=>N.map(T=>{const F=A.includes(T.id),V=w&&T.selected||F;return T.selected=V,T})),w||o.nodes.update(N=>N.map(T=>(T.selected=!1,T)))}function O(A){var N;const w=(N=Q(o.nodes))==null?void 0:N.find(T=>T.id===A);if(!w){console.warn(\"012\",ii.error012(A));return}o.selectionRect.set(null),o.selectionRectMode.set(null),w.selected?w.selected&&Q(o.multiselectionKeyPressed)&&b({nodes:[w],edges:[]}):v([A])}function k(A){const w=Q(o.viewport);return Lg({delta:A,panZoom:Q(o.panZoom),transform:[w.x,w.y,w.zoom],translateExtent:Q(o.translateExtent),width:Q(o.width),height:Q(o.height)})}const E={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},C=re(E),D=A=>{C.set(A)};function z(){D(E)}function X(){o.fitViewOnInitDone.set(!1),o.selectionRect.set(null),o.selectionRectMode.set(null),o.snapGrid.set(null),o.isValidConnection.set(()=>!0),b(),z()}return{...o,connection:Wm(o,C),visibleEdges:Ym(o),visibleNodes:Km(o),markers:Xt([o.edges,o.defaultMarkerColor,o.flowId],([A,w,N])=>Dg(A,{defaultColor:w,id:N})),initialized:(()=>{let A=!1;const w=Q(o.nodes).length,N=Q(o.edges).length;return Xt([o.nodesInitialized,o.edgesInitialized,o.viewportInitialized],([T,F,V])=>A||(w===0?A=V:N===0?A=V&&T:A=V&&T&&F,A))})(),syncNodeStores:A=>zm(o.nodes,A),syncEdgeStores:A=>Lm(o.edges,A),syncViewport:A=>Hm(o.panZoom,o.viewport,A),setNodeTypes:s,setEdgeTypes:l,addEdge:a,updateNodePositions:u,updateNodeInternals:f,zoomIn:h,zoomOut:g,fitView:A=>c(A),setMinZoom:y,setMaxZoom:p,setTranslateExtent:m,unselectNodesAndEdges:b,addSelectedNodes:v,addSelectedEdges:M,handleNodeSelection:O,panBy:k,updateConnection:D,cancelConnection:z,reset:X}}function Ye(){const t=Fi(co);if(!t)throw new Error(\"In order to use useStore you need to wrap your component in a <SvelteFlowProvider />\");return t.getStore()}function Um({nodes:t,edges:e,width:n,height:i,fitView:r}){const o=Jm({nodes:t,edges:e,width:n,height:i,fitView:r});return Di(co,{getStore:()=>o}),o}function jm(t,e){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:s,dragging:l,translateExtent:a}=e,u=$g({domNode:t,minZoom:i,maxZoom:r,translateExtent:a,viewport:o,onTransformChange:c=>s.set({x:c[0],y:c[1],zoom:c[2]}),onDraggingChange:l.set}),f=u.getViewport();return s.set(f),n.set(u),u.update(e),{update(c){u.update(c)}}}function Gm(t){let e,n,i,r,o;const s=t[33].default,l=rt(s,t,t[32],null);return{c(){e=ne(\"div\"),l&&l.c(),S(e,\"class\",\"svelte-flow__zoom svelte-4xkw84\")},m(a,u){q(a,e,u),l&&l.m(e,null),i=!0,r||(o=Ue(n=jm.call(null,e,{viewport:t[17],minZoom:t[11],maxZoom:t[12],initialViewport:t[10],dragging:t[22],panZoom:t[18],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[8],panOnDrag:t[9],panOnScrollSpeed:.5,panOnScrollMode:t[3]||Et.Free,zoomActivationKeyPressed:t[13],preventScrolling:typeof t[4]==\"boolean\"?t[4]:!0,noPanClassName:\"nopan\",noWheelClassName:\"nowheel\",userSelectionActive:t[14],translateExtent:t[15],lib:t[16]})),r=!0)},p(a,u){l&&l.p&&(!i||u[1]&2)&&st(l,s,a,a[32],i?ot(s,a[32],u,null):lt(a[32]),null),n&&Fe(n.update)&&u[0]&131071&&n.update.call(null,{viewport:a[17],minZoom:a[11],maxZoom:a[12],initialViewport:a[10],dragging:a[22],panZoom:a[18],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[8],panOnDrag:a[9],panOnScrollSpeed:.5,panOnScrollMode:a[3]||Et.Free,zoomActivationKeyPressed:a[13],preventScrolling:typeof a[4]==\"boolean\"?a[4]:!0,noPanClassName:\"nopan\",noWheelClassName:\"nowheel\",userSelectionActive:a[14],translateExtent:a[15],lib:a[16]})},i(a){i||(P(l,a),i=!0)},o(a){R(l,a),i=!1},d(a){a&&B(e),l&&l.d(a),r=!1,o()}}}function Zm(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,{$$slots:g={},$$scope:y}=e,{initialViewport:p=void 0}=e,{onMoveStart:m=void 0}=e,{onMove:_=void 0}=e,{onMoveEnd:b=void 0}=e,{panOnScrollMode:v}=e,{preventScrolling:M}=e,{zoomOnScroll:O}=e,{zoomOnDoubleClick:k}=e,{zoomOnPinch:E}=e,{panOnDrag:C}=e,{panOnScroll:D}=e;const{viewport:z,panZoom:X,selectionKeyPressed:A,minZoom:w,maxZoom:N,dragging:T,translateExtent:F,lib:V,panActivationKeyPressed:K,zoomActivationKeyPressed:W,viewportInitialized:U}=Ye();return j(t,A,H=>n(14,c=H)),j(t,w,H=>n(11,a=H)),j(t,N,H=>n(12,u=H)),j(t,F,H=>n(15,d=H)),j(t,V,H=>n(16,h=H)),j(t,K,H=>n(31,l=H)),j(t,W,H=>n(13,f=H)),j(t,U,H=>n(34,s=H)),tr(()=>{Ni(U,s=!0,s)}),t.$$set=H=>{\"initialViewport\"in H&&n(28,p=H.initialViewport),\"onMoveStart\"in H&&n(0,m=H.onMoveStart),\"onMove\"in H&&n(1,_=H.onMove),\"onMoveEnd\"in H&&n(2,b=H.onMoveEnd),\"panOnScrollMode\"in H&&n(3,v=H.panOnScrollMode),\"preventScrolling\"in H&&n(4,M=H.preventScrolling),\"zoomOnScroll\"in H&&n(5,O=H.zoomOnScroll),\"zoomOnDoubleClick\"in H&&n(6,k=H.zoomOnDoubleClick),\"zoomOnPinch\"in H&&n(7,E=H.zoomOnPinch),\"panOnDrag\"in H&&n(29,C=H.panOnDrag),\"panOnScroll\"in H&&n(30,D=H.panOnScroll),\"$$scope\"in H&&n(32,y=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&n(10,i=p||{x:0,y:0,zoom:1}),t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(9,r=l||C),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(8,o=l||D)},[m,_,b,v,M,O,k,E,o,r,i,a,u,f,c,d,h,z,X,A,w,N,T,F,V,K,W,U,p,C,D,l,y,g]}class Qm extends ue{constructor(e){super(),ae(this,e,Zm,Gm,ce,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}function xm(t){let e,n,i,r;const o=t[29].default,s=rt(o,t,t[28],null);return{c(){e=ne(\"div\"),s&&s.c(),S(e,\"class\",\"svelte-flow__pane svelte-1esy7hx\"),he(e,\"draggable\",t[0]),he(e,\"dragging\",t[4]),he(e,\"selection\",t[1])},m(l,a){q(l,e,a),s&&s.m(e,null),t[30](e),n=!0,i||(r=[be(e,\"click\",function(){Fe(t[3]?void 0:yi(t[15],t[2]))&&(t[3]?void 0:yi(t[15],t[2])).apply(this,arguments)}),be(e,\"mousedown\",function(){Fe(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),be(e,\"mousemove\",function(){Fe(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),be(e,\"mouseup\",function(){Fe(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),be(e,\"mouseleave\",function(){Fe(t[3]?t[19]:void 0)&&(t[3]?t[19]:void 0).apply(this,arguments)}),be(e,\"contextmenu\",function(){Fe(yi(t[20],t[2]))&&yi(t[20],t[2]).apply(this,arguments)})],i=!0)},p(l,a){t=l,s&&s.p&&(!n||a[0]&268435456)&&st(s,o,t,t[28],n?ot(o,t[28],a,null):lt(t[28]),null),(!n||a[0]&1)&&he(e,\"draggable\",t[0]),(!n||a[0]&16)&&he(e,\"dragging\",t[4]),(!n||a[0]&2)&&he(e,\"selection\",t[1])},i(l){n||(P(s,l),n=!0)},o(l){R(s,l),n=!1},d(l){l&&B(e),s&&s.d(l),t[30](null),i=!1,Ke(r)}}}function yi(t,e){return n=>{n.target===e&&(t==null||t(n))}}function hs(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function $m(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,{$$slots:p={},$$scope:m}=e,{panOnDrag:_=void 0}=e,{selectionOnDrag:b=void 0}=e;const v=ei(),{nodes:M,nodeLookup:O,edges:k,viewport:E,dragging:C,elementsSelectable:D,selectionRect:z,selectionRectMode:X,selectionKeyPressed:A,selectionMode:w,panActivationKeyPressed:N,unselectNodesAndEdges:T}=Ye();j(t,O,L=>n(36,f=L)),j(t,k,L=>n(33,l=L)),j(t,E,L=>n(35,u=L)),j(t,C,L=>n(4,y=L)),j(t,D,L=>n(25,d=L)),j(t,z,L=>n(24,c=L)),j(t,X,L=>n(23,s=L)),j(t,A,L=>n(26,h=L)),j(t,w,L=>n(34,a=L)),j(t,N,L=>n(27,g=L));let F,V=null,K=[];function W(L){v(\"paneclick\",{event:L}),T(),X.set(null)}function U(L){if(V=F.getBoundingClientRect(),!D||!r||L.button!==0||L.target!==F||!V)return;const{x:ve,y:Oe}=Dt(L,V);T(),z.set({width:0,height:0,startX:ve,startY:Oe,x:ve,y:Oe})}function H(L){if(!r||!V||!c)return;const ve=Dt(L,V),Oe=c.startX??0,Ee=c.startY??0,Ne={...c,x:ve.x<Oe?ve.x:Oe,y:ve.y<Ee?ve.y:Ee,width:Math.abs(ve.x-Oe),height:Math.abs(ve.y-Ee)},De=K.map(Ie=>Ie.id),Be=Kr(K,l).map(Ie=>Ie.id);K=fa(f,Ne,[u.x,u.y,u.zoom],a===Wi.Partial,!0);const J=Kr(K,l).map(Ie=>Ie.id),Ve=K.map(Ie=>Ie.id);(De.length!==Ve.length||Ve.some(Ie=>!De.includes(Ie)))&&M.update(Ie=>Ie.map(hs(Ve))),(Be.length!==J.length||J.some(Ie=>!Be.includes(Ie)))&&k.update(Ie=>Ie.map(hs(J))),X.set(\"user\"),z.set(Ne)}function oe(L){L.button===0&&(!r&&s===\"user\"&&L.target===F&&(W==null||W(L)),z.set(null),K.length>0&&Ni(X,s=\"nodes\",s))}const ie=()=>{s===\"user\"&&X.set(K.length>0?\"nodes\":null),z.set(null)},pe=L=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){L.preventDefault();return}v(\"panecontextmenu\",{event:L})};function Se(L){In[L?\"unshift\":\"push\"](()=>{F=L,n(2,F)})}return t.$$set=L=>{\"panOnDrag\"in L&&n(0,_=L.panOnDrag),\"selectionOnDrag\"in L&&n(21,b=L.selectionOnDrag),\"$$scope\"in L&&n(28,m=L.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&n(22,i=g||_),t.$$.dirty[0]&90177536&&n(1,r=h||c||b&&i!==!0),t.$$.dirty[0]&41943042&&n(3,o=d&&(r||s===\"user\"))},[_,r,F,o,y,O,k,E,C,D,z,X,A,w,N,W,U,H,oe,ie,pe,b,i,s,c,d,h,g,m,p,Se]}class e0 extends ue{constructor(e){super(),ae(this,e,$m,xm,ce,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}function t0(t){let e,n;const i=t[3].default,r=rt(i,t,t[2],null);return{c(){e=ne(\"div\"),r&&r.c(),S(e,\"class\",\"svelte-flow__viewport xyflow__viewport svelte-1floaup\"),se(e,\"transform\",\"translate(\"+t[0].x+\"px, \"+t[0].y+\"px) scale(\"+t[0].zoom+\")\")},m(o,s){q(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&4)&&st(r,i,o,o[2],n?ot(i,o[2],s,null):lt(o[2]),null),(!n||s&1)&&se(e,\"transform\",\"translate(\"+o[0].x+\"px, \"+o[0].y+\"px) scale(\"+o[0].zoom+\")\")},i(o){n||(P(r,o),n=!0)},o(o){R(r,o),n=!1},d(o){o&&B(e),r&&r.d(o)}}}function n0(t,e,n){let i,{$$slots:r={},$$scope:o}=e;const{viewport:s}=Ye();return j(t,s,l=>n(0,i=l)),t.$$set=l=>{\"$$scope\"in l&&n(2,o=l.$$scope)},[i,s,o,r]}class i0 extends ue{constructor(e){super(),ae(this,e,n0,t0,ce,{})}}function Ra(t,e){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s}=e,l=Bg({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const u=Q(n.snapGrid),f=Q(n.viewport);return{nodes:Q(n.nodes),nodeLookup:Q(n.nodeLookup),edges:Q(n.edges),nodeExtent:Q(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:[0,0],multiSelectionActive:Q(n.multiselectionKeyPressed),domNode:Q(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:Q(n.autoPanOnNodeDrag),nodesDraggable:Q(n.nodesDraggable),selectNodesOnDrag:Q(n.selectNodesOnDrag),nodeDragThreshold:Q(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable})}return a(t,e),{update(u){a(t,u)},destroy(){l.destroy()}}}function r0({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const s=t??n,l=e??i;return{width:s?`width:${s}px;`:\"\",height:l?`height:${l}px;`:\"\"}}return{width:t?`width:${t}px;`:\"\",height:e?`height:${e}px;`:\"\"}}function gs(t){let e,n,i,r,o,s=`translate(${t[14]}px, ${t[15]}px)`,l,a,u;var f=t[28];function c(d,h){return{props:{data:d[2],id:d[1],selected:d[3],selectable:d[5],deletable:d[7],sourcePosition:d[16],targetPosition:d[17],zIndex:d[18],dragging:d[9],draggable:d[4],dragHandle:d[21],parentId:d[23],type:d[26],isConnectable:d[29],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[19],height:d[20]}}}return f&&(n=Wt(f,c(t))),{c(){e=ne(\"div\"),n&&ee(n.$$.fragment),S(e,\"data-id\",t[1]),S(e,\"class\",i=Ae([\"svelte-flow__node\",`svelte-flow__node-${t[26]}`,t[24]])),S(e,\"style\",r=(t[10]??\"\")+\";\"+t[27].width+t[27].height),he(e,\"dragging\",t[9]),he(e,\"selected\",t[3]),he(e,\"draggable\",t[4]),he(e,\"connectable\",t[6]),he(e,\"selectable\",t[5]),he(e,\"nopan\",t[4]),he(e,\"parent\",t[11]),se(e,\"z-index\",t[18]),se(e,\"transform\",s),se(e,\"visibility\",t[22]?\"visible\":\"hidden\")},m(d,h){q(d,e,h),n&&x(n,e,null),t[51](e),l=!0,a||(u=[Ue(o=Ra.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[21],noDragClass:\"nodrag\",onNodeMouseDown:t[32],onDrag:t[48],onDragStart:t[49],onDragStop:t[50],store:t[30]})),be(e,\"click\",t[35]),be(e,\"mouseenter\",t[52]),be(e,\"mouseleave\",t[53]),be(e,\"mousemove\",t[54]),be(e,\"contextmenu\",t[55])],a=!0)},p(d,h){if(h[0]&268435456&&f!==(f=d[28])){if(n){Te();const y=n;R(y.$$.fragment,1,0,()=>{$(y,1)}),Me()}f?(n=Wt(f,c(d)),ee(n.$$.fragment),P(n.$$.fragment,1),x(n,e,null)):n=null}else if(f){const y={};h[0]&4&&(y.data=d[2]),h[0]&2&&(y.id=d[1]),h[0]&8&&(y.selected=d[3]),h[0]&32&&(y.selectable=d[5]),h[0]&128&&(y.deletable=d[7]),h[0]&65536&&(y.sourcePosition=d[16]),h[0]&131072&&(y.targetPosition=d[17]),h[0]&262144&&(y.zIndex=d[18]),h[0]&512&&(y.dragging=d[9]),h[0]&16&&(y.draggable=d[4]),h[0]&2097152&&(y.dragHandle=d[21]),h[0]&8388608&&(y.parentId=d[23]),h[0]&67108864&&(y.type=d[26]),h[0]&536870912&&(y.isConnectable=d[29]),h[0]&4096&&(y.positionAbsoluteX=d[12]),h[0]&8192&&(y.positionAbsoluteY=d[13]),h[0]&524288&&(y.width=d[19]),h[0]&1048576&&(y.height=d[20]),n.$set(y)}(!l||h[0]&2)&&S(e,\"data-id\",d[1]),(!l||h[0]&83886080&&i!==(i=Ae([\"svelte-flow__node\",`svelte-flow__node-${d[26]}`,d[24]])))&&S(e,\"class\",i),(!l||h[0]&134218752&&r!==(r=(d[10]??\"\")+\";\"+d[27].width+d[27].height))&&S(e,\"style\",r),o&&Fe(o.update)&&h[0]&2097186&&o.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[21],noDragClass:\"nodrag\",onNodeMouseDown:d[32],onDrag:d[48],onDragStart:d[49],onDragStop:d[50],store:d[30]}),(!l||h[0]&83886592)&&he(e,\"dragging\",d[9]),(!l||h[0]&83886088)&&he(e,\"selected\",d[3]),(!l||h[0]&83886096)&&he(e,\"draggable\",d[4]),(!l||h[0]&83886144)&&he(e,\"connectable\",d[6]),(!l||h[0]&83886112)&&he(e,\"selectable\",d[5]),(!l||h[0]&83886096)&&he(e,\"nopan\",d[4]),(!l||h[0]&83888128)&&he(e,\"parent\",d[11]);const g=h[0]&134218752;(h[0]&134480896||g)&&se(e,\"z-index\",d[18]),(h[0]&134267904&&s!==(s=`translate(${d[14]}px, ${d[15]}px)`)||g)&&se(e,\"transform\",s),(h[0]&138413056||g)&&se(e,\"visibility\",d[22]?\"visible\":\"hidden\")},i(d){l||(n&&P(n.$$.fragment,d),l=!0)},o(d){n&&R(n.$$.fragment,d),l=!1},d(d){d&&B(e),n&&$(n),t[51](null),a=!1,Ke(u)}}}function o0(t){let e,n,i=!t[8]&&gs(t);return{c(){i&&i.c(),e=Xe()},m(r,o){i&&i.m(r,o),q(r,e,o),n=!0},p(r,o){r[8]?i&&(Te(),R(i,1,1,()=>{i=null}),Me()):i?(i.p(r,o),o[0]&256&&P(i,1)):(i=gs(r),i.c(),P(i,1),i.m(e.parentNode,e))},i(r){n||(P(i),n=!0)},o(r){R(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function s0(t,e,n){let i,r,o,s,l,a,{node:u}=e,{id:f}=e,{data:c={}}=e,{selected:d=!1}=e,{draggable:h=void 0}=e,{selectable:g=void 0}=e,{connectable:y=!0}=e,{deletable:p=!0}=e,{hidden:m=!1}=e,{dragging:_=!1}=e,{resizeObserver:b=null}=e,{style:v=void 0}=e,{type:M=\"default\"}=e,{isParent:O=!1}=e,{positionX:k}=e,{positionY:E}=e,{positionOriginX:C}=e,{positionOriginY:D}=e,{sourcePosition:z=void 0}=e,{targetPosition:X=void 0}=e,{zIndex:A}=e,{measuredWidth:w=void 0}=e,{measuredHeight:N=void 0}=e,{initialWidth:T=void 0}=e,{initialHeight:F=void 0}=e,{width:V=void 0}=e,{height:K=void 0}=e,{dragHandle:W=void 0}=e,{initialized:U=!1}=e,{parentId:H=void 0}=e,{class:oe=\"\"}=e;const ie=Ye(),{nodeTypes:pe,nodeDragThreshold:Se,selectNodesOnDrag:L,handleNodeSelection:ve,updateNodeInternals:Oe}=ie;j(t,pe,Y=>n(47,l=Y));let Ee,Ne=null;const De=ei(),Be=re(y);j(t,Be,Y=>n(29,a=Y));let J,Ve,Ie;Di(\"svelteflow__node_id\",f),Di(\"svelteflow__node_connectable\",Be),nr(()=>{Ne&&(b==null||b.unobserve(Ne))});function It(Y){g&&(!Q(L)||!h||Q(Se)>0)&&ve(f),De(\"nodeclick\",{node:u.internals.userNode,event:Y})}const Tt=(Y,yt,Z,Qe)=>{De(\"nodedrag\",{event:Y,targetNode:Z,nodes:Qe})},Mt=(Y,yt,Z,Qe)=>{De(\"nodedragstart\",{event:Y,targetNode:Z,nodes:Qe})},je=(Y,yt,Z,Qe)=>{De(\"nodedragstop\",{event:Y,targetNode:Z,nodes:Qe})};function vt(Y){In[Y?\"unshift\":\"push\"](()=>{Ee=Y,n(25,Ee)})}const te=Y=>De(\"nodemouseenter\",{node:u,event:Y}),zt=Y=>De(\"nodemouseleave\",{node:u,event:Y}),Lt=Y=>De(\"nodemousemove\",{node:u,event:Y}),Ut=Y=>De(\"nodecontextmenu\",{node:u,event:Y});return t.$$set=Y=>{\"node\"in Y&&n(0,u=Y.node),\"id\"in Y&&n(1,f=Y.id),\"data\"in Y&&n(2,c=Y.data),\"selected\"in Y&&n(3,d=Y.selected),\"draggable\"in Y&&n(4,h=Y.draggable),\"selectable\"in Y&&n(5,g=Y.selectable),\"connectable\"in Y&&n(6,y=Y.connectable),\"deletable\"in Y&&n(7,p=Y.deletable),\"hidden\"in Y&&n(8,m=Y.hidden),\"dragging\"in Y&&n(9,_=Y.dragging),\"resizeObserver\"in Y&&n(36,b=Y.resizeObserver),\"style\"in Y&&n(10,v=Y.style),\"type\"in Y&&n(37,M=Y.type),\"isParent\"in Y&&n(11,O=Y.isParent),\"positionX\"in Y&&n(12,k=Y.positionX),\"positionY\"in Y&&n(13,E=Y.positionY),\"positionOriginX\"in Y&&n(14,C=Y.positionOriginX),\"positionOriginY\"in Y&&n(15,D=Y.positionOriginY),\"sourcePosition\"in Y&&n(16,z=Y.sourcePosition),\"targetPosition\"in Y&&n(17,X=Y.targetPosition),\"zIndex\"in Y&&n(18,A=Y.zIndex),\"measuredWidth\"in Y&&n(38,w=Y.measuredWidth),\"measuredHeight\"in Y&&n(39,N=Y.measuredHeight),\"initialWidth\"in Y&&n(40,T=Y.initialWidth),\"initialHeight\"in Y&&n(41,F=Y.initialHeight),\"width\"in Y&&n(19,V=Y.width),\"height\"in Y&&n(20,K=Y.height),\"dragHandle\"in Y&&n(21,W=Y.dragHandle),\"initialized\"in Y&&n(22,U=Y.initialized),\"parentId\"in Y&&n(23,H=Y.parentId),\"class\"in Y&&n(24,oe=Y.class)},t.$$.update=()=>{t.$$.dirty[1]&64&&n(26,i=M||\"default\"),t.$$.dirty[0]&67108864|t.$$.dirty[1]&65536&&n(46,r=!!l[i]),t.$$.dirty[0]&67108864|t.$$.dirty[1]&65536&&n(28,o=l[i]||Ma),t.$$.dirty[1]&32832&&(r||console.warn(\"003\",ii.error003(M))),t.$$.dirty[0]&1572864|t.$$.dirty[1]&1920&&n(27,s=r0({width:V,height:K,initialWidth:T,initialHeight:F,measuredWidth:w,measuredHeight:N})),t.$$.dirty[0]&64&&Be.set(!!y),t.$$.dirty[0]&100859906|t.$$.dirty[1]&28672&&((J&&i!==J||Ve&&z!==Ve||Ie&&X!==Ie)&&requestAnimationFrame(()=>Oe(new Map([[f,{id:f,nodeElement:Ee,force:!0}]]))),n(43,J=i),n(44,Ve=z),n(45,Ie=X)),t.$$.dirty[0]&37748736|t.$$.dirty[1]&2080&&b&&(Ee!==Ne||!U)&&(Ne&&b.unobserve(Ne),Ee&&b.observe(Ee),n(42,Ne=Ee))},[u,f,c,d,h,g,y,p,m,_,v,O,k,E,C,D,z,X,A,V,K,W,U,H,oe,Ee,i,s,o,a,ie,pe,ve,De,Be,It,b,M,w,N,T,F,Ne,J,Ve,Ie,r,l,Tt,Mt,je,vt,te,zt,Lt,Ut]}class l0 extends ue{constructor(e){super(),ae(this,e,s0,o0,Il,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:36,style:10,type:37,isParent:11,positionX:12,positionY:13,positionOriginX:14,positionOriginY:15,sourcePosition:16,targetPosition:17,zIndex:18,measuredWidth:38,measuredHeight:39,initialWidth:40,initialHeight:41,width:19,height:20,dragHandle:21,initialized:22,parentId:23,class:24},null,[-1,-1])}}const{Map:a0}=Ml;function ms(t,e,n){const i=t.slice();i[20]=e[n];const r=ri(i[20]);i[21]=r;const o=bg({x:i[20].internals.positionAbsolute.x,y:i[20].internals.positionAbsolute.y,...i[21],origin:i[20].origin});return i[22]=o,i}function ys(t,e){let n,i,r;return i=new l0({props:{node:e[20],id:e[20].id,data:e[20].data,selected:!!e[20].selected,hidden:!!e[20].hidden,draggable:!!(e[20].draggable||e[1]&&typeof e[20].draggable>\"u\"),selectable:!!(e[20].selectable||e[2]&&typeof e[20].selectable>\"u\"),connectable:!!(e[20].connectable||e[3]&&typeof e[20].connectable>\"u\"),deletable:e[20].deletable??!0,positionX:e[20].internals.positionAbsolute.x,positionY:e[20].internals.positionAbsolute.y,positionOriginX:e[22].x??0,positionOriginY:e[22].y??0,isParent:e[4].has(e[20].id),style:e[20].style,class:e[20].class,type:e[20].type??\"default\",sourcePosition:e[20].sourcePosition,targetPosition:e[20].targetPosition,dragging:e[20].dragging,zIndex:e[20].internals.z??0,dragHandle:e[20].dragHandle,initialized:Ji(e[20]),width:e[20].width,height:e[20].height,initialWidth:e[20].initialWidth,initialHeight:e[20].initialHeight,measuredWidth:e[20].measured.width,measuredHeight:e[20].measured.height,parentId:e[20].parentId,resizeObserver:e[10]}}),i.$on(\"nodeclick\",e[11]),i.$on(\"nodemouseenter\",e[12]),i.$on(\"nodemousemove\",e[13]),i.$on(\"nodemouseleave\",e[14]),i.$on(\"nodedrag\",e[15]),i.$on(\"nodedragstart\",e[16]),i.$on(\"nodedragstop\",e[17]),i.$on(\"nodecontextmenu\",e[18]),{key:t,first:null,c(){n=Xe(),ee(i.$$.fragment),this.first=n},m(o,s){q(o,n,s),x(i,o,s),r=!0},p(o,s){e=o;const l={};s&1&&(l.node=e[20]),s&1&&(l.id=e[20].id),s&1&&(l.data=e[20].data),s&1&&(l.selected=!!e[20].selected),s&1&&(l.hidden=!!e[20].hidden),s&3&&(l.draggable=!!(e[20].draggable||e[1]&&typeof e[20].draggable>\"u\")),s&5&&(l.selectable=!!(e[20].selectable||e[2]&&typeof e[20].selectable>\"u\")),s&9&&(l.connectable=!!(e[20].connectable||e[3]&&typeof e[20].connectable>\"u\")),s&1&&(l.deletable=e[20].deletable??!0),s&1&&(l.positionX=e[20].internals.positionAbsolute.x),s&1&&(l.positionY=e[20].internals.positionAbsolute.y),s&1&&(l.positionOriginX=e[22].x??0),s&1&&(l.positionOriginY=e[22].y??0),s&17&&(l.isParent=e[4].has(e[20].id)),s&1&&(l.style=e[20].style),s&1&&(l.class=e[20].class),s&1&&(l.type=e[20].type??\"default\"),s&1&&(l.sourcePosition=e[20].sourcePosition),s&1&&(l.targetPosition=e[20].targetPosition),s&1&&(l.dragging=e[20].dragging),s&1&&(l.zIndex=e[20].internals.z??0),s&1&&(l.dragHandle=e[20].dragHandle),s&1&&(l.initialized=Ji(e[20])),s&1&&(l.width=e[20].width),s&1&&(l.height=e[20].height),s&1&&(l.initialWidth=e[20].initialWidth),s&1&&(l.initialHeight=e[20].initialHeight),s&1&&(l.measuredWidth=e[20].measured.width),s&1&&(l.measuredHeight=e[20].measured.height),s&1&&(l.parentId=e[20].parentId),i.$set(l)},i(o){r||(P(i.$$.fragment,o),r=!0)},o(o){R(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(i,o)}}}function u0(t){let e,n=[],i=new a0,r,o=We(t[0]);const s=l=>l[20].id;for(let l=0;l<o.length;l+=1){let a=ms(t,o,l),u=s(a);i.set(u,n[l]=ys(u,a))}return{c(){e=ne(\"div\");for(let l=0;l<n.length;l+=1)n[l].c();S(e,\"class\",\"svelte-flow__nodes svelte-tf4uy4\")},m(l,a){q(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[a]){a&1055&&(o=We(l[0]),Te(),n=rr(n,a,s,1,l,o,i,e,ir,ys,null,ms),Me())},i(l){if(!r){for(let a=0;a<o.length;a+=1)P(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)R(n[a]);r=!1},d(l){l&&B(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function f0(t,e,n){let i,r,o,s,l;const{visibleNodes:a,nodesDraggable:u,nodesConnectable:f,elementsSelectable:c,updateNodeInternals:d,parentLookup:h}=Ye();j(t,a,k=>n(0,i=k)),j(t,u,k=>n(1,r=k)),j(t,f,k=>n(3,s=k)),j(t,c,k=>n(2,o=k)),j(t,h,k=>n(4,l=k));const g=typeof ResizeObserver>\"u\"?null:new ResizeObserver(k=>{const E=new Map;k.forEach(C=>{const D=C.target.getAttribute(\"data-id\");E.set(D,{id:D,nodeElement:C.target,force:!0})}),d(E)});nr(()=>{g==null||g.disconnect()});function y(k){ke.call(this,t,k)}function p(k){ke.call(this,t,k)}function m(k){ke.call(this,t,k)}function _(k){ke.call(this,t,k)}function b(k){ke.call(this,t,k)}function v(k){ke.call(this,t,k)}function M(k){ke.call(this,t,k)}function O(k){ke.call(this,t,k)}return[i,r,o,s,l,a,u,f,c,h,g,y,p,m,_,b,v,M,O]}class c0 extends ue{constructor(e){super(),ae(this,e,f0,u0,ce,{})}}function ps(t){let e,n,i,r,o,s,l,a;var u=t[27];function f(c,d){return{props:{id:c[0],source:c[1],target:c[2],sourceX:c[14],sourceY:c[15],targetX:c[16],targetY:c[17],sourcePosition:c[18],targetPosition:c[19],animated:c[6],selected:c[7],label:c[10],labelStyle:c[11],data:c[3],style:c[4],interactionWidth:c[21],selectable:c[24],deletable:c[8]??!0,type:c[23],sourceHandleId:c[12],targetHandleId:c[13],markerStart:c[26],markerEnd:c[25]}}}return u&&(i=Wt(u,f(t))),{c(){e=Ce(\"svg\"),n=Ce(\"g\"),i&&ee(i.$$.fragment),S(n,\"class\",r=Ae([\"svelte-flow__edge\",t[22]])),S(n,\"data-id\",t[0]),S(n,\"aria-label\",o=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),S(n,\"role\",\"img\"),he(n,\"animated\",t[6]),he(n,\"selected\",t[7]),he(n,\"selectable\",t[24]),se(e,\"z-index\",t[5])},m(c,d){q(c,e,d),G(e,n),i&&x(i,n,null),s=!0,l||(a=[be(n,\"click\",t[32]),be(n,\"contextmenu\",t[41]),be(n,\"mouseenter\",t[42]),be(n,\"mouseleave\",t[43])],l=!0)},p(c,d){if(d[0]&134217728&&u!==(u=c[27])){if(i){Te();const h=i;R(h.$$.fragment,1,0,()=>{$(h,1)}),Me()}u?(i=Wt(u,f(c)),ee(i.$$.fragment),P(i.$$.fragment,1),x(i,n,null)):i=null}else if(u){const h={};d[0]&1&&(h.id=c[0]),d[0]&2&&(h.source=c[1]),d[0]&4&&(h.target=c[2]),d[0]&16384&&(h.sourceX=c[14]),d[0]&32768&&(h.sourceY=c[15]),d[0]&65536&&(h.targetX=c[16]),d[0]&131072&&(h.targetY=c[17]),d[0]&262144&&(h.sourcePosition=c[18]),d[0]&524288&&(h.targetPosition=c[19]),d[0]&64&&(h.animated=c[6]),d[0]&128&&(h.selected=c[7]),d[0]&1024&&(h.label=c[10]),d[0]&2048&&(h.labelStyle=c[11]),d[0]&8&&(h.data=c[3]),d[0]&16&&(h.style=c[4]),d[0]&2097152&&(h.interactionWidth=c[21]),d[0]&16777216&&(h.selectable=c[24]),d[0]&256&&(h.deletable=c[8]??!0),d[0]&8388608&&(h.type=c[23]),d[0]&4096&&(h.sourceHandleId=c[12]),d[0]&8192&&(h.targetHandleId=c[13]),d[0]&67108864&&(h.markerStart=c[26]),d[0]&33554432&&(h.markerEnd=c[25]),i.$set(h)}(!s||d[0]&4194304&&r!==(r=Ae([\"svelte-flow__edge\",c[22]])))&&S(n,\"class\",r),(!s||d[0]&1)&&S(n,\"data-id\",c[0]),(!s||d[0]&1048582&&o!==(o=c[20]===null?void 0:c[20]?c[20]:`Edge from ${c[1]} to ${c[2]}`))&&S(n,\"aria-label\",o),(!s||d[0]&4194368)&&he(n,\"animated\",c[6]),(!s||d[0]&4194432)&&he(n,\"selected\",c[7]),(!s||d[0]&20971520)&&he(n,\"selectable\",c[24]),d[0]&32&&se(e,\"z-index\",c[5])},i(c){s||(i&&P(i.$$.fragment,c),s=!0)},o(c){i&&R(i.$$.fragment,c),s=!1},d(c){c&&B(e),i&&$(i),l=!1,Ke(a)}}}function d0(t){let e,n,i=!t[9]&&ps(t);return{c(){i&&i.c(),e=Xe()},m(r,o){i&&i.m(r,o),q(r,e,o),n=!0},p(r,o){r[9]?i&&(Te(),R(i,1,1,()=>{i=null}),Me()):i?(i.p(r,o),o[0]&512&&P(i,1)):(i=ps(r),i.c(),P(i,1),i.m(e.parentNode,e))},i(r){n||(P(i),n=!0)},o(r){R(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function h0(t,e,n){let i,r,o,s,l,a,u,f,c,{id:d}=e,{type:h=\"default\"}=e,{source:g=\"\"}=e,{target:y=\"\"}=e,{data:p={}}=e,{style:m=void 0}=e,{zIndex:_=void 0}=e,{animated:b=!1}=e,{selected:v=!1}=e,{selectable:M=void 0}=e,{deletable:O=void 0}=e,{hidden:k=!1}=e,{label:E=void 0}=e,{labelStyle:C=void 0}=e,{markerStart:D=void 0}=e,{markerEnd:z=void 0}=e,{sourceHandle:X=void 0}=e,{targetHandle:A=void 0}=e,{sourceX:w}=e,{sourceY:N}=e,{targetX:T}=e,{targetY:F}=e,{sourcePosition:V}=e,{targetPosition:K}=e,{ariaLabel:W=void 0}=e,{interactionWidth:U=void 0}=e,{class:H=\"\"}=e;Di(\"svelteflow__edge_id\",d);const{edgeLookup:oe,edgeTypes:ie,flowId:pe,elementsSelectable:Se}=Ye();j(t,oe,J=>n(44,a=J)),j(t,ie,J=>n(40,c=J)),j(t,pe,J=>n(39,f=J)),j(t,Se,J=>n(38,u=J));const L=ei(),ve=Aa();function Oe(J){const Ve=a.get(d);Ve&&(ve(d),L(\"edgeclick\",{event:J,edge:Ve}))}function Ee(J,Ve){const Ie=a.get(d);Ie&&L(Ve,{event:J,edge:Ie})}const Ne=J=>{Ee(J,\"edgecontextmenu\")},De=J=>{Ee(J,\"edgemouseenter\")},Be=J=>{Ee(J,\"edgemouseleave\")};return t.$$set=J=>{\"id\"in J&&n(0,d=J.id),\"type\"in J&&n(34,h=J.type),\"source\"in J&&n(1,g=J.source),\"target\"in J&&n(2,y=J.target),\"data\"in J&&n(3,p=J.data),\"style\"in J&&n(4,m=J.style),\"zIndex\"in J&&n(5,_=J.zIndex),\"animated\"in J&&n(6,b=J.animated),\"selected\"in J&&n(7,v=J.selected),\"selectable\"in J&&n(35,M=J.selectable),\"deletable\"in J&&n(8,O=J.deletable),\"hidden\"in J&&n(9,k=J.hidden),\"label\"in J&&n(10,E=J.label),\"labelStyle\"in J&&n(11,C=J.labelStyle),\"markerStart\"in J&&n(36,D=J.markerStart),\"markerEnd\"in J&&n(37,z=J.markerEnd),\"sourceHandle\"in J&&n(12,X=J.sourceHandle),\"targetHandle\"in J&&n(13,A=J.targetHandle),\"sourceX\"in J&&n(14,w=J.sourceX),\"sourceY\"in J&&n(15,N=J.sourceY),\"targetX\"in J&&n(16,T=J.targetX),\"targetY\"in J&&n(17,F=J.targetY),\"sourcePosition\"in J&&n(18,V=J.sourcePosition),\"targetPosition\"in J&&n(19,K=J.targetPosition),\"ariaLabel\"in J&&n(20,W=J.ariaLabel),\"interactionWidth\"in J&&n(21,U=J.interactionWidth),\"class\"in J&&n(22,H=J.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=h||\"default\"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,r=c[i]||Pa),t.$$.dirty[1]&288&&n(26,o=D?`url('#${Ur(D,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,s=z?`url('#${Ur(z,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,l=M??u)},[d,g,y,p,m,_,b,v,O,k,E,C,X,A,w,N,T,F,V,K,W,U,H,i,l,s,o,r,oe,ie,pe,Se,Oe,Ee,h,M,D,z,u,f,c,Ne,De,Be]}class g0 extends ue{constructor(e){super(),ae(this,e,h0,d0,Il,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function m0(t,e,n){let{onMount:i=void 0}=e,{onDestroy:r=void 0}=e;return tr(()=>(i==null||i(),r)),t.$$set=o=>{\"onMount\"in o&&n(0,i=o.onMount),\"onDestroy\"in o&&n(1,r=o.onDestroy)},[i,r]}class y0 extends ue{constructor(e){super(),ae(this,e,m0,null,ce,{onMount:0,onDestroy:1})}}function bs(t,e,n){const i=t.slice();return i[2]=e[n],i}function ws(t,e){let n,i,r;const o=[e[2]];let s={};for(let l=0;l<o.length;l+=1)s=_e(s,o[l]);return i=new E0({props:s}),{key:t,first:null,c(){n=Xe(),ee(i.$$.fragment),this.first=n},m(l,a){q(l,n,a),x(i,l,a),r=!0},p(l,a){e=l;const u=a&1?ct(o,[Ct(e[2])]):{};i.$set(u)},i(l){r||(P(i.$$.fragment,l),r=!0)},o(l){R(i.$$.fragment,l),r=!1},d(l){l&&B(n),$(i,l)}}}function p0(t){let e,n=[],i=new Map,r,o=We(t[0]);const s=l=>l[2].id;for(let l=0;l<o.length;l+=1){let a=bs(t,o,l),u=s(a);i.set(u,n[l]=ws(u,a))}return{c(){e=Ce(\"defs\");for(let l=0;l<n.length;l+=1)n[l].c()},m(l,a){q(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[a]){a&1&&(o=We(l[0]),Te(),n=rr(n,a,s,1,l,o,i,e,ir,ws,null,bs),Me())},i(l){if(!r){for(let a=0;a<o.length;a+=1)P(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)R(n[a]);r=!1},d(l){l&&B(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function b0(t,e,n){let i;const{markers:r}=Ye();return j(t,r,o=>n(0,i=o)),[i,r]}class w0 extends ue{constructor(e){super(),ae(this,e,b0,p0,ce,{})}}function _0(t){let e;return{c(){e=Ce(\"polyline\"),S(e,\"stroke\",t[6]),S(e,\"stroke-linecap\",\"round\"),S(e,\"stroke-linejoin\",\"round\"),S(e,\"stroke-width\",t[7]),S(e,\"fill\",t[6]),S(e,\"points\",\"-5,-4 0,0 -5,4 -5,-4\")},m(n,i){q(n,e,i)},p(n,i){i&64&&S(e,\"stroke\",n[6]),i&128&&S(e,\"stroke-width\",n[7]),i&64&&S(e,\"fill\",n[6])},d(n){n&&B(e)}}}function v0(t){let e;return{c(){e=Ce(\"polyline\"),S(e,\"stroke\",t[6]),S(e,\"stroke-linecap\",\"round\"),S(e,\"stroke-linejoin\",\"round\"),S(e,\"stroke-width\",t[7]),S(e,\"fill\",\"none\"),S(e,\"points\",\"-5,-4 0,0 -5,4\")},m(n,i){q(n,e,i)},p(n,i){i&64&&S(e,\"stroke\",n[6]),i&128&&S(e,\"stroke-width\",n[7])},d(n){n&&B(e)}}}function k0(t){let e,n,i;function r(l,a){if(l[1]===Xi.Arrow)return v0;if(l[1]===Xi.ArrowClosed)return _0}let o=r(t),s=o&&o(t);return{c(){e=Ce(\"marker\"),s&&s.c(),S(e,\"class\",\"svelte-flow__arrowhead\"),S(e,\"id\",t[0]),S(e,\"markerWidth\",n=`${t[2]}`),S(e,\"markerHeight\",i=`${t[3]}`),S(e,\"viewBox\",\"-10 -10 20 20\"),S(e,\"markerUnits\",t[4]),S(e,\"orient\",t[5]),S(e,\"refX\",\"0\"),S(e,\"refY\",\"0\")},m(l,a){q(l,e,a),s&&s.m(e,null)},p(l,[a]){o===(o=r(l))&&s?s.p(l,a):(s&&s.d(1),s=o&&o(l),s&&(s.c(),s.m(e,null))),a&1&&S(e,\"id\",l[0]),a&4&&n!==(n=`${l[2]}`)&&S(e,\"markerWidth\",n),a&8&&i!==(i=`${l[3]}`)&&S(e,\"markerHeight\",i),a&16&&S(e,\"markerUnits\",l[4]),a&32&&S(e,\"orient\",l[5])},i:le,o:le,d(l){l&&B(e),s&&s.d()}}}function S0(t,e,n){let{id:i}=e,{type:r}=e,{width:o=12.5}=e,{height:s=12.5}=e,{markerUnits:l=\"strokeWidth\"}=e,{orient:a=\"auto-start-reverse\"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=c=>{\"id\"in c&&n(0,i=c.id),\"type\"in c&&n(1,r=c.type),\"width\"in c&&n(2,o=c.width),\"height\"in c&&n(3,s=c.height),\"markerUnits\"in c&&n(4,l=c.markerUnits),\"orient\"in c&&n(5,a=c.orient),\"color\"in c&&n(6,u=c.color),\"strokeWidth\"in c&&n(7,f=c.strokeWidth)},[i,r,o,s,l,a,u,f]}class E0 extends ue{constructor(e){super(),ae(this,e,S0,k0,ce,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function _s(t,e,n){const i=t.slice();return i[14]=e[n],i}function vs(t,e){let n,i,r;return i=new g0({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||\"default\",zIndex:e[14].zIndex}}),i.$on(\"edgeclick\",e[7]),i.$on(\"edgecontextmenu\",e[8]),i.$on(\"edgemouseenter\",e[9]),i.$on(\"edgemouseleave\",e[10]),{key:t,first:null,c(){n=Xe(),ee(i.$$.fragment),this.first=n},m(o,s){q(o,n,s),x(i,o,s),r=!0},p(o,s){e=o;const l={};s&1&&(l.id=e[14].id),s&1&&(l.source=e[14].source),s&1&&(l.target=e[14].target),s&1&&(l.data=e[14].data),s&1&&(l.style=e[14].style),s&1&&(l.animated=e[14].animated),s&1&&(l.selected=e[14].selected),s&3&&(l.selectable=e[14].selectable??e[1]),s&1&&(l.deletable=e[14].deletable),s&1&&(l.hidden=e[14].hidden),s&1&&(l.label=e[14].label),s&1&&(l.labelStyle=e[14].labelStyle),s&1&&(l.markerStart=e[14].markerStart),s&1&&(l.markerEnd=e[14].markerEnd),s&1&&(l.sourceHandle=e[14].sourceHandle),s&1&&(l.targetHandle=e[14].targetHandle),s&1&&(l.sourceX=e[14].sourceX),s&1&&(l.sourceY=e[14].sourceY),s&1&&(l.targetX=e[14].targetX),s&1&&(l.targetY=e[14].targetY),s&1&&(l.sourcePosition=e[14].sourcePosition),s&1&&(l.targetPosition=e[14].targetPosition),s&1&&(l.ariaLabel=e[14].ariaLabel),s&1&&(l.interactionWidth=e[14].interactionWidth),s&1&&(l.class=e[14].class),s&1&&(l.type=e[14].type||\"default\"),s&1&&(l.zIndex=e[14].zIndex),i.$set(l)},i(o){r||(P(i.$$.fragment,o),r=!0)},o(o){R(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(i,o)}}}function ks(t){let e,n;return e=new y0({props:{onMount:t[11],onDestroy:t[12]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&4&&(o.onMount=i[11]),r&4&&(o.onDestroy=i[12]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function C0(t){let e,n,i,r,o=[],s=new Map,l,a;i=new w0({});let u=We(t[0]);const f=d=>d[14].id;for(let d=0;d<u.length;d+=1){let h=_s(t,u,d),g=f(h);s.set(g,o[d]=vs(g,h))}let c=t[0].length>0&&ks(t);return{c(){e=ne(\"div\"),n=Ce(\"svg\"),ee(i.$$.fragment),r=de();for(let d=0;d<o.length;d+=1)o[d].c();l=de(),c&&c.c(),S(n,\"class\",\"svelte-flow__marker\"),S(e,\"class\",\"svelte-flow__edges\")},m(d,h){q(d,e,h),G(e,n),x(i,n,null),G(e,r);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(e,null);G(e,l),c&&c.m(e,null),a=!0},p(d,[h]){h&3&&(u=We(d[0]),Te(),o=rr(o,h,f,1,d,u,s,e,ir,vs,l,_s),Me()),d[0].length>0?c?(c.p(d,h),h&1&&P(c,1)):(c=ks(d),c.c(),P(c,1),c.m(e,null)):c&&(Te(),R(c,1,1,()=>{c=null}),Me())},i(d){if(!a){P(i.$$.fragment,d);for(let h=0;h<u.length;h+=1)P(o[h]);P(c),a=!0}},o(d){R(i.$$.fragment,d);for(let h=0;h<o.length;h+=1)R(o[h]);R(c),a=!1},d(d){d&&B(e),$(i);for(let h=0;h<o.length;h+=1)o[h].d();c&&c.d()}}}function O0(t,e,n){let i,r,o,{defaultEdgeOptions:s}=e;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=Ye();j(t,l,m=>n(0,i=m)),j(t,a,m=>n(2,o=m)),j(t,f,m=>n(1,r=m)),tr(()=>{s&&u(s)});function c(m){ke.call(this,t,m)}function d(m){ke.call(this,t,m)}function h(m){ke.call(this,t,m)}function g(m){ke.call(this,t,m)}const y=()=>{Ni(a,o=!0,o)},p=()=>{Ni(a,o=!1,o)};return t.$$set=m=>{\"defaultEdgeOptions\"in m&&n(6,s=m.defaultEdgeOptions)},[i,r,o,l,a,f,s,c,d,h,g,y,p]}class I0 extends ue{constructor(e){super(),ae(this,e,O0,C0,ce,{defaultEdgeOptions:6})}}function Ss(t){let e;return{c(){e=ne(\"div\"),S(e,\"class\",\"svelte-flow__selection svelte-1iugwpu\"),se(e,\"width\",typeof t[2]==\"string\"?t[2]:`${t[2]}px`),se(e,\"height\",typeof t[3]==\"string\"?t[3]:`${t[3]}px`),se(e,\"transform\",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){q(n,e,i)},p(n,i){i&4&&se(e,\"width\",typeof n[2]==\"string\"?n[2]:`${n[2]}px`),i&8&&se(e,\"height\",typeof n[3]==\"string\"?n[3]:`${n[3]}px`),i&3&&se(e,\"transform\",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&B(e)}}}function T0(t){let e,n=t[4]&&Ss(t);return{c(){n&&n.c(),e=Xe()},m(i,r){n&&n.m(i,r),q(i,e,r)},p(i,[r]){i[4]?n?n.p(i,r):(n=Ss(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(i){i&&B(e),n&&n.d(i)}}}function M0(t,e,n){let{x:i=0}=e,{y:r=0}=e,{width:o=0}=e,{height:s=0}=e,{isVisible:l=!0}=e;return t.$$set=a=>{\"x\"in a&&n(0,i=a.x),\"y\"in a&&n(1,r=a.y),\"width\"in a&&n(2,o=a.width),\"height\"in a&&n(3,s=a.height),\"isVisible\"in a&&n(4,l=a.isVisible)},[i,r,o,s,l]}class za extends ue{constructor(e){super(),ae(this,e,M0,T0,ce,{x:0,y:1,width:2,height:3,isVisible:4})}}function A0(t){var i,r,o,s;let e,n;return e=new za({props:{isVisible:!!(t[0]&&t[1]===\"user\"),width:(i=t[0])==null?void 0:i.width,height:(r=t[0])==null?void 0:r.height,x:(o=t[0])==null?void 0:o.x,y:(s=t[0])==null?void 0:s.y}}),{c(){ee(e.$$.fragment)},m(l,a){x(e,l,a),n=!0},p(l,[a]){var f,c,d,h;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]===\"user\")),a&1&&(u.width=(f=l[0])==null?void 0:f.width),a&1&&(u.height=(c=l[0])==null?void 0:c.height),a&1&&(u.x=(d=l[0])==null?void 0:d.x),a&1&&(u.y=(h=l[0])==null?void 0:h.y),e.$set(u)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function P0(t,e,n){let i,r;const{selectionRect:o,selectionRectMode:s}=Ye();return j(t,o,l=>n(0,i=l)),j(t,s,l=>n(1,r=l)),[i,r,o,s]}class N0 extends ue{constructor(e){super(),ae(this,e,P0,A0,ce,{})}}function Es(t){let e,n,i,r,o;return n=new za({props:{width:\"100%\",height:\"100%\",x:0,y:0}}),{c(){e=ne(\"div\"),ee(n.$$.fragment),S(e,\"class\",\"selection-wrapper nopan svelte-5pxri\"),se(e,\"width\",t[1].width+\"px\"),se(e,\"height\",t[1].height+\"px\"),se(e,\"transform\",\"translate(\"+t[1].x+\"px, \"+t[1].y+\"px)\"),S(e,\"role\",\"button\"),S(e,\"tabindex\",\"-1\")},m(s,l){q(s,e,l),x(n,e,null),i=!0,r||(o=[Ue(Ra.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),be(e,\"contextmenu\",t[7]),be(e,\"click\",t[8]),be(e,\"keyup\",F0)],r=!0)},p(s,l){(!i||l&2)&&se(e,\"width\",s[1].width+\"px\"),(!i||l&2)&&se(e,\"height\",s[1].height+\"px\"),(!i||l&2)&&se(e,\"transform\",\"translate(\"+s[1].x+\"px, \"+s[1].y+\"px)\")},i(s){i||(P(n.$$.fragment,s),i=!0)},o(s){R(n.$$.fragment,s),i=!1},d(s){s&&B(e),$(n),r=!1,Ke(o)}}}function D0(t){let e=t[0]===\"nodes\"&&t[1]&&pn(t[1].x)&&pn(t[1].y),n,i,r=e&&Es(t);return{c(){r&&r.c(),n=Xe()},m(o,s){r&&r.m(o,s),q(o,n,s),i=!0},p(o,[s]){s&3&&(e=o[0]===\"nodes\"&&o[1]&&pn(o[1].x)&&pn(o[1].y)),e?r?(r.p(o,s),s&3&&P(r,1)):(r=Es(o),r.c(),P(r,1),r.m(n.parentNode,n)):r&&(Te(),R(r,1,1,()=>{r=null}),Me())},i(o){i||(P(r),i=!0)},o(o){R(r),i=!1},d(o){o&&B(n),r&&r.d(o)}}}const F0=()=>{};function R0(t,e,n){let i,r,o;const s=Ye(),{selectionRectMode:l,nodes:a,nodeLookup:u}=s;j(t,l,m=>n(0,o=m)),j(t,a,m=>n(9,i=m)),j(t,u,m=>n(10,r=m));const f=ei();let c=null;function d(m){const _=i.filter(b=>b.selected);f(\"selectioncontextmenu\",{nodes:_,event:m})}function h(m){const _=i.filter(b=>b.selected);f(\"selectionclick\",{nodes:_,event:m})}const g=(m,_,b,v)=>{f(\"nodedrag\",{event:m,targetNode:null,nodes:v})},y=(m,_,b,v)=>{f(\"nodedragstart\",{event:m,targetNode:null,nodes:v})},p=(m,_,b,v)=>{f(\"nodedragstop\",{event:m,targetNode:null,nodes:v})};return t.$$.update=()=>{t.$$.dirty&1537&&o===\"nodes\"&&n(1,c=lo(r,{filter:m=>!!m.selected}))},[o,c,s,l,a,u,f,d,h,i,r,g,y,p]}class z0 extends ue{constructor(e){super(),ae(this,e,R0,D0,ce,{})}}function kt(t,e){let{enabled:n=!0,trigger:i,type:r=\"keydown\"}=e;function o(s){const l=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of l){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:c,key:d,callback:h,preventDefault:g,enabled:y}=f;if(y){if(c.length&&!(Array.isArray(c)?c:[c]).map(_=>typeof _==\"string\"?[_]:_).some(_=>_.every(b=>a[b])))continue;if(s.key===d){g&&s.preventDefault();const p={node:t,trigger:f,originalEvent:s};t.dispatchEvent(new CustomEvent(\"shortcut\",{detail:p})),h==null||h(p)}}}}return n&&t.addEventListener(r,o),{update:s=>{const{enabled:l=!0,type:a=\"keydown\"}=s;n&&(!l||r!==a)?t.removeEventListener(r,o):!n&&l&&t.addEventListener(a,o),n=l,r=a,i=s.trigger},destroy:()=>{t.removeEventListener(r,o)}}}function L0(t){let e,n,i,r,o,s,l,a,u,f,c,d;return{c:le,m(h,g){c||(d=[Ue(e=kt.call(null,window,{trigger:qe(t[0],t[11]),type:\"keydown\"})),Ue(n=kt.call(null,window,{trigger:qe(t[0],t[12]),type:\"keyup\"})),Ue(i=kt.call(null,window,{trigger:qe(t[1],t[13]),type:\"keydown\"})),Ue(r=kt.call(null,window,{trigger:qe(t[1],t[14]),type:\"keyup\"})),Ue(o=kt.call(null,window,{trigger:qe(t[2],t[15]),type:\"keydown\"})),Ue(s=kt.call(null,window,{trigger:qe(t[2],t[16]),type:\"keyup\"})),Ue(l=kt.call(null,window,{trigger:qe(t[3],t[17]),type:\"keydown\"})),Ue(a=kt.call(null,window,{trigger:qe(t[3],t[18]),type:\"keyup\"})),Ue(u=kt.call(null,window,{trigger:qe(t[4],t[19]),type:\"keydown\"})),Ue(f=kt.call(null,window,{trigger:qe(t[4],t[20]),type:\"keyup\"})),be(window,\"blur\",t[10]),be(window,\"contextmenu\",t[10])],c=!0)},p(h,[g]){e&&Fe(e.update)&&g&1&&e.update.call(null,{trigger:qe(h[0],h[11]),type:\"keydown\"}),n&&Fe(n.update)&&g&1&&n.update.call(null,{trigger:qe(h[0],h[12]),type:\"keyup\"}),i&&Fe(i.update)&&g&2&&i.update.call(null,{trigger:qe(h[1],h[13]),type:\"keydown\"}),r&&Fe(r.update)&&g&2&&r.update.call(null,{trigger:qe(h[1],h[14]),type:\"keyup\"}),o&&Fe(o.update)&&g&4&&o.update.call(null,{trigger:qe(h[2],h[15]),type:\"keydown\"}),s&&Fe(s.update)&&g&4&&s.update.call(null,{trigger:qe(h[2],h[16]),type:\"keyup\"}),l&&Fe(l.update)&&g&8&&l.update.call(null,{trigger:qe(h[3],h[17]),type:\"keydown\"}),a&&Fe(a.update)&&g&8&&a.update.call(null,{trigger:qe(h[3],h[18]),type:\"keyup\"}),u&&Fe(u.update)&&g&16&&u.update.call(null,{trigger:qe(h[4],h[19]),type:\"keydown\"}),f&&Fe(f.update)&&g&16&&f.update.call(null,{trigger:qe(h[4],h[20]),type:\"keyup\"})},i:le,o:le,d(h){c=!1,Ke(d)}}}function La(t){return t!==null&&typeof t==\"object\"}function H0(t){return La(t)?t.modifier||[]:[]}function B0(t){return t==null?\"\":La(t)?t.key:t}function qe(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const r=B0(i);return{key:r,modifier:H0(i),enabled:r!==null,callback:e}})}function V0(t,e,n){let{selectionKey:i=\"Shift\"}=e,{multiSelectionKey:r=Ki()?\"Meta\":\"Control\"}=e,{deleteKey:o=\"Backspace\"}=e,{panActivationKey:s=\" \"}=e,{zoomActivationKey:l=Ki()?\"Meta\":\"Control\"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:c,zoomActivationKeyPressed:d,selectionRect:h}=Ye();function g(){h.set(null),a.set(!1),u.set(!1),f.set(!1),c.set(!1),d.set(!1)}const y=()=>a.set(!0),p=()=>a.set(!1),m=()=>u.set(!0),_=()=>u.set(!1),b=C=>{!(C.originalEvent.ctrlKey||C.originalEvent.metaKey||C.originalEvent.shiftKey)&&!kg(C.originalEvent)&&f.set(!0)},v=()=>f.set(!1),M=()=>c.set(!0),O=()=>c.set(!1),k=()=>d.set(!0),E=()=>d.set(!1);return t.$$set=C=>{\"selectionKey\"in C&&n(0,i=C.selectionKey),\"multiSelectionKey\"in C&&n(1,r=C.multiSelectionKey),\"deleteKey\"in C&&n(2,o=C.deleteKey),\"panActivationKey\"in C&&n(3,s=C.panActivationKey),\"zoomActivationKey\"in C&&n(4,l=C.zoomActivationKey)},[i,r,o,s,l,a,u,f,c,d,g,y,p,m,_,b,v,M,O,k,E]}class q0 extends ue{constructor(e){super(),ae(this,e,V0,L0,ce,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const W0=t=>({}),Cs=t=>({});function Os(t){let e,n,i,r;const o=t[10].connectionLine,s=rt(o,t,t[9],Cs);let l=!t[2]&&Is(t);return{c(){e=Ce(\"svg\"),n=Ce(\"g\"),s&&s.c(),l&&l.c(),S(n,\"class\",i=Ae([\"svelte-flow__connection\",t[3].status])),S(e,\"width\",t[4]),S(e,\"height\",t[5]),S(e,\"class\",\"svelte-flow__connectionline\"),S(e,\"style\",t[0])},m(a,u){q(a,e,u),G(e,n),s&&s.m(n,null),l&&l.m(n,null),r=!0},p(a,u){s&&s.p&&(!r||u&512)&&st(s,o,a,a[9],r?ot(o,a[9],u,W0):lt(a[9]),Cs),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=Is(a),l.c(),l.m(n,null)),(!r||u&8&&i!==(i=Ae([\"svelte-flow__connection\",a[3].status])))&&S(n,\"class\",i),(!r||u&16)&&S(e,\"width\",a[4]),(!r||u&32)&&S(e,\"height\",a[5]),(!r||u&1)&&S(e,\"style\",a[0])},i(a){r||(P(s,a),r=!0)},o(a){R(s,a),r=!1},d(a){a&&B(e),s&&s.d(a),l&&l.d()}}}function Is(t){let e,n;return{c(){e=Ce(\"path\"),S(e,\"d\",n=t[3].path),S(e,\"style\",t[1]),S(e,\"fill\",\"none\"),S(e,\"class\",\"svelte-flow__connection-path\")},m(i,r){q(i,e,r)},p(i,r){r&8&&n!==(n=i[3].path)&&S(e,\"d\",n),r&2&&S(e,\"style\",i[1])},d(i){i&&B(e)}}}function X0(t){let e,n,i=t[3].path&&Os(t);return{c(){i&&i.c(),e=Xe()},m(r,o){i&&i.m(r,o),q(r,e,o),n=!0},p(r,[o]){r[3].path?i?(i.p(r,o),o&8&&P(i,1)):(i=Os(r),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(Te(),R(i,1,1,()=>{i=null}),Me())},i(r){n||(P(i),n=!0)},o(r){R(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function Y0(t,e,n){let i,r,o,{$$slots:s={},$$scope:l}=e,{containerStyle:a=\"\"}=e,{style:u=\"\"}=e,{isCustomComponent:f=!1}=e;const{width:c,height:d,connection:h}=Ye();return j(t,c,g=>n(4,r=g)),j(t,d,g=>n(5,o=g)),j(t,h,g=>n(3,i=g)),t.$$set=g=>{\"containerStyle\"in g&&n(0,a=g.containerStyle),\"style\"in g&&n(1,u=g.style),\"isCustomComponent\"in g&&n(2,f=g.isCustomComponent),\"$$scope\"in g&&n(9,l=g.$$scope)},[a,u,f,i,r,o,c,d,h,l,s]}class K0 extends ue{constructor(e){super(),ae(this,e,Y0,X0,ce,{containerStyle:0,style:1,isCustomComponent:2})}}function J0(t){let e,n,i;const r=t[8].default,o=rt(r,t,t[7],null);let s=[{class:n=Ae([\"svelte-flow__panel\",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let a=0;a<s.length;a+=1)l=_e(l,s[a]);return{c(){e=ne(\"div\"),o&&o.c(),On(e,l),se(e,\"pointer-events\",t[3]?\"none\":\"\")},m(a,u){q(a,e,u),o&&o.m(e,null),i=!0},p(a,[u]){o&&o.p&&(!i||u&128)&&st(o,r,a,a[7],i?ot(r,a[7],u,null):lt(a[7]),null),On(e,l=ct(s,[(!i||u&6&&n!==(n=Ae([\"svelte-flow__panel\",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),se(e,\"pointer-events\",a[3]?\"none\":\"\")},i(a){i||(P(o,a),i=!0)},o(a){R(o,a),i=!1},d(a){a&&B(e),o&&o.d(a)}}}function U0(t,e,n){let i;const r=[\"position\",\"style\",\"class\"];let o=Re(e,r),s,{$$slots:l={},$$scope:a}=e,{position:u=\"top-right\"}=e,{style:f=void 0}=e,{class:c=void 0}=e;const{selectionRectMode:d}=Ye();return j(t,d,h=>n(3,s=h)),t.$$set=h=>{e=_e(_e({},e),mt(h)),n(5,o=Re(e,r)),\"position\"in h&&n(6,u=h.position),\"style\"in h&&n(0,f=h.style),\"class\"in h&&n(1,c=h.class),\"$$scope\"in h&&n(7,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split(\"-\"))},[f,c,i,s,d,o,u,a,l]}class ho extends ue{constructor(e){super(),ae(this,e,U0,J0,ce,{position:6,style:0,class:1})}}function Ts(t){let e,n;return e=new ho({props:{position:t[1],class:\"svelte-flow__attribution\",\"data-message\":\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\",$$slots:{default:[j0]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.position=i[1]),r&4&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function j0(t){let e;return{c(){e=ne(\"a\"),e.textContent=\"Svelte Flow\",S(e,\"href\",\"https://svelteflow.dev\"),S(e,\"target\",\"_blank\"),S(e,\"rel\",\"noopener noreferrer\"),S(e,\"aria-label\",\"Svelte Flow attribution\")},m(n,i){q(n,e,i)},p:le,d(n){n&&B(e)}}}function G0(t){var r;let e,n,i=!((r=t[0])!=null&&r.hideAttribution)&&Ts(t);return{c(){i&&i.c(),e=Xe()},m(o,s){i&&i.m(o,s),q(o,e,s),n=!0},p(o,[s]){var l;(l=o[0])!=null&&l.hideAttribution?i&&(Te(),R(i,1,1,()=>{i=null}),Me()):i?(i.p(o,s),s&1&&P(i,1)):(i=Ts(o),i.c(),P(i,1),i.m(e.parentNode,e))},i(o){n||(P(i),n=!0)},o(o){R(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function Z0(t,e,n){let{proOptions:i=void 0}=e,{position:r=\"bottom-right\"}=e;return t.$$set=o=>{\"proOptions\"in o&&n(0,i=o.proOptions),\"position\"in o&&n(1,r=o.position)},[i,r]}class Q0 extends ue{constructor(e){super(),ae(this,e,Z0,G0,ce,{proOptions:0,position:1})}}function Ms(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),r!==void 0&&t.setMaxZoom(r),o!==void 0&&t.setTranslateExtent(o)}const x0=t=>Object.keys(t);function $0(t,e){x0(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function ey(){return typeof window>\"u\"||!window.matchMedia?null:window.matchMedia(\"(prefers-color-scheme: dark)\")}function ty(t=\"light\"){return ut(\"light\",n=>{if(t!==\"system\"){n(t);return}const i=ey(),r=()=>n(i!=null&&i.matches?\"dark\":\"light\");return n(i!=null&&i.matches?\"dark\":\"light\"),i==null||i.addEventListener(\"change\",r),()=>{i==null||i.removeEventListener(\"change\",r)}})}const ny=t=>({}),As=t=>({slot:\"connectionLine\"});function iy(t){let e;const n=t[71].connectionLine,i=rt(n,t,t[95],As);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[3]&4)&&st(i,n,r,r[95],e?ot(n,r[95],o,ny):lt(r[95]),As)},i(r){e||(P(i,r),e=!0)},o(r){R(i,r),e=!1},d(r){i&&i.d(r)}}}function ry(t){let e,n,i,r,o,s,l,a,u,f,c,d;return e=new I0({props:{defaultEdgeOptions:t[21]}}),e.$on(\"edgeclick\",t[74]),e.$on(\"edgecontextmenu\",t[75]),e.$on(\"edgemouseenter\",t[76]),e.$on(\"edgemouseleave\",t[77]),i=new K0({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[32].connectionLine,$$slots:{connectionLine:[iy]},$$scope:{ctx:t}}}),u=new c0({}),u.$on(\"nodeclick\",t[78]),u.$on(\"nodemouseenter\",t[79]),u.$on(\"nodemousemove\",t[80]),u.$on(\"nodemouseleave\",t[81]),u.$on(\"nodedragstart\",t[82]),u.$on(\"nodedrag\",t[83]),u.$on(\"nodedragstop\",t[84]),u.$on(\"nodecontextmenu\",t[85]),c=new z0({}),c.$on(\"selectionclick\",t[86]),c.$on(\"selectioncontextmenu\",t[87]),c.$on(\"nodedragstart\",t[88]),c.$on(\"nodedrag\",t[89]),c.$on(\"nodedragstop\",t[90]),{c(){ee(e.$$.fragment),n=de(),ee(i.$$.fragment),r=de(),o=ne(\"div\"),s=de(),l=ne(\"div\"),a=de(),ee(u.$$.fragment),f=de(),ee(c.$$.fragment),S(o,\"class\",\"svelte-flow__edgelabel-renderer\"),S(l,\"class\",\"svelte-flow__viewport-portal\")},m(h,g){x(e,h,g),q(h,n,g),x(i,h,g),q(h,r,g),q(h,o,g),q(h,s,g),q(h,l,g),q(h,a,g),x(u,h,g),q(h,f,g),x(c,h,g),d=!0},p(h,g){const y={};g[0]&2097152&&(y.defaultEdgeOptions=h[21]),e.$set(y);const p={};g[0]&128&&(p.containerStyle=h[7]),g[0]&64&&(p.style=h[6]),g[1]&2&&(p.isCustomComponent=h[32].connectionLine),g[3]&4&&(p.$$scope={dirty:g,ctx:h}),i.$set(p)},i(h){d||(P(e.$$.fragment,h),P(i.$$.fragment,h),P(u.$$.fragment,h),P(c.$$.fragment,h),d=!0)},o(h){R(e.$$.fragment,h),R(i.$$.fragment,h),R(u.$$.fragment,h),R(c.$$.fragment,h),d=!1},d(h){h&&(B(n),B(r),B(o),B(s),B(l),B(a),B(f)),$(e,h),$(i,h),$(u,h),$(c,h)}}}function oy(t){let e,n,i,r;return e=new i0({props:{$$slots:{default:[ry]},$$scope:{ctx:t}}}),i=new N0({}),{c(){ee(e.$$.fragment),n=de(),ee(i.$$.fragment)},m(o,s){x(e,o,s),q(o,n,s),x(i,o,s),r=!0},p(o,s){const l={};s[0]&2097344|s[1]&2|s[3]&4&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){r||(P(e.$$.fragment,o),P(i.$$.fragment,o),r=!0)},o(o){R(e.$$.fragment,o),R(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(e,o),$(i,o)}}}function sy(t){let e,n;return e=new e0({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[oy]},$$scope:{ctx:t}}}),e.$on(\"paneclick\",t[91]),e.$on(\"panecontextmenu\",t[92]),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&131072&&(o.panOnDrag=i[17]===void 0?!0:i[17]),r[0]&262144&&(o.selectionOnDrag=i[18]),r[0]&2097344|r[1]&2|r[3]&4&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function ly(t){let e,n,i,r,o,s,l,a,u,f,c,d;n=new q0({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),r=new Qm({props:{initialViewport:t[29],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?Et.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],$$slots:{default:[sy]},$$scope:{ctx:t}}}),s=new Q0({props:{proOptions:t[20],position:t[19]}});const h=t[71].default,g=rt(h,t,t[95],null);let y=[{style:t[22]},{class:a=Ae([\"svelte-flow\",t[23],t[28]])},{\"data-testid\":\"svelte-flow__wrapper\"},t[31],{role:\"application\"}],p={};for(let m=0;m<y.length;m+=1)p=_e(p,y[m]);return{c(){e=ne(\"div\"),ee(n.$$.fragment),i=de(),ee(r.$$.fragment),o=de(),ee(s.$$.fragment),l=de(),g&&g.c(),On(e,p),Ri(()=>t[94].call(e)),he(e,\"svelte-12wlba6\",!0)},m(m,_){q(m,e,_),x(n,e,null),G(e,i),x(r,e,null),G(e,o),x(s,e,null),G(e,l),g&&g.m(e,null),t[93](e),u=yf(e,t[94].bind(e)),f=!0,c||(d=[be(e,\"dragover\",t[72]),be(e,\"drop\",t[73])],c=!0)},p(m,_){const b={};_[0]&2&&(b.selectionKey=m[1]),_[0]&32&&(b.deleteKey=m[5]),_[0]&4&&(b.panActivationKey=m[2]),_[0]&8&&(b.multiSelectionKey=m[3]),_[0]&16&&(b.zoomActivationKey=m[4]),n.$set(b);const v={};_[0]&256&&(v.onMoveStart=m[8]),_[0]&512&&(v.onMove=m[9]),_[0]&1024&&(v.onMoveEnd=m[10]),_[0]&2048&&(v.panOnScrollMode=m[11]===void 0?Et.Free:m[11]),_[0]&4096&&(v.preventScrolling=m[12]===void 0?!0:m[12]),_[0]&8192&&(v.zoomOnScroll=m[13]===void 0?!0:m[13]),_[0]&16384&&(v.zoomOnDoubleClick=m[14]===void 0?!0:m[14]),_[0]&32768&&(v.zoomOnPinch=m[15]===void 0?!0:m[15]),_[0]&65536&&(v.panOnScroll=m[16]===void 0?!1:m[16]),_[0]&131072&&(v.panOnDrag=m[17]===void 0?!0:m[17]),_[0]&2490560|_[1]&2|_[3]&4&&(v.$$scope={dirty:_,ctx:m}),r.$set(v);const M={};_[0]&1048576&&(M.proOptions=m[20]),_[0]&524288&&(M.position=m[19]),s.$set(M),g&&g.p&&(!f||_[3]&4)&&st(g,h,m,m[95],f?ot(h,m[95],_,null):lt(m[95]),null),On(e,p=ct(y,[(!f||_[0]&4194304)&&{style:m[22]},(!f||_[0]&276824064&&a!==(a=Ae([\"svelte-flow\",m[23],m[28]])))&&{class:a},{\"data-testid\":\"svelte-flow__wrapper\"},_[1]&1&&m[31],{role:\"application\"}])),he(e,\"svelte-12wlba6\",!0)},i(m){f||(P(n.$$.fragment,m),P(r.$$.fragment,m),P(s.$$.fragment,m),P(g,m),f=!0)},o(m){R(n.$$.fragment,m),R(r.$$.fragment,m),R(s.$$.fragment,m),R(g,m),f=!1},d(m){m&&B(e),$(n),$(r),$(s),g&&g.d(m),t[93](null),u(),c=!1,Ke(d)}}}function ay(t,e,n){let i;const r=[\"id\",\"nodes\",\"edges\",\"fitView\",\"fitViewOptions\",\"minZoom\",\"maxZoom\",\"initialViewport\",\"viewport\",\"nodeTypes\",\"edgeTypes\",\"selectionKey\",\"selectionMode\",\"panActivationKey\",\"multiSelectionKey\",\"zoomActivationKey\",\"nodesDraggable\",\"nodesConnectable\",\"nodeDragThreshold\",\"elementsSelectable\",\"snapGrid\",\"deleteKey\",\"connectionRadius\",\"connectionLineType\",\"connectionMode\",\"connectionLineStyle\",\"connectionLineContainerStyle\",\"onMoveStart\",\"onMove\",\"onMoveEnd\",\"isValidConnection\",\"translateExtent\",\"onlyRenderVisibleElements\",\"panOnScrollMode\",\"preventScrolling\",\"zoomOnScroll\",\"zoomOnDoubleClick\",\"zoomOnPinch\",\"panOnScroll\",\"panOnDrag\",\"selectionOnDrag\",\"autoPanOnConnect\",\"autoPanOnNodeDrag\",\"onerror\",\"ondelete\",\"onedgecreate\",\"attributionPosition\",\"proOptions\",\"defaultEdgeOptions\",\"width\",\"height\",\"colorMode\",\"onconnect\",\"onconnectstart\",\"onconnectend\",\"onbeforedelete\",\"oninit\",\"defaultMarkerColor\",\"style\",\"class\"];let o=Re(e,r),s,l,a=le,u=()=>(a(),a=Kn(E,I=>n(96,l=I)),E),f,c=le,d=()=>(c(),c=Kn(i,I=>n(28,f=I)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c());let{$$slots:h={},$$scope:g}=e;const y=df(h);let{id:p=\"1\"}=e,{nodes:m}=e,{edges:_}=e,{fitView:b=void 0}=e,{fitViewOptions:v=void 0}=e,{minZoom:M=void 0}=e,{maxZoom:O=void 0}=e,{initialViewport:k=void 0}=e,{viewport:E=void 0}=e;u();let{nodeTypes:C=void 0}=e,{edgeTypes:D=void 0}=e,{selectionKey:z=void 0}=e,{selectionMode:X=void 0}=e,{panActivationKey:A=void 0}=e,{multiSelectionKey:w=void 0}=e,{zoomActivationKey:N=void 0}=e,{nodesDraggable:T=void 0}=e,{nodesConnectable:F=void 0}=e,{nodeDragThreshold:V=void 0}=e,{elementsSelectable:K=void 0}=e,{snapGrid:W=void 0}=e,{deleteKey:U=void 0}=e,{connectionRadius:H=void 0}=e,{connectionLineType:oe=void 0}=e,{connectionMode:ie=Yt.Strict}=e,{connectionLineStyle:pe=\"\"}=e,{connectionLineContainerStyle:Se=\"\"}=e,{onMoveStart:L=void 0}=e,{onMove:ve=void 0}=e,{onMoveEnd:Oe=void 0}=e,{isValidConnection:Ee=void 0}=e,{translateExtent:Ne=void 0}=e,{onlyRenderVisibleElements:De=void 0}=e,{panOnScrollMode:Be=Et.Free}=e,{preventScrolling:J=!0}=e,{zoomOnScroll:Ve=!0}=e,{zoomOnDoubleClick:Ie=!0}=e,{zoomOnPinch:It=!0}=e,{panOnScroll:Tt=!1}=e,{panOnDrag:Mt=!0}=e,{selectionOnDrag:je=void 0}=e,{autoPanOnConnect:vt=!0}=e,{autoPanOnNodeDrag:te=!0}=e,{onerror:zt=void 0}=e,{ondelete:Lt=void 0}=e,{onedgecreate:Ut=void 0}=e,{attributionPosition:Y=void 0}=e,{proOptions:yt=void 0}=e,{defaultEdgeOptions:Z=void 0}=e,{width:Qe=void 0}=e,{height:et=void 0}=e,{colorMode:at=\"light\"}=e,{onconnect:rn=void 0}=e,{onconnectstart:on=void 0}=e,{onconnectend:sn=void 0}=e,{onbeforedelete:ln=void 0}=e,{oninit:Ht=void 0}=e,{defaultMarkerColor:an=\"#b1b1b7\"}=e,{style:Eo=void 0}=e,{class:Co=void 0}=e,si,un,fn;const Hu=l||k,xe=wf(co)?Ye():Um({nodes:Q(m),edges:Q(_),width:Qe,height:et,fitView:b});tr(()=>(xe.width.set(un),xe.height.set(fn),xe.domNode.set(si),xe.syncNodeStores(m),xe.syncEdgeStores(_),xe.syncViewport(E),b!==void 0&&xe.fitViewOnInit.set(b),v&&xe.fitViewOptions.set(v),Ms(xe,{nodeTypes:C,edgeTypes:D,minZoom:M,maxZoom:O,translateExtent:Ne}),()=>{xe.reset()}));const{initialized:Oo}=xe;j(t,Oo,I=>n(70,s=I));let br=!1;function Bu(I){ke.call(this,t,I)}function Vu(I){ke.call(this,t,I)}function qu(I){ke.call(this,t,I)}function Wu(I){ke.call(this,t,I)}function Xu(I){ke.call(this,t,I)}function Yu(I){ke.call(this,t,I)}function Ku(I){ke.call(this,t,I)}function Ju(I){ke.call(this,t,I)}function Uu(I){ke.call(this,t,I)}function ju(I){ke.call(this,t,I)}function Gu(I){ke.call(this,t,I)}function Zu(I){ke.call(this,t,I)}function Qu(I){ke.call(this,t,I)}function xu(I){ke.call(this,t,I)}function $u(I){ke.call(this,t,I)}function ef(I){ke.call(this,t,I)}function tf(I){ke.call(this,t,I)}function nf(I){ke.call(this,t,I)}function rf(I){ke.call(this,t,I)}function of(I){ke.call(this,t,I)}function sf(I){ke.call(this,t,I)}function lf(I){In[I?\"unshift\":\"push\"](()=>{si=I,n(26,si)})}function af(){un=this.clientWidth,fn=this.clientHeight,n(24,un),n(25,fn)}return t.$$set=I=>{e=_e(_e({},e),mt(I)),n(31,o=Re(e,r)),\"id\"in I&&n(33,p=I.id),\"nodes\"in I&&n(34,m=I.nodes),\"edges\"in I&&n(35,_=I.edges),\"fitView\"in I&&n(36,b=I.fitView),\"fitViewOptions\"in I&&n(37,v=I.fitViewOptions),\"minZoom\"in I&&n(38,M=I.minZoom),\"maxZoom\"in I&&n(39,O=I.maxZoom),\"initialViewport\"in I&&n(40,k=I.initialViewport),\"viewport\"in I&&u(n(0,E=I.viewport)),\"nodeTypes\"in I&&n(41,C=I.nodeTypes),\"edgeTypes\"in I&&n(42,D=I.edgeTypes),\"selectionKey\"in I&&n(1,z=I.selectionKey),\"selectionMode\"in I&&n(43,X=I.selectionMode),\"panActivationKey\"in I&&n(2,A=I.panActivationKey),\"multiSelectionKey\"in I&&n(3,w=I.multiSelectionKey),\"zoomActivationKey\"in I&&n(4,N=I.zoomActivationKey),\"nodesDraggable\"in I&&n(44,T=I.nodesDraggable),\"nodesConnectable\"in I&&n(45,F=I.nodesConnectable),\"nodeDragThreshold\"in I&&n(46,V=I.nodeDragThreshold),\"elementsSelectable\"in I&&n(47,K=I.elementsSelectable),\"snapGrid\"in I&&n(48,W=I.snapGrid),\"deleteKey\"in I&&n(5,U=I.deleteKey),\"connectionRadius\"in I&&n(49,H=I.connectionRadius),\"connectionLineType\"in I&&n(50,oe=I.connectionLineType),\"connectionMode\"in I&&n(51,ie=I.connectionMode),\"connectionLineStyle\"in I&&n(6,pe=I.connectionLineStyle),\"connectionLineContainerStyle\"in I&&n(7,Se=I.connectionLineContainerStyle),\"onMoveStart\"in I&&n(8,L=I.onMoveStart),\"onMove\"in I&&n(9,ve=I.onMove),\"onMoveEnd\"in I&&n(10,Oe=I.onMoveEnd),\"isValidConnection\"in I&&n(52,Ee=I.isValidConnection),\"translateExtent\"in I&&n(53,Ne=I.translateExtent),\"onlyRenderVisibleElements\"in I&&n(54,De=I.onlyRenderVisibleElements),\"panOnScrollMode\"in I&&n(11,Be=I.panOnScrollMode),\"preventScrolling\"in I&&n(12,J=I.preventScrolling),\"zoomOnScroll\"in I&&n(13,Ve=I.zoomOnScroll),\"zoomOnDoubleClick\"in I&&n(14,Ie=I.zoomOnDoubleClick),\"zoomOnPinch\"in I&&n(15,It=I.zoomOnPinch),\"panOnScroll\"in I&&n(16,Tt=I.panOnScroll),\"panOnDrag\"in I&&n(17,Mt=I.panOnDrag),\"selectionOnDrag\"in I&&n(18,je=I.selectionOnDrag),\"autoPanOnConnect\"in I&&n(55,vt=I.autoPanOnConnect),\"autoPanOnNodeDrag\"in I&&n(56,te=I.autoPanOnNodeDrag),\"onerror\"in I&&n(57,zt=I.onerror),\"ondelete\"in I&&n(58,Lt=I.ondelete),\"onedgecreate\"in I&&n(59,Ut=I.onedgecreate),\"attributionPosition\"in I&&n(19,Y=I.attributionPosition),\"proOptions\"in I&&n(20,yt=I.proOptions),\"defaultEdgeOptions\"in I&&n(21,Z=I.defaultEdgeOptions),\"width\"in I&&n(60,Qe=I.width),\"height\"in I&&n(61,et=I.height),\"colorMode\"in I&&n(62,at=I.colorMode),\"onconnect\"in I&&n(63,rn=I.onconnect),\"onconnectstart\"in I&&n(64,on=I.onconnectstart),\"onconnectend\"in I&&n(65,sn=I.onconnectend),\"onbeforedelete\"in I&&n(66,ln=I.onbeforedelete),\"oninit\"in I&&n(67,Ht=I.oninit),\"defaultMarkerColor\"in I&&n(68,an=I.defaultMarkerColor),\"style\"in I&&n(22,Eo=I.style),\"class\"in I&&n(23,Co=I.class),\"$$scope\"in I&&n(95,g=I.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&50331648&&un!==void 0&&fn!==void 0&&(xe.width.set(un),xe.height.set(fn)),t.$$.dirty[2]&416&&!br&&s&&(Ht==null||Ht(),n(69,br=!0)),t.$$.dirty[1]&532672516|t.$$.dirty[2]&94&&$0(xe,{flowId:p,connectionLineType:oe,connectionRadius:H,selectionMode:X,snapGrid:W,defaultMarkerColor:an,nodesDraggable:T,nodesConnectable:F,elementsSelectable:K,onlyRenderVisibleElements:De,isValidConnection:Ee,autoPanOnConnect:vt,autoPanOnNodeDrag:te,onerror:zt,ondelete:Lt,onedgecreate:Ut,connectionMode:ie,nodeDragThreshold:V,onconnect:rn,onconnectstart:on,onconnectend:sn,onbeforedelete:ln}),t.$$.dirty[1]&4197760&&Ms(xe,{nodeTypes:C,edgeTypes:D,minZoom:M,maxZoom:O,translateExtent:Ne}),t.$$.dirty[2]&1&&d(n(27,i=ty(at)))},[E,z,A,w,N,U,pe,Se,L,ve,Oe,Be,J,Ve,Ie,It,Tt,Mt,je,Y,yt,Z,Eo,Co,un,fn,si,i,f,Hu,Oo,o,y,p,m,_,b,v,M,O,k,C,D,X,T,F,V,K,W,H,oe,ie,Ee,Ne,De,vt,te,zt,Lt,Ut,Qe,et,at,rn,on,sn,ln,Ht,an,br,s,h,Bu,Vu,qu,Wu,Xu,Yu,Ku,Ju,Uu,ju,Gu,Zu,Qu,xu,$u,ef,tf,nf,rf,of,sf,lf,af,g]}class uy extends ue{constructor(e){super(),ae(this,e,ay,ly,ce,{id:33,nodes:34,edges:35,fitView:36,fitViewOptions:37,minZoom:38,maxZoom:39,initialViewport:40,viewport:0,nodeTypes:41,edgeTypes:42,selectionKey:1,selectionMode:43,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:44,nodesConnectable:45,nodeDragThreshold:46,elementsSelectable:47,snapGrid:48,deleteKey:5,connectionRadius:49,connectionLineType:50,connectionMode:51,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:52,translateExtent:53,onlyRenderVisibleElements:54,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:55,autoPanOnNodeDrag:56,onerror:57,ondelete:58,onedgecreate:59,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:60,height:61,colorMode:62,onconnect:63,onconnectstart:64,onconnectend:65,onbeforedelete:66,oninit:67,defaultMarkerColor:68,style:22,class:23},null,[-1,-1,-1,-1])}}const fy=t=>({}),Ps=t=>({class:\"button-svg\"});function cy(t){let e,n,i,r,o;const s=t[8].default,l=rt(s,t,t[7],Ps);let a=[{type:\"button\"},{class:n=Ae([\"svelte-flow__controls-button\",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=_e(u,a[f]);return{c(){e=ne(\"button\"),l&&l.c(),On(e,u),se(e,\"--xy-controls-button-background-color-props\",t[1]),se(e,\"--xy-controls-button-background-color-hover-props\",t[2]),se(e,\"--xy-controls-button-color-props\",t[3]),se(e,\"--xy-controls-button-color-hover-props\",t[4]),se(e,\"--xy-controls-button-border-color-props\",t[5])},m(f,c){q(f,e,c),l&&l.m(e,null),e.autofocus&&e.focus(),i=!0,r||(o=be(e,\"click\",t[9]),r=!0)},p(f,[c]){l&&l.p&&(!i||c&128)&&st(l,s,f,f[7],i?ot(s,f[7],c,fy):lt(f[7]),Ps),On(e,u=ct(a,[{type:\"button\"},(!i||c&1&&n!==(n=Ae([\"svelte-flow__controls-button\",f[0]])))&&{class:n},c&64&&f[6]])),se(e,\"--xy-controls-button-background-color-props\",f[1]),se(e,\"--xy-controls-button-background-color-hover-props\",f[2]),se(e,\"--xy-controls-button-color-props\",f[3]),se(e,\"--xy-controls-button-color-hover-props\",f[4]),se(e,\"--xy-controls-button-border-color-props\",f[5])},i(f){i||(P(l,f),i=!0)},o(f){R(l,f),i=!1},d(f){f&&B(e),l&&l.d(f),r=!1,o()}}}function dy(t,e,n){const i=[\"class\"];let r=Re(e,i),{$$slots:o={},$$scope:s}=e,{class:l=void 0}=e,a,u,f,c,d;function h(g){ke.call(this,t,g)}return t.$$set=g=>{e=_e(_e({},e),mt(g)),n(6,r=Re(e,i)),\"class\"in g&&n(0,l=g.class),\"$$scope\"in g&&n(7,s=g.$$scope)},[l,a,u,f,c,d,r,s,o,h]}class ji extends ue{constructor(e){super(),ae(this,e,dy,cy,ce,{class:0})}}function hy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),S(n,\"d\",\"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\"),S(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),S(e,\"viewBox\",\"0 0 32 32\")},m(i,r){q(i,e,r),G(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class gy extends ue{constructor(e){super(),ae(this,e,null,hy,ce,{})}}function my(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),S(n,\"d\",\"M0 0h32v4.2H0z\"),S(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),S(e,\"viewBox\",\"0 0 32 5\")},m(i,r){q(i,e,r),G(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class yy extends ue{constructor(e){super(),ae(this,e,null,my,ce,{})}}function py(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),S(n,\"d\",\"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"),S(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),S(e,\"viewBox\",\"0 0 32 30\")},m(i,r){q(i,e,r),G(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class by extends ue{constructor(e){super(),ae(this,e,null,py,ce,{})}}function wy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),S(n,\"d\",\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"),S(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),S(e,\"viewBox\",\"0 0 25 32\")},m(i,r){q(i,e,r),G(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class _y extends ue{constructor(e){super(),ae(this,e,null,wy,ce,{})}}function vy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),S(n,\"d\",\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"),S(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),S(e,\"viewBox\",\"0 0 25 32\")},m(i,r){q(i,e,r),G(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class ky extends ue{constructor(e){super(),ae(this,e,null,vy,ce,{})}}const Sy=t=>({}),Ns=t=>({}),Ey=t=>({}),Ds=t=>({});function Fs(t){let e,n,i,r;const o=[{class:\"svelte-flow__controls-zoomin\"},{title:\"zoom in\"},{\"aria-label\":\"zoom in\"},{disabled:t[9]},t[17]];let s={$$slots:{default:[Cy]},$$scope:{ctx:t}};for(let u=0;u<o.length;u+=1)s=_e(s,o[u]);e=new ji({props:s}),e.$on(\"click\",t[18]);const l=[{class:\"svelte-flow__controls-zoomout\"},{title:\"zoom out\"},{\"aria-label\":\"zoom out\"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Oy]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)a=_e(a,l[u]);return i=new ji({props:a}),i.$on(\"click\",t[19]),{c(){ee(e.$$.fragment),n=de(),ee(i.$$.fragment)},m(u,f){x(e,u,f),q(u,n,f),x(i,u,f),r=!0},p(u,f){const c=f[0]&131584?ct(o,[o[0],o[1],o[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Ct(u[17])]):{};f[1]&32&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d=f[0]&132096?ct(l,[l[0],l[1],l[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Ct(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),i.$set(d)},i(u){r||(P(e.$$.fragment,u),P(i.$$.fragment,u),r=!0)},o(u){R(e.$$.fragment,u),R(i.$$.fragment,u),r=!1},d(u){u&&B(n),$(e,u),$(i,u)}}}function Cy(t){let e,n;return e=new gy({}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Oy(t){let e,n;return e=new yy({}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Rs(t){let e,n;const i=[{class:\"svelte-flow__controls-fitview\"},{title:\"fit view\"},{\"aria-label\":\"fit view\"},t[17]];let r={$$slots:{default:[Iy]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=_e(r,i[o]);return e=new ji({props:r}),e.$on(\"click\",t[20]),{c(){ee(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){const l=s[0]&131072?ct(i,[i[0],i[1],i[2],Ct(o[17])]):{};s[1]&32&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){R(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Iy(t){let e,n;return e=new by({}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function zs(t){let e,n;const i=[{class:\"svelte-flow__controls-interactive\"},{title:\"toggle interactivity\"},{\"aria-label\":\"toggle interactivity\"},t[17]];let r={$$slots:{default:[Ay]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=_e(r,i[o]);return e=new ji({props:r}),e.$on(\"click\",t[21]),{c(){ee(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){const l=s[0]&131072?ct(i,[i[0],i[1],i[2],Ct(o[17])]):{};s[0]&256|s[1]&32&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){R(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Ty(t){let e,n;return e=new _y({}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function My(t){let e,n;return e=new ky({}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Ay(t){let e,n,i,r;const o=[My,Ty],s=[];function l(a,u){return a[8]?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),i=Xe()},m(a,u){s[e].m(a,u),q(a,i,u),r=!0},p(a,u){let f=e;e=l(a),e!==f&&(Te(),R(s[f],1,1,()=>{s[f]=null}),Me(),n=s[e],n||(n=s[e]=o[e](a),n.c()),P(n,1),n.m(i.parentNode,i))},i(a){r||(P(n),r=!0)},o(a){R(n),r=!1},d(a){a&&B(i),s[e].d(a)}}}function Py(t){let e,n,i,r,o,s;const l=t[35].before,a=rt(l,t,t[36],Ds);let u=t[1]&&Fs(t),f=t[2]&&Rs(t),c=t[3]&&zs(t);const d=t[35].default,h=rt(d,t,t[36],null),g=t[35].after,y=rt(g,t,t[36],Ns);return{c(){a&&a.c(),e=de(),u&&u.c(),n=de(),f&&f.c(),i=de(),c&&c.c(),r=de(),h&&h.c(),o=de(),y&&y.c()},m(p,m){a&&a.m(p,m),q(p,e,m),u&&u.m(p,m),q(p,n,m),f&&f.m(p,m),q(p,i,m),c&&c.m(p,m),q(p,r,m),h&&h.m(p,m),q(p,o,m),y&&y.m(p,m),s=!0},p(p,m){a&&a.p&&(!s||m[1]&32)&&st(a,l,p,p[36],s?ot(l,p[36],m,Ey):lt(p[36]),Ds),p[1]?u?(u.p(p,m),m[0]&2&&P(u,1)):(u=Fs(p),u.c(),P(u,1),u.m(n.parentNode,n)):u&&(Te(),R(u,1,1,()=>{u=null}),Me()),p[2]?f?(f.p(p,m),m[0]&4&&P(f,1)):(f=Rs(p),f.c(),P(f,1),f.m(i.parentNode,i)):f&&(Te(),R(f,1,1,()=>{f=null}),Me()),p[3]?c?(c.p(p,m),m[0]&8&&P(c,1)):(c=zs(p),c.c(),P(c,1),c.m(r.parentNode,r)):c&&(Te(),R(c,1,1,()=>{c=null}),Me()),h&&h.p&&(!s||m[1]&32)&&st(h,d,p,p[36],s?ot(d,p[36],m,null):lt(p[36]),null),y&&y.p&&(!s||m[1]&32)&&st(y,g,p,p[36],s?ot(g,p[36],m,Sy):lt(p[36]),Ns)},i(p){s||(P(a,p),P(u),P(f),P(c),P(h,p),P(y,p),s=!0)},o(p){R(a,p),R(u),R(f),R(c),R(h,p),R(y,p),s=!1},d(p){p&&(B(e),B(n),B(i),B(r),B(o)),a&&a.d(p),u&&u.d(p),f&&f.d(p),c&&c.d(p),h&&h.d(p),y&&y.d(p)}}}function Ny(t){let e,n;return e=new ho({props:{class:Ae([\"svelte-flow__controls\",t[7],t[6]]),position:t[0],\"data-testid\":\"svelte-flow__controls\",\"aria-label\":t[4]??\"Svelte Flow controls\",style:t[5],$$slots:{default:[Py]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&192&&(o.class=Ae([\"svelte-flow__controls\",i[7],i[6]])),r[0]&1&&(o.position=i[0]),r[0]&16&&(o[\"aria-label\"]=i[4]??\"Svelte Flow controls\"),r[0]&32&&(o.style=i[5]),r[0]&1806|r[1]&32&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Dy(t,e,n){let i,r,o,s,l,a,u,f,c,d,{$$slots:h={},$$scope:g}=e,{position:y=\"bottom-left\"}=e,{showZoom:p=!0}=e,{showFitView:m=!0}=e,{showLock:_=!0}=e,{buttonBgColor:b=void 0}=e,{buttonBgColorHover:v=void 0}=e,{buttonColor:M=void 0}=e,{buttonColorHover:O=void 0}=e,{buttonBorderColor:k=void 0}=e,{ariaLabel:E=void 0}=e,{style:C=void 0}=e,{orientation:D=\"vertical\"}=e,{fitViewOptions:z=void 0}=e,{class:X=\"\"}=e;const{zoomIn:A,zoomOut:w,fitView:N,viewport:T,minZoom:F,maxZoom:V,nodesDraggable:K,nodesConnectable:W,elementsSelectable:U}=Ye();j(t,T,L=>n(30,a=L)),j(t,F,L=>n(31,u=L)),j(t,V,L=>n(29,l=L)),j(t,K,L=>n(34,d=L)),j(t,W,L=>n(33,c=L)),j(t,U,L=>n(32,f=L));const H={bgColor:b,bgColorHover:v,color:M,colorHover:O,borderColor:k},oe=()=>{A()},ie=()=>{w()},pe=()=>{N(z)},Se=()=>{n(8,i=!i),K.set(i),W.set(i),U.set(i)};return t.$$set=L=>{\"position\"in L&&n(0,y=L.position),\"showZoom\"in L&&n(1,p=L.showZoom),\"showFitView\"in L&&n(2,m=L.showFitView),\"showLock\"in L&&n(3,_=L.showLock),\"buttonBgColor\"in L&&n(22,b=L.buttonBgColor),\"buttonBgColorHover\"in L&&n(23,v=L.buttonBgColorHover),\"buttonColor\"in L&&n(24,M=L.buttonColor),\"buttonColorHover\"in L&&n(25,O=L.buttonColorHover),\"buttonBorderColor\"in L&&n(26,k=L.buttonBorderColor),\"ariaLabel\"in L&&n(4,E=L.ariaLabel),\"style\"in L&&n(5,C=L.style),\"orientation\"in L&&n(27,D=L.orientation),\"fitViewOptions\"in L&&n(28,z=L.fitViewOptions),\"class\"in L&&n(6,X=L.class),\"$$scope\"in L&&n(36,g=L.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=d||c||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,r=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,o=a.zoom>=l),t.$$.dirty[0]&134217728&&n(7,s=D===\"horizontal\"?\"horizontal\":\"vertical\")},[y,p,m,_,E,C,X,s,i,o,r,T,F,V,K,W,U,H,oe,ie,pe,Se,b,v,M,O,k,D,z,l,a,u,f,c,d,h,g]}class Fy extends ue{constructor(e){super(),ae(this,e,Dy,Ny,ce,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var qt;(function(t){t.Lines=\"lines\",t.Dots=\"dots\",t.Cross=\"cross\"})(qt||(qt={}));function Ry(t){let e,n;return{c(){e=Ce(\"circle\"),S(e,\"cx\",t[0]),S(e,\"cy\",t[0]),S(e,\"r\",t[0]),S(e,\"class\",n=Ae([\"svelte-flow__background-pattern\",\"dots\",t[1]]))},m(i,r){q(i,e,r)},p(i,[r]){r&1&&S(e,\"cx\",i[0]),r&1&&S(e,\"cy\",i[0]),r&1&&S(e,\"r\",i[0]),r&2&&n!==(n=Ae([\"svelte-flow__background-pattern\",\"dots\",i[1]]))&&S(e,\"class\",n)},i:le,o:le,d(i){i&&B(e)}}}function zy(t,e,n){let{radius:i=5}=e,{class:r=\"\"}=e;return t.$$set=o=>{\"radius\"in o&&n(0,i=o.radius),\"class\"in o&&n(1,r=o.class)},[i,r]}class Ly extends ue{constructor(e){super(),ae(this,e,zy,Ry,ce,{radius:0,class:1})}}function Hy(t){let e,n,i;return{c(){e=Ce(\"path\"),S(e,\"stroke-width\",t[0]),S(e,\"d\",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),S(e,\"class\",i=Ae([\"svelte-flow__background-pattern\",t[2],t[3]]))},m(r,o){q(r,e,o)},p(r,[o]){o&1&&S(e,\"stroke-width\",r[0]),o&2&&n!==(n=`M${r[1][0]/2} 0 V${r[1][1]} M0 ${r[1][1]/2} H${r[1][0]}`)&&S(e,\"d\",n),o&12&&i!==(i=Ae([\"svelte-flow__background-pattern\",r[2],r[3]]))&&S(e,\"class\",i)},i:le,o:le,d(r){r&&B(e)}}}function By(t,e,n){let{lineWidth:i=1}=e,{dimensions:r}=e,{variant:o=void 0}=e,{class:s=\"\"}=e;return t.$$set=l=>{\"lineWidth\"in l&&n(0,i=l.lineWidth),\"dimensions\"in l&&n(1,r=l.dimensions),\"variant\"in l&&n(2,o=l.variant),\"class\"in l&&n(3,s=l.class)},[i,r,o,s]}class Vy extends ue{constructor(e){super(),ae(this,e,By,Hy,ce,{lineWidth:0,dimensions:1,variant:2,class:3})}}function qy(t){let e,n;return e=new Vy({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&64&&(o.dimensions=i[6]),r&1&&(o.variant=i[0]),r&2&&(o.lineWidth=i[1]),r&16&&(o.class=i[4]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Wy(t){let e,n;return e=new Ly({props:{radius:t[7]/2,class:t[4]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&128&&(o.radius=i[7]/2),r&16&&(o.class=i[4]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Xy(t){let e,n,i,r,o,s,l,a,u,f,c,d,h;const g=[Wy,qy],y=[];function p(m,_){return m[14]?0:1}return i=p(t),r=y[i]=g[i](t),{c(){e=Ce(\"svg\"),n=Ce(\"pattern\"),r.c(),f=Ce(\"rect\"),S(n,\"id\",t[11]),S(n,\"x\",o=t[9].x%t[8][0]),S(n,\"y\",s=t[9].y%t[8][1]),S(n,\"width\",l=t[8][0]),S(n,\"height\",a=t[8][1]),S(n,\"patternUnits\",\"userSpaceOnUse\"),S(n,\"patternTransform\",u=`translate(-${t[10][0]},-${t[10][1]})`),S(f,\"x\",\"0\"),S(f,\"y\",\"0\"),S(f,\"width\",\"100%\"),S(f,\"height\",\"100%\"),S(f,\"fill\",c=`url(#${t[11]})`),S(e,\"class\",d=To(Ae([\"svelte-flow__background\",t[5]]))+\" svelte-1r7pe8d\"),S(e,\"data-testid\",\"svelte-flow__background\"),se(e,\"--xy-background-color-props\",t[2]),se(e,\"--xy-background-pattern-color-props\",t[3])},m(m,_){q(m,e,_),G(e,n),y[i].m(n,null),G(e,f),h=!0},p(m,[_]){r.p(m,_),(!h||_&2048)&&S(n,\"id\",m[11]),(!h||_&768&&o!==(o=m[9].x%m[8][0]))&&S(n,\"x\",o),(!h||_&768&&s!==(s=m[9].y%m[8][1]))&&S(n,\"y\",s),(!h||_&256&&l!==(l=m[8][0]))&&S(n,\"width\",l),(!h||_&256&&a!==(a=m[8][1]))&&S(n,\"height\",a),(!h||_&1024&&u!==(u=`translate(-${m[10][0]},-${m[10][1]})`))&&S(n,\"patternTransform\",u),(!h||_&2048&&c!==(c=`url(#${m[11]})`))&&S(f,\"fill\",c),(!h||_&32&&d!==(d=To(Ae([\"svelte-flow__background\",m[5]]))+\" svelte-1r7pe8d\"))&&S(e,\"class\",d),_&4&&se(e,\"--xy-background-color-props\",m[2]),_&8&&se(e,\"--xy-background-pattern-color-props\",m[3])},i(m){h||(P(r),h=!0)},o(m){R(r),h=!1},d(m){m&&B(e),y[i].d()}}}const Yy={[qt.Dots]:1,[qt.Lines]:1,[qt.Cross]:6};function Ky(t,e,n){let i,r,o,s,l,a,u,{id:f=void 0}=e,{variant:c=qt.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:g=1}=e,{bgColor:y=void 0}=e,{patternColor:p=void 0}=e,{patternClass:m=void 0}=e,{class:_=\"\"}=e;const{viewport:b,flowId:v}=Ye();j(t,b,C=>n(9,a=C)),j(t,v,C=>n(18,u=C));const M=h||Yy[c],O=c===qt.Dots,k=c===qt.Cross,E=Array.isArray(d)?d:[d,d];return t.$$set=C=>{\"id\"in C&&n(15,f=C.id),\"variant\"in C&&n(0,c=C.variant),\"gap\"in C&&n(16,d=C.gap),\"size\"in C&&n(17,h=C.size),\"lineWidth\"in C&&n(1,g=C.lineWidth),\"bgColor\"in C&&n(2,y=C.bgColor),\"patternColor\"in C&&n(3,p=C.patternColor),\"patternClass\"in C&&n(4,m=C.patternClass),\"class\"in C&&n(5,_=C.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||\"\"}`),t.$$.dirty&512&&n(8,r=[E[0]*a.zoom||1,E[1]*a.zoom||1]),t.$$.dirty&512&&n(7,o=M*a.zoom),t.$$.dirty&384&&n(6,s=k?[o,o]:r),t.$$.dirty&192&&n(10,l=O?[o/2,o/2]:[s[0]/2,s[1]/2])},[c,g,y,p,m,_,s,o,r,a,l,i,b,v,O,f,d,h,u]}class Jy extends ue{constructor(e){super(),ae(this,e,Ky,Xy,ce,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function Uy(t){let e,n,i;return{c(){e=Ce(\"rect\"),S(e,\"class\",n=Ae([\"svelte-flow__minimap-node\",t[10]])),S(e,\"x\",t[0]),S(e,\"y\",t[1]),S(e,\"rx\",t[4]),S(e,\"ry\",t[4]),S(e,\"width\",t[2]),S(e,\"height\",t[3]),S(e,\"style\",i=`${t[5]?`fill: ${t[5]};`:\"\"}${t[7]?`stroke: ${t[7]};`:\"\"}${t[8]?`stroke-width: ${t[8]};`:\"\"}`),S(e,\"shape-rendering\",t[6]),he(e,\"selected\",t[9])},m(r,o){q(r,e,o)},p(r,[o]){o&1024&&n!==(n=Ae([\"svelte-flow__minimap-node\",r[10]]))&&S(e,\"class\",n),o&1&&S(e,\"x\",r[0]),o&2&&S(e,\"y\",r[1]),o&16&&S(e,\"rx\",r[4]),o&16&&S(e,\"ry\",r[4]),o&4&&S(e,\"width\",r[2]),o&8&&S(e,\"height\",r[3]),o&416&&i!==(i=`${r[5]?`fill: ${r[5]};`:\"\"}${r[7]?`stroke: ${r[7]};`:\"\"}${r[8]?`stroke-width: ${r[8]};`:\"\"}`)&&S(e,\"style\",i),o&64&&S(e,\"shape-rendering\",r[6]),o&1536&&he(e,\"selected\",r[9])},i:le,o:le,d(r){r&&B(e)}}}function jy(t,e,n){let{x:i}=e,{y:r}=e,{width:o=0}=e,{height:s=0}=e,{borderRadius:l=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:c=2}=e,{selected:d=!1}=e,{class:h=\"\"}=e;return t.$$set=g=>{\"x\"in g&&n(0,i=g.x),\"y\"in g&&n(1,r=g.y),\"width\"in g&&n(2,o=g.width),\"height\"in g&&n(3,s=g.height),\"borderRadius\"in g&&n(4,l=g.borderRadius),\"color\"in g&&n(5,a=g.color),\"shapeRendering\"in g&&n(6,u=g.shapeRendering),\"strokeColor\"in g&&n(7,f=g.strokeColor),\"strokeWidth\"in g&&n(8,c=g.strokeWidth),\"selected\"in g&&n(9,d=g.selected),\"class\"in g&&n(10,h=g.class)},[i,r,o,s,l,a,u,f,c,d,h]}class Gy extends ue{constructor(e){super(),ae(this,e,jy,Uy,ce,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function Zy(t,e){const n=Kg({domNode:t,panZoom:e.panZoom,getTransform:()=>{const r=Q(e.viewport);return[r.x,r.y,r.zoom]},getViewScale:e.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}function Ls(t,e,n){const i=t.slice();i[55]=e[n];const r=i[20].get(i[55].id);return i[56]=r,i}function Tr(t){const e=t.slice(),n=Nn(e[56]).positionAbsolute;e[59]=n;const i=ri(e[56]);return e[60]=i,e}function Hs(t){let e,n,i=[],r=new Map,o,s,l,a,u,f,c,d=t[1]&&Bs(t),h=We(t[19]);const g=y=>y[55].id;for(let y=0;y<h.length;y+=1){let p=Ls(t,h,y),m=g(p);r.set(m,i[y]=qs(m,p))}return{c(){e=Ce(\"svg\"),d&&d.c(),n=Xe();for(let y=0;y<i.length;y+=1)i[y].c();o=Ce(\"path\"),S(o,\"class\",\"svelte-flow__minimap-mask\"),S(o,\"d\",s=\"M\"+(t[26]-t[15])+\",\"+(t[25]-t[15])+\"h\"+(t[24]+t[15]*2)+\"v\"+(t[23]+t[15]*2)+\"h\"+(-t[24]-t[15]*2)+`z\n      M`+t[18].x+\",\"+t[18].y+\"h\"+t[18].width+\"v\"+t[18].height+\"h\"+-t[18].width+\"z\"),S(o,\"fill-rule\",\"evenodd\"),S(o,\"pointer-events\",\"none\"),S(e,\"width\",t[17]),S(e,\"height\",t[16]),S(e,\"viewBox\",l=t[26]+\" \"+t[25]+\" \"+t[24]+\" \"+t[23]),S(e,\"class\",\"svelte-flow__minimap-svg\"),S(e,\"role\",\"img\"),S(e,\"aria-labelledby\",t[41]),se(e,\"--xy-minimap-mask-background-color-props\",t[5]),se(e,\"--xy-minimap-mask-stroke-color-props\",t[6]),se(e,\"--xy-minimap-mask-stroke-width-props\",t[7]?t[7]*t[14]:void 0)},m(y,p){q(y,e,p),d&&d.m(e,null),G(e,n);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);G(e,o),u=!0,f||(c=Ue(a=Zy.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(y,p){y[1]?d?d.p(y,p):(d=Bs(y),d.c(),d.m(e,n)):d&&(d.d(1),d=null),p[0]&1572876|p[1]&960&&(h=We(y[19]),Te(),i=rr(i,p,g,1,y,h,r,e,ir,qs,o,Ls),Me()),(!u||p[0]&126124032&&s!==(s=\"M\"+(y[26]-y[15])+\",\"+(y[25]-y[15])+\"h\"+(y[24]+y[15]*2)+\"v\"+(y[23]+y[15]*2)+\"h\"+(-y[24]-y[15]*2)+`z\n      M`+y[18].x+\",\"+y[18].y+\"h\"+y[18].width+\"v\"+y[18].height+\"h\"+-y[18].width+\"z\"))&&S(o,\"d\",s),(!u||p[0]&131072)&&S(e,\"width\",y[17]),(!u||p[0]&65536)&&S(e,\"height\",y[16]),(!u||p[0]&125829120&&l!==(l=y[26]+\" \"+y[25]+\" \"+y[24]+\" \"+y[23]))&&S(e,\"viewBox\",l),a&&Fe(a.update)&&p[0]&408948480&&a.update.call(null,{panZoom:y[27],viewport:y[31],getViewScale:y[42],translateExtent:y[28],width:y[22],height:y[21],inversePan:y[10],zoomStep:y[11],pannable:y[8],zoomable:y[9]}),p[0]&32&&se(e,\"--xy-minimap-mask-background-color-props\",y[5]),p[0]&64&&se(e,\"--xy-minimap-mask-stroke-color-props\",y[6]),p[0]&16512&&se(e,\"--xy-minimap-mask-stroke-width-props\",y[7]?y[7]*y[14]:void 0)},i(y){if(!u){for(let p=0;p<h.length;p+=1)P(i[p]);u=!0}},o(y){for(let p=0;p<i.length;p+=1)R(i[p]);u=!1},d(y){y&&B(e),d&&d.d();for(let p=0;p<i.length;p+=1)i[p].d();f=!1,c()}}}function Bs(t){let e,n;return{c(){e=Ce(\"title\"),n=He(t[1]),S(e,\"id\",t[41])},m(i,r){q(i,e,r),G(e,n)},p(i,r){r[0]&2&&ft(n,i[1])},d(i){i&&B(e)}}}function Vs(t){var o;let e,n;const i=[{x:t[59].x},{y:t[59].y},t[60],{selected:t[56].selected},{color:(o=t[37])==null?void 0:o.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let r={};for(let s=0;s<i.length;s+=1)r=_e(r,i[s]);return e=new Gy({props:r}),{c(){ee(e.$$.fragment)},m(s,l){x(e,s,l),n=!0},p(s,l){var u;const a=l[0]&1572876|l[1]&960?ct(i,[l[0]&1572864&&{x:s[59].x},l[0]&1572864&&{y:s[59].y},l[0]&1572864&&Ct(s[60]),l[0]&1572864&&{selected:s[56].selected},l[0]&1572864|l[1]&64&&{color:(u=s[37])==null?void 0:u.call(s,s[56])},l[0]&4&&{borderRadius:s[2]},l[0]&1572864|l[1]&128&&{strokeColor:s[38](s[56])},l[0]&8&&{strokeWidth:s[3]},l[1]&512&&{shapeRendering:s[40]},l[0]&1572864|l[1]&256&&{class:s[39](s[56])}]):{};e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function qs(t,e){let n,i=e[56]&&Ji(e[56]),r,o,s=i&&Vs(Tr(e));return{key:t,first:null,c(){n=Xe(),s&&s.c(),r=Xe(),this.first=n},m(l,a){q(l,n,a),s&&s.m(l,a),q(l,r,a),o=!0},p(l,a){e=l,a[0]&1572864&&(i=e[56]&&Ji(e[56])),i?s?(s.p(Tr(e),a),a[0]&1572864&&P(s,1)):(s=Vs(Tr(e)),s.c(),P(s,1),s.m(r.parentNode,r)):s&&(Te(),R(s,1,1,()=>{s=null}),Me())},i(l){o||(P(s),o=!0)},o(l){R(s),o=!1},d(l){l&&(B(n),B(r)),s&&s.d(l)}}}function Qy(t){let e,n,i=t[27]&&Hs(t);return{c(){i&&i.c(),e=Xe()},m(r,o){i&&i.m(r,o),q(r,e,o),n=!0},p(r,o){r[27]?i?(i.p(r,o),o[0]&134217728&&P(i,1)):(i=Hs(r),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(Te(),R(i,1,1,()=>{i=null}),Me())},i(r){n||(P(i),n=!0)},o(r){R(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function xy(t){let e,n;return e=new ho({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:\"\"),class:Ae([\"svelte-flow__minimap\",t[13]]),\"data-testid\":\"svelte-flow__minimap\",$$slots:{default:[Qy]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.position=i[0]),r[0]&4112&&(o.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:\"\")),r[0]&8192&&(o.class=Ae([\"svelte-flow__minimap\",i[13]])),r[0]&536858606|r[1]&1073741824&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}const Mr=t=>t instanceof Function?t:()=>t,$y=200,e1=150;function t1(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,p,m,_,b,v,M,O,k,{position:E=\"bottom-right\"}=e,{ariaLabel:C=\"Mini map\"}=e,{nodeStrokeColor:D=\"transparent\"}=e,{nodeColor:z=void 0}=e,{nodeClass:X=\"\"}=e,{nodeBorderRadius:A=5}=e,{nodeStrokeWidth:w=2}=e,{bgColor:N=void 0}=e,{maskColor:T=void 0}=e,{maskStrokeColor:F=void 0}=e,{maskStrokeWidth:V=void 0}=e,{width:K=void 0}=e,{height:W=void 0}=e,{pannable:U=!0}=e,{zoomable:H=!0}=e,{inversePan:oe=void 0}=e,{zoomStep:ie=void 0}=e,{style:pe=\"\"}=e,{class:Se=\"\"}=e;const{nodes:L,nodeLookup:ve,viewport:Oe,width:Ee,height:Ne,flowId:De,panZoom:Be,translateExtent:J}=Ye();j(t,L,te=>n(19,p=te)),j(t,ve,te=>n(20,m=te)),j(t,Oe,te=>n(53,_=te)),j(t,Ee,te=>n(22,v=te)),j(t,Ne,te=>n(21,b=te)),j(t,De,te=>n(54,M=te)),j(t,Be,te=>n(27,O=te)),j(t,J,te=>n(28,k=te));const Ve=z===void 0?void 0:Mr(z),Ie=Mr(D),It=Mr(X),Tt=typeof window>\"u\"||window.chrome?\"crispEdges\":\"geometricPrecision\",Mt=`svelte-flow__minimap-desc-${M}`;let je=i;const vt=()=>a;return t.$$set=te=>{\"position\"in te&&n(0,E=te.position),\"ariaLabel\"in te&&n(1,C=te.ariaLabel),\"nodeStrokeColor\"in te&&n(43,D=te.nodeStrokeColor),\"nodeColor\"in te&&n(44,z=te.nodeColor),\"nodeClass\"in te&&n(45,X=te.nodeClass),\"nodeBorderRadius\"in te&&n(2,A=te.nodeBorderRadius),\"nodeStrokeWidth\"in te&&n(3,w=te.nodeStrokeWidth),\"bgColor\"in te&&n(4,N=te.bgColor),\"maskColor\"in te&&n(5,T=te.maskColor),\"maskStrokeColor\"in te&&n(6,F=te.maskStrokeColor),\"maskStrokeWidth\"in te&&n(7,V=te.maskStrokeWidth),\"width\"in te&&n(46,K=te.width),\"height\"in te&&n(47,W=te.height),\"pannable\"in te&&n(8,U=te.pannable),\"zoomable\"in te&&n(9,H=te.zoomable),\"inversePan\"in te&&n(10,oe=te.inversePan),\"zoomStep\"in te&&n(11,ie=te.zoomStep),\"style\"in te&&n(12,pe=te.style),\"class\"in te&&n(13,Se=te.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-_.x/_.zoom,y:-_.y/_.zoom,width:v/_.zoom,height:b/_.zoom}),t.$$.dirty[0]&1835008&&n(48,je=m.size>0?da(lo(m),i):i),t.$$.dirty[1]&32768&&n(17,r=K??$y),t.$$.dirty[1]&65536&&n(16,o=W??e1),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,s=je.width/r),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,l=je.height/o),t.$$.dirty[1]&3145728&&n(14,a=Math.max(s,l)),t.$$.dirty[0]&147456&&n(50,u=a*r),t.$$.dirty[0]&81920&&n(49,f=a*o),t.$$.dirty[0]&16384&&n(15,c=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,d=je.x-(u-je.width)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,h=je.y-(f-je.height)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,g=u+c*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,y=f+c*2)},[E,C,A,w,N,T,F,V,U,H,oe,ie,pe,Se,a,c,o,r,i,p,m,b,v,y,g,h,d,O,k,L,ve,Oe,Ee,Ne,De,Be,J,Ve,Ie,It,Tt,Mt,vt,D,z,X,K,W,je,f,u,l,s,_]}class n1 extends ue{constructor(e){super(),ae(this,e,t1,xy,ce,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}var i1={};const Ar=Symbol.for(\"remult-static1\");let Ii={defaultRemultFactory:void 0,remultFactory:void 0,defaultRemult:void 0,asyncContext:void 0,columnsOfType:new Map,allEntities:[],classHelpers:new Map,actionInfo:{allActions:[],runningOnServer:!1,runActionWithoutBlockingUI:t=>t(),startBusyWithProgress:()=>({progress:t=>{},close:()=>{}})},captionTransformer:void 0,defaultDataProvider:()=>{}};typeof process<\"u\"&&i1.IGNORE_GLOBAL_REMULT_IN_TESTS||typeof globalThis[Ar]>\"u\"?(globalThis[Ar]=Ii,Ii.remultFactory=()=>Ha()):Ii=globalThis[Ar];const fe=Ii;function Ha(){return fe.defaultRemult||(fe.defaultRemult=fe.defaultRemultFactory()),fe.defaultRemult}function r1(){fe.remultFactory=()=>Ha()}function $t(t){const e=t;if(typeof e[xn]==\"function\")return e[xn]();throw Error(\"Error getting repository internal from \"+t)}const xn=Symbol.for(\"getInternal\");class o1{constructor(){this.iAmRemultProxy=!0,this.repoCache=new Map,this.repo=(...e)=>{let n=fe,i=this.repoCache.get(e[0]);i||this.repoCache.set(e[0],i=new Map);let r=i.get(e[1]);return r||(r={get fields(){return fe.remultFactory().repo(...e).metadata.fields},[xn](){return n.remultFactory().repo(...e)[xn]()},relations:o=>n.remultFactory().repo(...e).relations(o),validate:(o,...s)=>n.remultFactory().repo(...e).validate(o,...s),addEventListener:(...o)=>n.remultFactory().repo(...e).addEventListener(...o),count:(...o)=>n.remultFactory().repo(...e).count(...o),create:(...o)=>n.remultFactory().repo(...e).create(...o),delete:o=>n.remultFactory().repo(...e).delete(o),deleteMany:o=>n.remultFactory().repo(...e).deleteMany(o),updateMany:(...o)=>n.remultFactory().repo(...e).updateMany(...o),find:(...o)=>n.remultFactory().repo(...e).find(...o),findFirst:(...o)=>n.remultFactory().repo(...e).findFirst(...o),findOne:(...o)=>n.remultFactory().repo(...e).findOne(...o),findId:(o,s)=>n.remultFactory().repo(...e).findId(o,s),toJson:o=>n.remultFactory().repo(...e).toJson(o),fromJson:(o,s)=>n.remultFactory().repo(...e).fromJson(o,s),getEntityRef:(...o)=>n.remultFactory().repo(...e).getEntityRef(...o),insert:o=>n.remultFactory().repo(...e).insert(o),liveQuery:(...o)=>n.remultFactory().repo(...e).liveQuery(...o),get metadata(){return fe.remultFactory().repo(...e).metadata},query:(...o)=>n.remultFactory().repo(...e).query(...o),save:o=>n.remultFactory().repo(...e).save(o),update:(o,s)=>n.remultFactory().repo(...e).update(o,s)},i.set(e[1],r),r)}}get liveQuerySubscriber(){return fe.remultFactory().liveQuerySubscriber}set liveQuerySubscriber(e){fe.remultFactory().liveQuerySubscriber=e}get liveQueryStorage(){return fe.remultFactory().liveQueryStorage}set liveQueryStorage(e){fe.remultFactory().liveQueryStorage=e}get liveQueryPublisher(){return fe.remultFactory().liveQueryPublisher}set liveQueryPublisher(e){fe.remultFactory().liveQueryPublisher=e}call(e,n,...i){return fe.remultFactory().call(e,n,...i)}get context(){return fe.remultFactory().context}get dataProvider(){return fe.remultFactory().dataProvider}set dataProvider(e){fe.remultFactory().dataProvider=e}get repCache(){return fe.remultFactory().repCache}authenticated(){return fe.remultFactory().authenticated()}isAllowed(e){return fe.remultFactory().isAllowed(e)}isAllowedForInstance(e,n){return fe.remultFactory().isAllowedForInstance(e,n)}clearAllCache(){return fe.remultFactory().clearAllCache()}get user(){return fe.remultFactory().user}set user(e){fe.remultFactory().user=e}get apiClient(){return fe.remultFactory().apiClient}set apiClient(e){fe.remultFactory().apiClient=e}get subscriptionServer(){return fe.remultFactory().subscriptionServer}set subscriptionServer(e){fe.remultFactory().subscriptionServer=e}}const wt=new o1;var Ws=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{},Kt={},Pe={},$e={};Object.defineProperty($e,\"__esModule\",{value:!0});$e.output=$e.exists=$e.hash=$e.bytes=$e.bool=$e.number=void 0;function Gi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}$e.number=Gi;function Ba(t){if(typeof t!=\"boolean\")throw new Error(`Expected boolean, not ${t}`)}$e.bool=Ba;function go(t,...e){if(!(t instanceof Uint8Array))throw new Error(\"Expected Uint8Array\");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}$e.bytes=go;function Va(t){if(typeof t!=\"function\"||typeof t.create!=\"function\")throw new Error(\"Hash should be wrapped by utils.wrapConstructor\");Gi(t.outputLen),Gi(t.blockLen)}$e.hash=Va;function qa(t,e=!0){if(t.destroyed)throw new Error(\"Hash instance has been destroyed\");if(e&&t.finished)throw new Error(\"Hash#digest() has already been called\")}$e.exists=qa;function Wa(t,e){go(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}$e.output=Wa;const s1={number:Gi,bool:Ba,bytes:go,hash:Va,exists:qa,output:Wa};$e.default=s1;var ge={};Object.defineProperty(ge,\"__esModule\",{value:!0});ge.add5L=ge.add5H=ge.add4H=ge.add4L=ge.add3H=ge.add3L=ge.add=ge.rotlBL=ge.rotlBH=ge.rotlSL=ge.rotlSH=ge.rotr32L=ge.rotr32H=ge.rotrBL=ge.rotrBH=ge.rotrSL=ge.rotrSH=ge.shrSL=ge.shrSH=ge.toBig=ge.split=ge.fromBig=void 0;const pi=BigInt(2**32-1),jr=BigInt(32);function mo(t,e=!1){return e?{h:Number(t&pi),l:Number(t>>jr&pi)}:{h:Number(t>>jr&pi)|0,l:Number(t&pi)|0}}ge.fromBig=mo;function Xa(t,e=!1){let n=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:o,l:s}=mo(t[r],e);[n[r],i[r]]=[o,s]}return[n,i]}ge.split=Xa;const Ya=(t,e)=>BigInt(t>>>0)<<jr|BigInt(e>>>0);ge.toBig=Ya;const Ka=(t,e,n)=>t>>>n;ge.shrSH=Ka;const Ja=(t,e,n)=>t<<32-n|e>>>n;ge.shrSL=Ja;const Ua=(t,e,n)=>t>>>n|e<<32-n;ge.rotrSH=Ua;const ja=(t,e,n)=>t<<32-n|e>>>n;ge.rotrSL=ja;const Ga=(t,e,n)=>t<<64-n|e>>>n-32;ge.rotrBH=Ga;const Za=(t,e,n)=>t>>>n-32|e<<64-n;ge.rotrBL=Za;const Qa=(t,e)=>e;ge.rotr32H=Qa;const xa=(t,e)=>t;ge.rotr32L=xa;const $a=(t,e,n)=>t<<n|e>>>32-n;ge.rotlSH=$a;const eu=(t,e,n)=>e<<n|t>>>32-n;ge.rotlSL=eu;const tu=(t,e,n)=>e<<n-32|t>>>64-n;ge.rotlBH=tu;const nu=(t,e,n)=>t<<n-32|e>>>64-n;ge.rotlBL=nu;function iu(t,e,n,i){const r=(e>>>0)+(i>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}ge.add=iu;const ru=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);ge.add3L=ru;const ou=(t,e,n,i)=>e+n+i+(t/2**32|0)|0;ge.add3H=ou;const su=(t,e,n,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0);ge.add4L=su;const lu=(t,e,n,i,r)=>e+n+i+r+(t/2**32|0)|0;ge.add4H=lu;const au=(t,e,n,i,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0)+(r>>>0);ge.add5L=au;const uu=(t,e,n,i,r,o)=>e+n+i+r+o+(t/2**32|0)|0;ge.add5H=uu;const l1={fromBig:mo,split:Xa,toBig:Ya,shrSH:Ka,shrSL:Ja,rotrSH:Ua,rotrSL:ja,rotrBH:Ga,rotrBL:Za,rotr32H:Qa,rotr32L:xa,rotlSH:$a,rotlSL:eu,rotlBH:tu,rotlBL:nu,add:iu,add3L:ru,add3H:ou,add4L:su,add4H:lu,add5H:uu,add5L:au};ge.default=l1;var fu={},mr={};Object.defineProperty(mr,\"__esModule\",{value:!0});mr.crypto=void 0;mr.crypto=typeof globalThis==\"object\"&&\"crypto\"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,\"__esModule\",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=mr,n=O=>O instanceof Uint8Array,i=O=>new Uint8Array(O.buffer,O.byteOffset,O.byteLength);t.u8=i;const r=O=>new Uint32Array(O.buffer,O.byteOffset,Math.floor(O.byteLength/4));t.u32=r;const o=O=>new DataView(O.buffer,O.byteOffset,O.byteLength);t.createView=o;const s=(O,k)=>O<<32-k|O>>>k;if(t.rotr=s,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error(\"Non little-endian hardware is not supported\");const l=Array.from({length:256},(O,k)=>k.toString(16).padStart(2,\"0\"));function a(O){if(!n(O))throw new Error(\"Uint8Array expected\");let k=\"\";for(let E=0;E<O.length;E++)k+=l[O[E]];return k}t.bytesToHex=a;function u(O){if(typeof O!=\"string\")throw new Error(\"hex string expected, got \"+typeof O);const k=O.length;if(k%2)throw new Error(\"padded hex string expected, got unpadded hex of length \"+k);const E=new Uint8Array(k/2);for(let C=0;C<E.length;C++){const D=C*2,z=O.slice(D,D+2),X=Number.parseInt(z,16);if(Number.isNaN(X)||X<0)throw new Error(\"Invalid byte sequence\");E[C]=X}return E}t.hexToBytes=u;const f=async()=>{};t.nextTick=f;async function c(O,k,E){let C=Date.now();for(let D=0;D<O;D++){E(D);const z=Date.now()-C;z>=0&&z<k||(await(0,t.nextTick)(),C+=z)}}t.asyncLoop=c;function d(O){if(typeof O!=\"string\")throw new Error(`utf8ToBytes expected string, got ${typeof O}`);return new Uint8Array(new TextEncoder().encode(O))}t.utf8ToBytes=d;function h(O){if(typeof O==\"string\"&&(O=d(O)),!n(O))throw new Error(`expected Uint8Array, got ${typeof O}`);return O}t.toBytes=h;function g(...O){const k=new Uint8Array(O.reduce((C,D)=>C+D.length,0));let E=0;return O.forEach(C=>{if(!n(C))throw new Error(\"Uint8Array expected\");k.set(C,E),E+=C.length}),k}t.concatBytes=g;class y{clone(){return this._cloneInto()}}t.Hash=y;const p={}.toString;function m(O,k){if(k!==void 0&&p.call(k)!==\"[object Object]\")throw new Error(\"Options should be object or undefined\");return Object.assign(O,k)}t.checkOpts=m;function _(O){const k=C=>O().update(h(C)).digest(),E=O();return k.outputLen=E.outputLen,k.blockLen=E.blockLen,k.create=()=>O(),k}t.wrapConstructor=_;function b(O){const k=(C,D)=>O(D).update(h(C)).digest(),E=O({});return k.outputLen=E.outputLen,k.blockLen=E.blockLen,k.create=C=>O(C),k}t.wrapConstructorWithOpts=b;function v(O){const k=(C,D)=>O(D).update(h(C)).digest(),E=O({});return k.outputLen=E.outputLen,k.blockLen=E.blockLen,k.create=C=>O(C),k}t.wrapXOFConstructorWithOpts=v;function M(O=32){if(e.crypto&&typeof e.crypto.getRandomValues==\"function\")return e.crypto.getRandomValues(new Uint8Array(O));throw new Error(\"crypto.getRandomValues must be defined\")}t.randomBytes=M})(fu);Object.defineProperty(Pe,\"__esModule\",{value:!0});Pe.shake256=Pe.shake128=Pe.keccak_512=Pe.keccak_384=Pe.keccak_256=Pe.keccak_224=Pe.sha3_512=Pe.sha3_384=Pe.sha3_256=Pe.sha3_224=Pe.Keccak=Pe.keccakP=void 0;const hn=$e,$n=ge,qn=fu,[cu,du,hu]=[[],[],[]],a1=BigInt(0),Rn=BigInt(1),u1=BigInt(2),f1=BigInt(7),c1=BigInt(256),d1=BigInt(113);for(let t=0,e=Rn,n=1,i=0;t<24;t++){[n,i]=[i,(2*n+3*i)%5],cu.push(2*(5*i+n)),du.push((t+1)*(t+2)/2%64);let r=a1;for(let o=0;o<7;o++)e=(e<<Rn^(e>>f1)*d1)%c1,e&u1&&(r^=Rn<<(Rn<<BigInt(o))-Rn);hu.push(r)}const[h1,g1]=(0,$n.split)(hu,!0),Xs=(t,e,n)=>n>32?(0,$n.rotlBH)(t,e,n):(0,$n.rotlSH)(t,e,n),Ys=(t,e,n)=>n>32?(0,$n.rotlBL)(t,e,n):(0,$n.rotlSL)(t,e,n);function gu(t,e=24){const n=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const l=(s+8)%10,a=(s+2)%10,u=n[a],f=n[a+1],c=Xs(u,f,1)^n[l],d=Ys(u,f,1)^n[l+1];for(let h=0;h<50;h+=10)t[s+h]^=c,t[s+h+1]^=d}let r=t[2],o=t[3];for(let s=0;s<24;s++){const l=du[s],a=Xs(r,o,l),u=Ys(r,o,l),f=cu[s];r=t[f],o=t[f+1],t[f]=a,t[f+1]=u}for(let s=0;s<50;s+=10){for(let l=0;l<10;l++)n[l]=t[s+l];for(let l=0;l<10;l++)t[s+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=h1[i],t[1]^=g1[i]}n.fill(0)}Pe.keccakP=gu;class oi extends qn.Hash{constructor(e,n,i,r=!1,o=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=i,this.enableXOF=r,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,hn.number)(i),0>=this.blockLen||this.blockLen>=200)throw new Error(\"Sha3 supports only keccak-f1600 function\");this.state=new Uint8Array(200),this.state32=(0,qn.u32)(this.state)}keccak(){gu(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,hn.exists)(this);const{blockLen:n,state:i}=this;e=(0,qn.toBytes)(e);const r=e.length;for(let o=0;o<r;){const s=Math.min(n-this.pos,r-o);for(let l=0;l<s;l++)i[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:i,blockLen:r}=this;e[i]^=n,n&128&&i===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,hn.exists)(this,!1),(0,hn.bytes)(e),this.finish();const n=this.state,{blockLen:i}=this;for(let r=0,o=e.length;r<o;){this.posOut>=i&&this.keccak();const s=Math.min(i-this.posOut,o-r);e.set(n.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error(\"XOF is not possible for this instance\");return this.writeInto(e)}xof(e){return(0,hn.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,hn.output)(e,this),this.finished)throw new Error(\"digest() was already called\");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:i,outputLen:r,rounds:o,enableXOF:s}=this;return e||(e=new oi(n,i,r,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=r,e.enableXOF=s,e.destroyed=this.destroyed,e}}Pe.Keccak=oi;const Jt=(t,e,n)=>(0,qn.wrapConstructor)(()=>new oi(e,t,n));Pe.sha3_224=Jt(6,144,224/8);Pe.sha3_256=Jt(6,136,256/8);Pe.sha3_384=Jt(6,104,384/8);Pe.sha3_512=Jt(6,72,512/8);Pe.keccak_224=Jt(1,144,224/8);Pe.keccak_256=Jt(1,136,256/8);Pe.keccak_384=Jt(1,104,384/8);Pe.keccak_512=Jt(1,72,512/8);const mu=(t,e,n)=>(0,qn.wrapXOFConstructorWithOpts)((i={})=>new oi(e,t,i.dkLen===void 0?n:i.dkLen,!0));Pe.shake128=mu(31,168,128/8);Pe.shake256=mu(31,136,256/8);const{sha3_512:m1}=Pe,yu=24,Wn=32,Gr=(t=4,e=Math.random)=>{let n=\"\";for(;n.length<t;)n=n+Math.floor(e()*36).toString(36);return n};function pu(t){let e=8n,n=0n;for(const i of t.values()){const r=BigInt(i);n=(n<<e)+r}return n}const bu=(t=\"\")=>pu(m1(t)).toString(36).slice(1),Ks=Array.from({length:26},(t,e)=>String.fromCharCode(e+97)),y1=t=>Ks[Math.floor(t()*Ks.length)],wu=({globalObj:t=typeof Ws<\"u\"?Ws:typeof window<\"u\"?window:{},random:e=Math.random}={})=>{const n=Object.keys(t).toString(),i=n.length?n+Gr(Wn,e):Gr(Wn,e);return bu(i).substring(0,Wn)},_u=t=>()=>t++,p1=476782367,vu=({random:t=Math.random,counter:e=_u(Math.floor(t()*p1)),length:n=yu,fingerprint:i=wu({random:t})}={})=>function(){const o=y1(t),s=Date.now().toString(36),l=e().toString(36),a=Gr(n,t),u=`${s+a+l+i}`;return`${o+bu(u).substring(1,n)}`},b1=vu(),w1=(t,{minLength:e=2,maxLength:n=Wn}={})=>{const i=t.length,r=/^[0-9a-z]+$/;try{if(typeof t==\"string\"&&i>=e&&i<=n&&r.test(t))return!0}finally{}return!1};Kt.getConstants=()=>({defaultLength:yu,bigLength:Wn});Kt.init=vu;Kt.createId=b1;Kt.bufToBigInt=pu;Kt.createCounter=_u;Kt.createFingerprint=wu;Kt.isCuid=w1;const{createId:_1,init:eb,getConstants:tb,isCuid:nb}=Kt;var Js=_1,bi,v1=new Uint8Array(16);function k1(){if(!bi&&(bi=typeof crypto<\"u\"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<\"u\"&&typeof msCrypto.getRandomValues==\"function\"&&msCrypto.getRandomValues.bind(msCrypto),!bi))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return bi(v1)}const S1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function E1(t){return typeof t==\"string\"&&S1.test(t)}var Je=[];for(var Pr=0;Pr<256;++Pr)Je.push((Pr+256).toString(16).substr(1));function C1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Je[t[e+0]]+Je[t[e+1]]+Je[t[e+2]]+Je[t[e+3]]+\"-\"+Je[t[e+4]]+Je[t[e+5]]+\"-\"+Je[t[e+6]]+Je[t[e+7]]+\"-\"+Je[t[e+8]]+Je[t[e+9]]+\"-\"+Je[t[e+10]]+Je[t[e+11]]+Je[t[e+12]]+Je[t[e+13]]+Je[t[e+14]]+Je[t[e+15]]).toLowerCase();if(!E1(n))throw TypeError(\"Stringified UUID is invalid\");return n}function Zr(t,e,n){t=t||{};var i=t.random||(t.rng||k1)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,C1(i)}const Pt=class Pt{};Pt.number=\"number\",Pt.date=\"date\",Pt.checkbox=\"checkbox\",Pt.password=\"password\",Pt.email=\"email\",Pt.tel=\"tel\",Pt.time=\"time\";let Xn=Pt;const we=class we{};we.Date={toJson:e=>{if(e===null)return null;if(!e)return\"\";if(typeof e==\"string\"&&(e=new Date(e)),e instanceof Date)return e.toISOString();throw new Error(\"Expected date but got \"+e)},fromJson:e=>{if(e===null)return null;if(e!=null&&e!=\"\"&&!e.startsWith(\"0000-00-00\"))return new Date(Date.parse(e))},toDb:e=>e,fromDb:e=>{if(typeof e==\"number\"&&(e=new Date(e)),typeof e==\"string\"&&(e=new Date(e)),e&&!(e instanceof Date))throw\"expected date but got \"+e;return e},fromInput:e=>we.Date.fromJson(e),toInput:e=>we.Date.toJson(e),displayValue:e=>e?e.toLocaleString():\"\"},we.DateOnly={fromInput:e=>we.DateOnly.fromJson(e),toInput:e=>we.DateOnly.toJson(e),toJson:e=>{var n=e;return(typeof n==\"string\"||typeof n==\"number\")&&(n=new Date(n)),!n||n==null?null:n.getHours()==0?new Date(n.valueOf()-n.getTimezoneOffset()*6e4).toISOString().substring(0,10):n.toISOString().substring(0,10)},fromJson:e=>{if(!e||e==\"\"||e==\"0000-00-00\")return null;let n=new Date(Date.parse(e));return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},inputType:Xn.date,toDb:e=>e?we.DateOnly.fromJson(we.DateOnly.toJson(e)):null,fromDb:e=>we.Date.fromDb(e),fieldTypeInDb:\"date\",displayValue:e=>e?e.toLocaleDateString(void 0):\"\"},we.DateOnlyString={...we.DateOnly,toDb:e=>{let n=we.DateOnly.toJson(e);if(n)return n.replace(/-/g,\"\")},fromDb:e=>{if(e===null)return null;if(e)return new Date(e.substring(0,4)+\"-\"+e.substring(4,6)+\"-\"+e.substring(6,8))}},we.Boolean={toDb:e=>e,inputType:Xn.checkbox,fromDb:e=>we.Boolean.fromJson(e),fromJson:e=>typeof e==\"boolean\"?e:e===1?!0:e!=null?e.toString().trim().toLowerCase()==\"true\":e,toJson:e=>e,fromInput:e=>we.Boolean.fromJson(e),toInput:e=>we.Boolean.toJson(e)},we.Number={fromDb:e=>{if(e===null)return null;if(e!==void 0)return+e},toDb:e=>e,fromJson:e=>we.Number.fromDb(e),toJson:e=>we.Number.toDb(e),fromInput:(e,n)=>{let i=+e;if(e!=null)return i},toInput:(e,n)=>e==null?void 0:e.toString(),inputType:Xn.number},we.String={fromDb:gn,toDb:gn,fromJson:gn,toJson:gn,fromInput:gn,toInput:gn},we.Integer={...we.Number,toJson:e=>{let n=we.Number.toDb(e);return n&&+(+n).toFixed(0)},toDb:e=>we.Integer.toJson(e),fieldTypeInDb:\"integer\"},we.Default={fromJson:e=>e,toJson:e=>e,fromDb:e=>we.JsonString.fromDb(e),toDb:e=>we.JsonString.toDb(e),fromInput:e=>we.Default.fromJson(e),toInput:e=>we.Default.toJson(e),displayValue:e=>e+\"\",fieldTypeInDb:\"\",inputType:\"text\"},we.JsonString={fromJson:e=>e,toJson:e=>e,fromDb:e=>e==null?null:e?JSON.parse(we.JsonString.fromJson(e)):void 0,toDb:e=>e!==void 0?e===null?null:JSON.stringify(we.JsonString.toJson(e)):void 0,fromInput:e=>we.JsonString.fromJson(e),toInput:e=>we.JsonString.toJson(e)},we.JsonValue={fromJson:e=>e,toJson:e=>e,fromDb:e=>e,toDb:e=>e,fromInput:e=>we.JsonString.fromJson(e),toInput:e=>we.JsonString.toJson(e),fieldTypeInDb:\"json\"};let Ze=we;function gn(t){return t==null?t:typeof t!=\"string\"?t.toString():t}function Le(t,e=!0){var i;let n=t[yn];if(!n&&e)throw new Error(\"item \"+(((i=t.constructor)==null?void 0:i.name)||t)+\" was not initialized using a context\");return n}const yn=Symbol.for(\"entityMember\"),ku=Symbol.for(\"entityInfo\"),Su=Symbol.for(\"entityInfo_key\");function gt(t,e=!0){if(t===void 0){if(e)throw new Error(\"Undefined is not an entity :)\");return}let n=t[ku];if(!n&&e)throw new Error(t.prototype.constructor.name+\" is not a known entity, did you forget to set @Entity() or did you forget to add the '@' before the call to Entity?\");return n}function O1(t){return t[Su]}function I1(t){return t.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase()).replace(\"Email\",\"eMail\").replace(\" I D\",\" ID\")}class T1{constructor(e,n,i){this.repository=e,this.isReferenceRelation=n,this.allowNull=i}toJson(){if(this.storedItem)return this.item===null?null:this.repository.toJson(this.item)}setId(e){this.repository.metadata.idMetadata.field.valueType==Number&&(e=+e),this.id=e}waitLoadOf(e){return e==null?null:$t(this.repository)._getCachedByIdAsync(e,!1)}get(e){if(e==null)return null;const n=$t(this.repository)._getCachedById(e,this.isReferenceRelation);return this.isReferenceRelation&&!this.storedItem?!this.allowNull&&(this.id===0||this.id===\"\")?null:void 0:n}set(e){if(e===null&&!this.allowNull&&this.isReferenceRelation&&(this.id==0||this.id==\"\")){this.storedItem={item:null};return}if(this.storedItem=void 0,e)if(typeof e==\"string\"||typeof e==\"number\")this.id=e;else{let n=Le(e,!1);n&&!this.isReferenceRelation?($t(this.repository)._addToCache(e),this.id=n.getId()):(this.storedItem={item:e},this.id=e[this.repository.metadata.idMetadata.field.key])}else e===null?this.id=null:this.id=void 0}get item(){return this.storedItem?this.storedItem.item:this.get(this.id)}async waitLoad(){return this.waitLoadOf(this.id)}}class Zt{constructor(...e){this.fields=e}apiUpdateAllowed(e){throw new Error(\"Method not implemented.\")}displayValue(e){throw new Error(\"Method not implemented.\")}includedInApi(e){throw new Error(\"Method not implemented.\")}toInput(e,n){throw new Error(\"Method not implemented.\")}fromInput(e,n){throw new Error(\"Method not implemented.\")}getDbName(){return Promise.resolve(\"\")}getId(e){let n=r=>e[r.key];typeof e==\"function\"&&(n=e);let i=\"\";return this.fields.forEach(r=>{i.length>0&&(i+=\",\"),i+=r.valueConverter.toJson(n(r))}),i}get valueConverter(){throw new Error(\"cant get value converter of compound id\")}isEqualTo(e){let n={},r=e.toString().split(\",\");return this.fields.forEach((o,s)=>{n[o.key]=o.valueConverter.fromJson(r[s])}),n}}class Us{constructor(e){this.url=e}add(e,n){this.url.indexOf(\"?\")>=0?this.url+=\"&\":this.url+=\"?\",this.url+=encodeURIComponent(e)+\"=\"+encodeURIComponent(n)}addObject(e,n=\"\"){if(e!=null)for(var i in e){let r=e[i];this.add(i+n,r)}}}const Eu={error500RetryCount:4};function yr(t){if(!t)return new Gs;let e;return e||Cu(t)&&(e=new M1(t)),e||typeof t==\"function\"&&(e=new Gs(t)),e}function Cu(t){let e=t;return!!(e&&e.get&&e.put&&e.post&&e.delete)}class M1{constructor(e){this.http=e}async post(e,n){return await Zi(()=>wi(this.http.post(e,n)))}delete(e){return wi(this.http.delete(e))}put(e,n){return wi(this.http.put(e,n))}async get(e){return await Zi(()=>wi(this.http.get(e)))}}async function Zi(t){var n,i,r,o;let e=0;for(;;)try{return await t()}catch(s){if(((n=s.message)!=null&&n.startsWith(\"Error occurred while trying to proxy\")||(i=s.message)!=null&&i.startsWith(\"Error occured while trying to proxy\")||(r=s.message)!=null&&r.includes(\"http proxy error\")||(o=s.message)!=null&&o.startsWith(\"Gateway Timeout\")||s.status==500)&&e++<Eu.error500RetryCount){await new Promise((l,a)=>{setTimeout(()=>{l({})},500)});continue}throw s}}function wi(t){let e;return t.toPromise!==void 0?e=t.toPromise():e=t,e.then(n=>n&&(n.status==200||n.status==201)&&n.headers&&n.request&&n.data?n.data:n).catch(async n=>{throw await A1(n)})}async function A1(t){var o,s,l;let e=await t;var n;e.error?n=e.error:e.isAxiosError&&(typeof((o=e.response)==null?void 0:o.data)==\"string\"?n=e.response.data:n=(s=e==null?void 0:e.response)==null?void 0:s.data),n||(n=e.message),e.status==0&&e.error.isTrusted&&(n=\"Network Error\"),typeof n==\"string\"&&(n={message:n}),e.modelState&&(n.modelState=e.modelState);let i=e.status;i===void 0&&(i=(l=e.response)==null?void 0:l.status),i!=null&&(n.httpStatusCode=i);var r=Object.assign(n,{});return r}const P1=Symbol.for(\"relationInfo\");function N1(t){return t==null?void 0:t[P1]}const Qr=Symbol.for(\"fieldRelationInfo\");function ze(t){return t[Qr]}function D1(t,e,n){for(const i of t.fields.toArray()){const r=N1(i.options);if(r&&!i[Qr]){const o=r.toType(),s=e.repo(o,n),l=i.options;i[Qr]={type:r.type,toEntity:o,options:l,toRepo:s,getFields:()=>{let a=l.field,u={fields:l.fields,compoundIdField:void 0};function f(h){return Error(`Error for relation: \"${i.key}\" to \"${s.metadata.key}\": `+h)}let c=()=>a||u.fields;if(r.type===\"toMany\"&&!c()){for(const h of s.fields.toArray())if(!c()){const g=ze(h),y=h.options;if(g&&g.toEntity===t.metadata.entityType){if(g.type===\"reference\")a=h.key;else if(g.type===\"toOne\"){if(y.field)a=y.field;else if(y.fields){let p={};for(const m in y.fields)if(Object.prototype.hasOwnProperty.call(y.fields,m)){const _=y.fields[m];p[_]=m}u.fields=p}}}}if(!c())throw f(\"No matching field found on target. Please specify field/fields\")}function d(h,g){const y=g.fields.find(h);if(!y)throw f(`Field \"${h}\" was not found in \"${g.key}\".`);return y}r.type===\"reference\"&&(a=i.key),a&&(r.type===\"toOne\"||r.type===\"reference\"?s.metadata.idMetadata.field instanceof Zt?u.compoundIdField=a:u.fields={[s.metadata.idMetadata.field.key]:a}:t.metadata.idMetadata.field instanceof Zt?u.compoundIdField=a:u.fields={[a]:t.metadata.idMetadata.field.key});for(const h in u.fields)Object.prototype.hasOwnProperty.call(u.fields,h)&&(d(h,s.metadata),d(u.fields[h],t.metadata));return u}}}}}class me{constructor(e){this.apply=e}static throwErrorIfFilterIsEmpty(e,n){if(me.isFilterEmpty(e))throw{message:`${n}: requires a filter to protect against accidental delete/update of all rows`,httpStatusCode:400}}static isFilterEmpty(e){if(e.$and){for(const n of e.$and)if(!me.isFilterEmpty(n))return!1}if(e.$or){for(const n of e.$or)if(me.isFilterEmpty(n))return!0;return!1}return Object.keys(e).filter(n=>![\"$or\",\"$and\"].includes(n)).length==0}static async getPreciseValues(e,n){const i=new xi;return await me.fromEntityFilter(e,n).__applyToConsumer(i),i.preciseValues}async getPreciseValues(){const e=new xi;return await this.__applyToConsumer(e),e.preciseValues}static createCustom(e,n=\"\"){let i={key:n,rawFilterTranslator:e};return Object.assign(r=>{if(r==null&&(r={}),!i.key)throw\"Usage of custom filter before a key was assigned to it\";return{[en+i.key]:r}},{rawFilterInfo:i})}static entityFilterToJson(e,n){return me.fromEntityFilter(e,n).toJson()}static entityFilterFromJson(e,n){return Iu(e,{get:i=>n[i]})}static fromEntityFilter(e,n){let i=[];for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){let o=n[r];if(r==\"$or\")i.push(new z1(...o.map(s=>me.fromEntityFilter(e,s))));else if(r==\"$and\")i.push(new js(...o.map(s=>me.fromEntityFilter(e,s))));else if(r.startsWith(en))i.push(new me(s=>{s.custom(r.substring(en.length),o)}));else if(r==Ou)i.push(new me(s=>s.databaseCustom(o)));else{const s=e.fields[r],l=ze(s),a=s.options;let u=(l==null?void 0:l.type)===\"toOne\"?a.fields?new R1(s,e.fields,a):new F1(e.fields[a.field]):new Qi(s),f=!1;if(o!==void 0&&o!=null){o.$id!==void 0&&(o=o.$id);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c];switch(c){case\"$gte\":case\">=\":i.push(u.isGreaterOrEqualTo(d)),f=!0;break;case\"$gt\":case\">\":i.push(u.isGreaterThan(d)),f=!0;break;case\"$lte\":case\"<=\":i.push(u.isLessOrEqualTo(d)),f=!0;break;case\"$lt\":case\"<\":i.push(u.isLessThan(d)),f=!0;break;case\"$ne\":case\"!=\":case\"$nin\":f=!0,Array.isArray(d)?i.push(u.isNotIn(d)):i.push(u.isDifferentFrom(d));break;case\"$in\":f=!0,i.push(u.isIn(d));break;case\"$contains\":f=!0,i.push(u.contains(d));break;case\"$notContains\":f=!0,i.push(u.notContains(d));break}}Array.isArray(o)&&(f=!0,i.push(u.isIn(o)))}!f&&o!==void 0&&i.push(u.isEqualTo(o))}}return new js(...i)}__applyToConsumer(e){this.apply(e)}static async resolve(e){return typeof e==\"function\"?await e():e}toJson(){let e=new yo;return this.__applyToConsumer(e),e.result}static async translateCustomWhere(e,n,i){let r=new po(async(o,s)=>{let l=[];for(const a in n.entityType){const u=n.entityType[a];u&&u.rawFilterInfo&&u.rawFilterInfo.rawFilterTranslator&&u.rawFilterInfo.key==o&&l.push(await me.fromEntityFilter(n,await u.rawFilterInfo.rawFilterTranslator(s,i)))}return l});return e.__applyToConsumer(r),await r.resolve(),e=new me(o=>r.applyTo(o)),e}}class Qi{constructor(e){this.metadata=e}processVal(e){if(gt(this.metadata.valueType,!1)){if(e==null){if(e===null&&!this.metadata.allowNull){const i=ze(this.metadata);if((i==null?void 0:i.type)===\"reference\")return i.toRepo.metadata.idMetadata.field.options.valueType===Number?0:\"\"}return null}return typeof e==\"string\"||typeof e==\"number\"?e:Le(e).getId()}return e}contains(e){return new me(n=>n.containsCaseInsensitive(this.metadata,e))}notContains(e){return new me(n=>n.notContainsCaseInsensitive(this.metadata,e))}isLessThan(e){return e=this.processVal(e),new me(n=>n.isLessThan(this.metadata,e))}isGreaterOrEqualTo(e){return e=this.processVal(e),new me(n=>n.isGreaterOrEqualTo(this.metadata,e))}isNotIn(e){return new me(n=>{for(const i of e)n.isDifferentFrom(this.metadata,this.processVal(i))})}isDifferentFrom(e){return e=this.processVal(e),e==null&&this.metadata.allowNull?new me(n=>n.isNotNull(this.metadata)):new me(n=>n.isDifferentFrom(this.metadata,e))}isLessOrEqualTo(e){return e=this.processVal(e),new me(n=>n.isLessOrEqualTo(this.metadata,e))}isGreaterThan(e){return e=this.processVal(e),new me(n=>n.isGreaterThan(this.metadata,e))}isEqualTo(e){return e=this.processVal(e),e==null&&this.metadata.allowNull?new me(n=>n.isNull(this.metadata)):new me(n=>n.isEqualTo(this.metadata,e))}isIn(e){return e=e.map(n=>this.processVal(n)),(e==null?void 0:e.length)==1&&e[0]!=null&&e[0]!==null?new me(n=>n.isEqualTo(this.metadata,e[0])):new me(n=>n.isIn(this.metadata,e))}}class F1 extends Qi{processVal(e){return e?typeof e==\"string\"||typeof e==\"number\"?e:Le(e).getId():null}}class R1{constructor(e,n,i){this.metadata=e,this.fields=n,this.relationOptions=i}processVal(e){throw new Error(\"Invalid for Many To One Relation Field\")}contains(e){throw new Error(\"Invalid for Many To One Relation Field\")}notContains(e){throw new Error(\"Invalid for Many To One Relation Field\")}isLessThan(e){throw new Error(\"Invalid for Many To One Relation Field\")}isGreaterOrEqualTo(e){throw new Error(\"Invalid for Many To One Relation Field\")}isNotIn(e){return new me(n=>{e.forEach(i=>this.isDifferentFrom(i).__applyToConsumer(n))})}isDifferentFrom(e){return new me(n=>{const i=[];for(const r in this.relationOptions.fields)if(Object.prototype.hasOwnProperty.call(this.relationOptions.fields,r)){const o=this.relationOptions.fields[r];i.push(new me(s=>new Qi(this.fields.find(o)).isDifferentFrom(e[r]).__applyToConsumer(s)))}n.or(i)})}isLessOrEqualTo(e){throw new Error(\"Invalid for Many To One Relation Field\")}isGreaterThan(e){throw new Error(\"Invalid for Many To One Relation Field\")}isEqualTo(e){return new me(n=>{for(const i in this.relationOptions.fields)if(Object.prototype.hasOwnProperty.call(this.relationOptions.fields,i)){const r=this.relationOptions.fields[i];new Qi(this.fields.find(r)).isEqualTo(e[i]).__applyToConsumer(n)}})}isIn(e){return new me(n=>{n.or(e.map(i=>this.isEqualTo(i)))})}}class js extends me{constructor(...e){super(n=>{for(const i of this.filters)i&&i.__applyToConsumer(n)}),this.filters=e}add(e){this.filters.push(e)}}class z1 extends me{constructor(...e){super(n=>{let i=this.filters.filter(r=>r!==void 0);i.length>1?n.or(i):i.length==1&&i[0].__applyToConsumer(n)}),this.filters=e}}const en=\"$custom$\",Ou=\"$db$\",xr=\"$an array\";class yo{constructor(){this.result={},this.hasUndefined=!1}databaseCustom(e){throw new Error(\"database custom is not allowed with api calls.\")}custom(e,n){Array.isArray(n)&&(n={[xr]:n}),this.add(en+e,n)}add(e,n){n===void 0&&(this.hasUndefined=!0);let i=this.result;if(!i[e]){i[e]=n;return}let r=i[e];r instanceof Array?r.push(n):r=[r,n],i[e]=r}or(e){this.add(\"OR\",e.map(n=>{let i=new yo;return n.__applyToConsumer(i),i.result}))}isNull(e){this.add(e.key+\".null\",!0)}isNotNull(e){this.add(e.key+\".null\",!1)}isIn(e,n){this.add(e.key+\".in\",n.map(i=>e.valueConverter.toJson(i)))}isEqualTo(e,n){this.add(e.key,e.valueConverter.toJson(n))}isDifferentFrom(e,n){this.add(e.key+\".ne\",e.valueConverter.toJson(n))}isGreaterOrEqualTo(e,n){this.add(e.key+\".gte\",e.valueConverter.toJson(n))}isGreaterThan(e,n){this.add(e.key+\".gt\",e.valueConverter.toJson(n))}isLessOrEqualTo(e,n){this.add(e.key+\".lte\",e.valueConverter.toJson(n))}isLessThan(e,n){this.add(e.key+\".lt\",e.valueConverter.toJson(n))}containsCaseInsensitive(e,n){this.add(e.key+\".contains\",n)}notContainsCaseInsensitive(e,n){this.add(e.key+\".notContains\",n)}}function Iu(t,e){let n={};function i(l){n.$and||(n.$and=[]),n.$and.push(l)}function r(l,a){n[l]===void 0?n[l]=a:i({[l]:a})}[...t.fields].forEach(l=>{function a(f,c,d=!1,h=!1){let g=e.get(l.key+f);if(g!==void 0){let y=p=>{let m=p;if(d){let b;typeof p==\"string\"?b=JSON.parse(p):b=p,m=b.map(v=>h?v:l.valueConverter.fromJson(v))}else m=h?m:l.valueConverter.fromJson(m);let _=c(m);_!==void 0&&r(l.key,_)};if(!d&&g instanceof Array)g.forEach(p=>{y(p)});else{d&&typeof g==\"string\"&&(g=JSON.parse(g));const p=s(g);for(const m of p)y(m)}}}a(\"\",f=>f),a(\".gt\",f=>({$gt:f})),a(\".gte\",f=>({$gte:f})),a(\".lt\",f=>({$lt:f})),a(\".lte\",f=>({$lte:f})),a(\".ne\",f=>({$ne:f})),a(\".in\",f=>f,!0);var u=e.get(l.key+\".null\");if(u)switch(u=u.toString().trim().toLowerCase(),u){case\"y\":case\"true\":case\"yes\":r(l.key,null);break;default:r(l.key,{$ne:null});break}a(\".contains\",f=>({$contains:f}),!1,!0),a(\".notContains\",f=>({$notContains:f}),!1,!0)});let o=e.get(\"OR\");if(o){const a=s(o).map(u=>({$or:u.map(f=>Iu(t,{get:c=>f[c]}))}));a.length==1?n.$or?n.$or.push(a[0].$or):n.$or=a[0].$or:i({$and:a})}for(const l in t.entityType){const a=t.entityType[l];if(a&&a.rawFilterInfo&&a.rawFilterInfo.rawFilterTranslator){let u=e.get(en+l);if(u!==void 0){const f=c=>{c[xr]!=null&&(c=c[xr]),r(en+l,c)};Array.isArray(u)?u.forEach(c=>f(c)):f(u)}}}return n;function s(l){if(!Array.isArray(l))return[l];const a=[],u=[];for(const f of l)Array.isArray(f)?u.push(f):a.push(f);return u.push(a),u}}class po{constructor(e){this.translateCustom=e,this.commands=[],this.promises=[]}applyTo(e){this.commands.forEach(n=>n(e))}or(e){let n;this.promises.push(Promise.all(e.map(async i=>{let r=new po(this.translateCustom);return i.__applyToConsumer(r),await r.resolve(),new me(o=>r.applyTo(o))})).then(i=>{n=i})),this.commands.push(i=>i.or(n))}isEqualTo(e,n){this.commands.push(i=>i.isEqualTo(e,n))}isDifferentFrom(e,n){this.commands.push(i=>i.isDifferentFrom(e,n))}isNull(e){this.commands.push(n=>n.isNull(e))}isNotNull(e){this.commands.push(n=>n.isNotNull(e))}isGreaterOrEqualTo(e,n){this.commands.push(i=>i.isGreaterOrEqualTo(e,n))}isGreaterThan(e,n){this.commands.push(i=>i.isGreaterThan(e,n))}isLessOrEqualTo(e,n){this.commands.push(i=>i.isLessOrEqualTo(e,n))}isLessThan(e,n){this.commands.push(i=>i.isLessThan(e,n))}containsCaseInsensitive(e,n){this.commands.push(i=>i.containsCaseInsensitive(e,n))}notContainsCaseInsensitive(e,n){this.commands.push(i=>i.notContainsCaseInsensitive(e,n))}isIn(e,n){this.commands.push(i=>i.isIn(e,n))}custom(e,n){this.promises.push((async()=>{let i=await this.translateCustom(e,n);i&&(Array.isArray(i)?i.forEach(r=>r.__applyToConsumer(this)):i.__applyToConsumer(this))})())}databaseCustom(e){this.commands.push(n=>n.databaseCustom(e))}async resolve(){for(;this.promises.length>0;){let e=this.promises;this.promises=[],await Promise.all(e)}}}class xi{constructor(){this.rawValues={},this.preciseValues=new Proxy(this.rawValues,{get:(e,n)=>{if(n in e){let i=e[n];if(i.bad)return;if(i.values.length>0){const r=ze(i.field);if(r){if(r.type===\"reference\")return i.values.map(o=>r.toRepo.metadata.idMetadata.getIdFilter(o));throw new Error(\"Only relations toOne without field are supported.\")}return i.values}}}})}ok(e,...n){let i=this.rawValues[e.key];i?i.values.push(...n.filter(r=>!i.values.includes(r))):this.rawValues[e.key]={field:e,bad:!1,values:[...n]}}notOk(e){let n=this.rawValues[e.key];n?n.bad=!0:this.rawValues[e.key]={field:e,bad:!0,values:[]}}or(e){const n=e.map(i=>{let r=new xi;return i.__applyToConsumer(r),r});for(const i of n)for(const r in i.rawValues)if(Object.prototype.hasOwnProperty.call(i.rawValues,r)){const o=i.rawValues[r];o&&(o.bad?this.notOk(o.field):this.ok(o.field,...o.values))}for(const i in this.rawValues)if(Object.prototype.hasOwnProperty.call(this.rawValues,i))for(const r of n)r.rawValues[i]||this.notOk(this.rawValues[i].field)}isEqualTo(e,n){this.ok(e,n)}isDifferentFrom(e,n){this.notOk(e)}isNull(e){this.ok(e,null)}isNotNull(e){this.notOk(e)}isGreaterOrEqualTo(e,n){this.notOk(e)}isGreaterThan(e,n){this.notOk(e)}isLessOrEqualTo(e,n){this.notOk(e)}isLessThan(e,n){this.notOk(e)}containsCaseInsensitive(e,n){this.notOk(e)}notContainsCaseInsensitive(e,n){this.notOk(e)}isIn(e,n){this.ok(e,...n)}custom(e,n){}databaseCustom(e){}}class Tu{constructor(e){this.apiProvider=e,this.isProxy=!0}getEntityDataProvider(e){return new L1(()=>{var i;let n=(i=this.apiProvider())==null?void 0:i.url;return n==null&&(n=\"/api\"),n+\"/\"+e.key},()=>yr(this.apiProvider().httpClient),e)}async transaction(e){throw new Error(\"Method not implemented.\")}}function bo(t,e){if(t.include){let n={};for(const i in t.include)if(Object.prototype.hasOwnProperty.call(t.include,i)){let r=t.include[i];if(typeof r==\"object\"){const o=ze(e.fields.find(i));o&&(r=bo(r,o.toRepo.metadata))}n[i]=r}t={...t,include:n}}return t.where&&(t={...t,where:me.entityFilterToJson(e,t.where)}),t.load&&(t={...t,load:t.load(e.fields).map(n=>n.key)}),t}class L1{constructor(e,n,i){this.url=e,this.http=n,this.entity=i}translateFromJson(e){let n={};for(const i of this.entity.fields)n[i.key]=i.valueConverter.fromJson(e[i.key]);return n}translateToJson(e){let n={};for(const i of this.entity.fields)n[i.key]=i.valueConverter.toJson(e[i.key]);return n}async count(e){const{run:n}=this.buildFindRequest({where:e});return n(\"count\").then(i=>+i.count)}async deleteMany(e){const{run:n}=this.buildFindRequest({where:e},\"delete\");return n(\"deleteMany\").then(i=>+i.deleted)}async updateMany(e,n){const{run:i}=this.buildFindRequest({where:e},\"put\");return i(\"updateMany\",this.toJsonOfIncludedKeys(n)).then(r=>+r.updated)}find(e){let{run:n}=this.buildFindRequest(e);return n().then(i=>i.map(r=>this.translateFromJson(r)))}buildFindRequest(e,n){n||(n=\"get\");let i=new Us(this.url()),r;if(e){if(e.where&&(r=e.where.toJson(),B1(r,i)&&(r=void 0)),e.orderBy&&e.orderBy.Segments){let s=\"\",l=\"\",a=!1;e.orderBy.Segments.forEach(u=>{s.length>0&&(s+=\",\",l+=\",\"),s+=u.field.key,l+=u.isDescending?\"desc\":\"asc\",u.isDescending&&(a=!0)}),s&&i.add(\"_sort\",s),a&&i.add(\"_order\",l)}e.limit&&i.add(\"_limit\",e.limit),e.page&&i.add(\"_page\",e.page)}const o=(s,l)=>{let a=new Us(i.url);return!s&&r&&(s=\"get\"),s&&a.add(\"__action\",s),r?(l={set:l,where:r},this.http().post(a.url,l)):this.http()[n](a.url,l)};return{createKey:()=>JSON.stringify({url:i,filterObject:r}),run:o,subscribe:async s=>({result:await o(V1+s),unsubscribe:async()=>fe.actionInfo.runActionWithoutBlockingUI(()=>this.http().post(this.url()+\"?__action=endLiveQuery\",{id:s}))})}}update(e,n){return this.http().put(this.url()+(e!=\"\"?\"/\"+encodeURIComponent(e):\"?__action=emptyId\"),this.toJsonOfIncludedKeys(n)).then(i=>this.translateFromJson(i))}toJsonOfIncludedKeys(e){let n={},i=Object.keys(e);for(const r of this.entity.fields)i.includes(r.key)&&(n[r.key]=r.valueConverter.toJson(e[r.key]));return n}async delete(e){if(e==\"\")await this.deleteMany(me.fromEntityFilter(this.entity,this.entity.idMetadata.getIdFilter(e)));else return this.http().delete(this.url()+\"/\"+encodeURIComponent(e))}insert(e){return this.http().post(this.url(),this.translateToJson(e)).then(n=>this.translateFromJson(n))}insertMany(e){return this.http().post(this.url(),e.map(n=>this.translateToJson(n))).then(n=>n.map(i=>this.translateFromJson(i)))}}class Gs{constructor(e){this.fetch=e}async get(e){return await Zi(async()=>this.myFetch(e).then(n=>n))}put(e,n){return this.myFetch(e,{method:\"put\",body:JSON.stringify(n)})}delete(e){return this.myFetch(e,{method:\"delete\"})}async post(e,n){return await Zi(()=>this.myFetch(e,{method:\"post\",body:JSON.stringify(n)}))}myFetch(e,n){const i={};if(n!=null&&n.body&&(i[\"Content-type\"]=\"application/json\"),typeof window<\"u\"&&typeof window.document<\"u\"&&typeof(window.document.cookie!==\"undefined\"))for(const r of window.document.cookie.split(\";\"))r.trim().startsWith(\"XSRF-TOKEN=\")&&(i[\"X-XSRF-TOKEN\"]=r.split(\"=\")[1]);return(this.fetch||fetch)(e,{credentials:\"include\",method:n==null?void 0:n.method,body:n==null?void 0:n.body,headers:i}).then(r=>H1(r)).catch(async r=>{throw await r})}}function H1(t){if(t.status!=204){if(t.status>=200&&t.status<300)return t.json();throw t.json().then(e=>({...e,message:e.message||t.statusText,url:t.url,status:t.status})).catch(()=>{throw{message:t.statusText,url:t.url,status:t.status}})}}function B1(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(Array.isArray(i)&&(i.length>0&&typeof i[0]==\"object\"||i.length>10))return!1}for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];Array.isArray(i)?n.endsWith(\".in\")?e.add(n,JSON.stringify(i)):i.forEach(r=>e.add(n,r)):n.startsWith(en)?e.add(n,JSON.stringify(i)):e.add(n,i)}return!0}const V1=\"liveQuery-\";class it{toEntityOrderBy(){let e={};for(const n of this.Segments)n.isDescending?e[n.field.key]=\"desc\":e[n.field.key]=\"asc\";return e}constructor(...e){this.Segments=e}reverse(){let e=new it;for(const n of this.Segments)e.Segments.push({field:n.field,isDescending:!n.isDescending});return e}compare(e,n,i){i||(i=o=>o.key);let r=0;for(let o=0;o<this.Segments.length;o++){let s=this.Segments[o],l=Zs(e[i(s.field)]),a=Zs(n[i(s.field)]);if(l>a?r=1:l<a&&(r=-1),r!=0)return s.isDescending&&(r*=-1),r}return r}static translateOrderByToSort(e,n){if(!n)return;let i=new it;if(n){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const o=n[r];let s=e.fields.find(r);const l=a=>{switch(o){case\"desc\":i.Segments.push({field:a,isDescending:!0});break;case\"asc\":i.Segments.push({field:a})}};if(s){const a=ze(s);if((a==null?void 0:a.type)===\"toOne\"){const u=a.options;if(typeof u.field==\"string\")l(e.fields.find(u.field));else if(u.fields){for(const f in u.fields)if(Object.prototype.hasOwnProperty.call(u.fields,f)){const c=u.fields[f];l(e.fields.find(c.toString()))}}}else l(s)}}}return i}static createUniqueSort(e,n){(!n||Object.keys(n).length===0)&&e.options.defaultOrderBy&&(n=it.translateOrderByToSort(e,e.options.defaultOrderBy)),n||(n=new it);for(const i of e.idMetadata.fields)n.Segments.find(r=>r.field==i)||n.Segments.push({field:i});return n}static createUniqueEntityOrderBy(e,n){(!n||Object.keys(n).length===0)&&(n=e.options.defaultOrderBy),n?n={...n}:n={};for(const i of e.idMetadata.fields)n[i.key]||(n[i.key]=\"asc\");return n}}function Zs(t){return t==null||t==null?t:t.id!==void 0?t.id:t}const Nr=\"stream\";class q1{constructor(e,n,i){this.repo=e,this.query=n,this.unsubscribe=()=>{},this.defaultQueryState=[],this.listeners=[],this.id=Zr(),this.queryChannel=`users:${i}:queries:${this.id}`,this.id=this.queryChannel}sendDefaultState(e){e(this.createReducerType(()=>[...this.defaultQueryState],this.allItemsMessage(this.defaultQueryState)))}async setAllItems(e){const n=await $t(this.repo)._fromJsonArray(e,this.query.options);this.forListeners(i=>{i(()=>n)},this.allItemsMessage(n))}allItemsMessage(e){return[{type:\"all\",data:e}]}forListeners(e,n){e(i=>{if(this.defaultQueryState=i(this.defaultQueryState),n.find(r=>r.type===\"add\"||r.type===\"replace\")&&this.query.options.orderBy){const r=it.translateOrderByToSort(this.repo.metadata,this.query.options.orderBy);this.defaultQueryState.sort((o,s)=>r.compare(o,s))}});for(const i of this.listeners)e(r=>{i.next(this.createReducerType(r,n))})}createReducerType(e,n){return{applyChanges:e,changes:n,items:this.defaultQueryState}}async handle(e){{let n=e.filter(({type:r})=>r==\"add\"||r==\"replace\"),i=await $t(this.repo)._fromJsonArray(n.map(r=>r.data.item),this.query.options);for(let r=0;r<n.length;r++){const o=n[r];o.data.item=i[r]}}this.forListeners(n=>{n(i=>{i||(i=[]);for(const r of e)switch(r.type){case\"all\":this.setAllItems(r.data);break;case\"replace\":{i=i.map(o=>this.repo.metadata.idMetadata.getId(o)===r.data.oldId?r.data.item:o);break}case\"add\":i=i.filter(o=>this.repo.metadata.idMetadata.getId(o)!==this.repo.metadata.idMetadata.getId(r.data.item)),i.push(r.data.item);break;case\"remove\":i=i.filter(o=>this.repo.metadata.idMetadata.getId(o)!==r.data.id);break}return i})},e)}}const W1=\"_liveQueryKeepAlive\";class X1{constructor(e,n){this.apiProvider=e,this.getUserId=n,this.queries=new Map,this.channels=new Map}wrapMessageHandling(e){var n=this.apiProvider().wrapMessageHandling;n?n(e):e()}hasQueriesForTesting(){return this.queries.size>0}runPromise(e){return e}close(){this.queries.clear(),this.channels.clear(),this.closeIfNoListeners()}async subscribeChannel(e,n){let i=()=>{};const r=await this.openIfNoOpened();try{let o=this.channels.get(e);if(!o){this.channels.set(e,o=new Y1);try{o.unsubscribe=await r.subscribe(e,s=>this.wrapMessageHandling(()=>o.handle(s)),s=>{n.error(s)})}catch(s){throw n.error(s),s}}o.listeners.push(n),i=()=>{o.listeners.splice(o.listeners.indexOf(n),1),o.listeners.length==0&&(this.channels.delete(e),o.unsubscribe()),this.closeIfNoListeners()}}catch(o){throw n.error(o),o}return()=>{i(),i=()=>{}}}closeIfNoListeners(){this.client&&this.queries.size===0&&this.channels.size===0&&(this.runPromise(this.client.then(e=>e.close())),this.client=void 0,clearInterval(this.interval),this.interval=void 0)}subscribe(e,n,i){let r=!0,o=()=>{r=!1};return this.runPromise($t(e)._buildEntityDataProviderFindOptions(n).then(s=>{if(!r)return;const{createKey:l,subscribe:a}=new Tu(this.apiProvider).getEntityDataProvider(e.metadata).buildFindRequest(s),u=l();let f=this.queries.get(u);f?f.sendDefaultState(i.next):(this.queries.set(u,f=new q1(e,{entityKey:e.metadata.key,options:n},this.getUserId())),f.subscribeCode=()=>{f.unsubscribe&&(f.unsubscribe(),f.unsubscribe=()=>{}),this.runPromise(this.subscribeChannel(f.queryChannel,{next:c=>this.runPromise(f.handle(c)),complete:()=>{},error:c=>{f.listeners.forEach(d=>d.error(c))}}).then(c=>{if(f.listeners.length==0){c();return}this.runPromise(a(f.queryChannel).then(d=>{if(f.listeners.length===0){d.unsubscribe(),c();return}this.runPromise(f.setAllItems(d.result)),f.unsubscribe=()=>{f.unsubscribe=()=>{},c(),this.runPromise(d.unsubscribe())}}).catch(d=>{f.listeners.forEach(h=>h.error(d)),c(),this.queries.delete(u)}))})).catch(c=>{f.listeners.forEach(d=>d.error(c))})},f.subscribeCode()),f.listeners.push(i),o=()=>{f.listeners.splice(f.listeners.indexOf(i),1),i.complete(),f.listeners.length==0&&(this.queries.delete(u),f.unsubscribe()),this.closeIfNoListeners()}}).catch(s=>{i.error(s)})),()=>{o()}}openIfNoOpened(){return this.client?this.client:(this.interval=setInterval(async()=>{const e=[];for(const n of this.queries.values())e.push(n.queryChannel);if(e.length>0){let n=this.apiProvider();const i=await this.runPromise(await fe.actionInfo.runActionWithoutBlockingUI(()=>yr(n.httpClient).post(n.url+\"/\"+W1,e)));for(const r of i)for(const o of this.queries.values())o.queryChannel===r&&o.subscribeCode()}},3e4),this.runPromise(this.client=this.apiProvider().subscriptionClient.openConnection(()=>{for(const e of this.queries.values())e.subscribeCode()})))}}class Y1{constructor(){this.unsubscribe=()=>{},this.listeners=[]}async handle(e){for(const n of this.listeners)n.next(e)}}class wo{openConnection(e){let n;const i=new Map,r=yr(wt.apiClient.httpClient);let o=!1,s;const l={close(){s.close()},async subscribe(f,c){let d=i.get(f);return d||(i.set(f,d=[]),await u(f)),d.push(c),()=>{d.splice(d.indexOf(c,1)),d.length==0&&(fe.actionInfo.runActionWithoutBlockingUI(()=>r.post(wt.apiClient.url+\"/\"+Nr+\"/unsubscribe\",{channel:f,clientId:n})),i.delete(f))}}},a=()=>new Promise(f=>{d();let c=0;function d(){s&&s.close(),s=wo.createEventSource(wt.apiClient.url+\"/\"+Nr),s.onmessage=h=>{let g=JSON.parse(h.data);const y=i.get(g.channel);y&&y.forEach(p=>p(g.data))},s.onerror=h=>{console.error(\"Live Query Event Source Error\",h),s.close(),c++<Eu.error500RetryCount&&setTimeout(()=>{d()},500)},s.addEventListener(\"connectionId\",async h=>{if(n=h.data,o){for(const g of i.keys())await u(g);e()}else o=!0,f(l)})}});return a();async function u(f){await fe.actionInfo.runActionWithoutBlockingUI(()=>r.post(wt.apiClient.url+\"/\"+Nr+\"/subscribe\",{channel:f,clientId:n}))===K1&&await a()}}static createEventSource(e){return new EventSource(e,{withCredentials:!0})}}const K1=\"client connection not found\",J1=Symbol.for(\"serverActionField\");class U1{constructor(e){this.remultObjectStorage=e}static enable(){fe.remultFactory=()=>{const e=fe.asyncContext.getStore();if(e)return e.remult;throw new Error(\"remult object was requested outside of a valid context, try running it within initApi or a remult request cycle\")}}static disable(){r1()}async run(e,n){return this.remultObjectStorage?this.remultObjectStorage.run({remult:e},()=>n(e)):n(e)}isInInitRequest(){var e,n;return(n=(e=this.remultObjectStorage)==null?void 0:e.getStore())==null?void 0:n.inInitRequest}setInInitRequest(e){var i;const n=(i=this.remultObjectStorage)==null?void 0:i.getStore();n&&(n.inInitRequest=e)}getStore(){if(!this.remultObjectStorage)throw new Error(\"can't use static remult in this environment, `async_hooks` were not initialized\");return this.remultObjectStorage.getStore()}}fe.asyncContext||(fe.asyncContext=new U1(void 0));function j1(){return fe.actionInfo.runningOnServer||!wt.dataProvider.isProxy}const ko=class ko{constructor(e){if(this.repo=(n,i)=>{i===void 0&&(i=this.dataProvider);let r=this.repCache.get(i);r||this.repCache.set(i,r=new Map);let o=r.get(n);return o||(r.set(n,o=new vo(n,this,i,sp(n,this))),D1(o,this,i)),o},this.dataProvider=new Tu(()=>this.apiClient),this.repCache=new Map,this.liveQueryPublisher={itemChanged:async()=>{}},this.liveQuerySubscriber=new X1(()=>this.apiClient,()=>{var n;return(n=this.user)==null?void 0:n.id}),this.context={},this.apiClient={url:\"/api\",subscriptionClient:new wo},e&&e.getEntityDataProvider){this.dataProvider=e;return}if(Cu(e))this.apiClient.httpClient=e;else if(typeof e==\"function\")this.apiClient.httpClient=e;else if(e){const n=e;n.httpClient&&(this.apiClient.httpClient=n.httpClient),n.url&&(this.apiClient.url=n.url),n.subscriptionClient&&(this.apiClient.subscriptionClient=n.subscriptionClient),n.wrapMessageHandling&&(this.apiClient.wrapMessageHandling=n.wrapMessageHandling)}}authenticated(){var e;return((e=this.user)==null?void 0:e.id)!==void 0}isAllowed(e){var n,i;if(e!=null){if(e instanceof Array){for(const r of e)if(this.isAllowed(r)===!0)return!0;return!1}return typeof e==\"function\"?e(this):typeof e==\"boolean\"?e:!!(typeof e==\"string\"&&(i=(n=this.user)==null?void 0:n.roles)!=null&&i.includes(e.toString()))}}isAllowedForInstance(e,n){if(Array.isArray(n)){for(const i of n)if(this.isAllowedForInstance(e,i))return!0}else return typeof n==\"function\"?n(e,this):this.isAllowed(n)}call(e,n,...i){const r=e[J1];if(!r.doWork)throw Error(\"The method received is not a valid backend method\");return r.doWork(i,n,this.apiClient.url,yr(this.apiClient.httpClient))}clearAllCache(){this.repCache.clear()}};ko.onFind=(e,n)=>{};let Pn=ko;fe.defaultRemultFactory=()=>new Pn;class G1{constructor(){this.classes=new Map}}function Z1(t,e){let n=t;for(;;){let i=fe.classHelpers.get(n);i||fe.classHelpers.set(n,i=new G1),i.classes.set(t,e);let r=Object.getPrototypeOf(n.prototype);if(r==null)break;n=r.constructor}}const er=class er{};er.everyone=()=>!0,er.authenticated=(...e)=>e.length>1?e[1].authenticated():e.length==1&&e[0].authenticated?e[0].authenticated():wt.authenticated();let Qs=er;const Q1={defaultPageSize:200};function $r(t,e){return e&&Object.assign(t,e),t}function xs(t,e,n){let i=me.fromEntityFilter(t,e);const r=()=>{};i&&i.__applyToConsumer({custom:r,databaseCustom:r,containsCaseInsensitive:r,notContainsCaseInsensitive:r,isDifferentFrom:r,isEqualTo:(o,s)=>{n[o.key]=s},isGreaterOrEqualTo:r,isGreaterThan:r,isIn:r,isLessOrEqualTo:r,isLessThan:r,isNotNull:r,isNull:r,or:r})}class $s{constructor(){this.entityLoaders=new Map,this.promises=[]}load(e,n){let i=this.entityLoaders.get(e.entityType);i||this.entityLoaders.set(e.entityType,i=new x1(e));const r=i.find(n);return this.promises.push(r),r}async resolveAll(){for(const n of this.entityLoaders.values())for(const i of n.queries.values())i.resolve();if(this.promises.length===0)return;const e=this.promises;this.promises=[],await Promise.all(e),await this.resolveAll()}}class x1{constructor(e){this.rel=e,this.queries=new Map}find(e){const{where:n,...i}=bo(e,this.rel.metadata),r=JSON.stringify(i);let o=this.queries.get(r);return o||this.queries.set(r,o=new $1(this.rel)),o.find(e,n)}}class $1{constructor(e){this.rel=e,this.pendingInStatements=new Map,this.whereVariations=new Map}find(e,n){const i=JSON.stringify(n);let r=this.whereVariations.get(i);if(!r){const o=Object.keys(n);if(o.length===1&&typeof n[o[0]]!=\"object\"&&!e.limit){let s=this.pendingInStatements.get(o[0]);s||this.pendingInStatements.set(o[0],s=new ep(this.rel,o[0],e)),this.whereVariations.set(i,r={result:s.find(n)})}else this.whereVariations.set(i,r={result:this.rel.find(e)})}return r.result}resolve(){const e=[...this.pendingInStatements.values()];this.pendingInStatements.clear();for(const n of e)n.resolve()}}class ep{constructor(e,n,i){this.rel=e,this.key=n,this.options=i,this.values=new Map}async resolve(){const e=[...this.values.values()];if(e.length==1){this.rel.find(this.options).then(e[0].resolve,e[0].reject);return}var n={...this.options};n.where={[this.key]:e.map(r=>r.value)},n.limit=1e3,n.page=1;let i=[];try{for(;;){const r=await this.rel.find(n);if(i.push(...r),r.length<n.limit)break;n.page++}for(const r of this.values.values())r.resolve(i.filter(o=>{const l=Le(o).fields.find(this.key),a=ze(l.metadata),u=(a==null?void 0:a.type)===\"reference\"?l.getId():o[this.key];return r.value==u}))}catch(r){for(const o of this.values.values())o.reject(r)}}find(e){const n=e[this.key];let i=this.values.get(n);if(!i){let r,o,s=new Promise((l,a)=>{r=l,o=a});this.values.set(n,i={value:n,resolve:r,reject:o,result:s})}return i.result}}function Dr(t,e){return typeof t[e]<\"u\"}const _n=class _n{constructor(e){this.sql=e,this.wrapIdentifier=n=>n,this.createdEntities=[],e.wrapIdentifier&&(this.wrapIdentifier=n=>e.wrapIdentifier(n)),Dr(e,\"provideMigrationBuilder\")&&(this.provideMigrationBuilder=n=>e.provideMigrationBuilder(n)),Dr(e,\"end\")&&(this.end=()=>e.end())}static getDb(e){const n=e||wt.dataProvider;if(Dr(n,\"createCommand\"))return n;throw\"the data provider is not an SqlCommandFactory\"}createCommand(){return new np(this.sql.createCommand(),_n.LogToConsole)}async execute(e){return await this.createCommand().execute(e)}_getSourceSql(){return this.sql}async ensureSchema(e){this.sql.ensureSchema&&await this.sql.ensureSchema(e)}getEntityDataProvider(e){if(!this.sql.supportsJsonColumnType)for(const n of e.fields.toArray())n.valueConverter.fieldTypeInDb===\"json\"&&(n.valueConverter={...n.valueConverter,toDb:Ze.JsonString.toDb,fromDb:Ze.JsonString.fromDb});return new eo(e,this,async n=>{this.createdEntities.indexOf(n.$entityName)<0&&(this.createdEntities.push(n.$entityName),await this.sql.entityIsUsedForTheFirstTime(e))},this.sql)}transaction(e){return this.sql.transaction(async n=>{let i=!1;try{await e(new _n({createCommand:()=>{let r=n.createCommand();return{addParameterAndReturnSqlToken:o=>r.param(o),param:o=>r.param(o),execute:async o=>{if(i)throw\"can't run a command after the transaction was completed\";return r.execute(o)}}},getLimitSqlSyntax:this.sql.getLimitSqlSyntax,entityIsUsedForTheFirstTime:r=>n.entityIsUsedForTheFirstTime(r),transaction:r=>n.transaction(r),supportsJsonColumnType:this.sql.supportsJsonColumnType,wrapIdentifier:this.wrapIdentifier,end:this.end}))}finally{i=!0}})}static rawFilter(e){return{[Ou]:{buildSql:e}}}static async filterToRaw(e,n,i,r,o){i||(i=new ip);const s=wp(e);var l=new Qt(i,r||await Mu(s.metadata,o));return l._addWhere=!1,await(await $t(s)._translateWhereToFilter(n)).__applyToConsumer(l),await l.resolveWhere()}};_n.LogToConsole=!1,_n.durationThreshold=0;let $i=_n;const tp=new Map([[\"INSERT\",\"\"],[\"SELECT\",\"\"],[\"UPDATE\",\"\"],[\"DELETE\",\"\"],[\"CREATE\",\"\"],[\"ALTER\",\"\"],[\"DROP\",\"\"],[\"TRUNCATE\",\"\"],[\"GRANT\",\"\"],[\"REVOKE\",\"\"]]);class np{constructor(e,n){this.origin=e,this.logToConsole=n,this.args={}}addParameterAndReturnSqlToken(e){return this.param(e)}param(e,n){let i=this.origin.param(e);return this.args[i]=e,i}async execute(e){try{let i=new Date,r=await this.origin.execute(e);if(this.logToConsole!==!1){var n=new Date().valueOf()-i.valueOf();if(n>$i.durationThreshold){const o=n/1e3;if(this.logToConsole===\"oneLiner\"){const s=e.replace(/(\\r\\n|\\n|\\r|\\t)/gm,\" \").replace(/  +/g,\" \").trim(),l=s.split(\" \")[0].toUpperCase();console.info(`${tp.get(l)||\"\"} (${o.toFixed(3)}) ${s} ${JSON.stringify(this.args)}`)}else typeof this.logToConsole==\"function\"?this.logToConsole(o,e,this.args):console.info(e+`\n`,{arguments:this.args,duration:o})}}return r}catch(i){throw console.error((i.message||\"Sql Error\")+`:\n`,e,{arguments:this.args,error:i}),i}}}const So=class So{constructor(e,n,i,r){this.entity=e,this.sql=n,this.iAmUsed=i,this.strategy=r}async init(){let e=await Mu(this.entity,n=>this.sql.wrapIdentifier(n));return await this.iAmUsed(e),e}async count(e){let n=await this.init(),i=\"select count(*) count from \"+n.$entityName,r=this.sql.createCommand();if(e){let o=new Qt(r,n);e.__applyToConsumer(o),i+=await o.resolveWhere()}return r.execute(i).then(o=>Number(o.rows[0].count))}async find(e){let n=await this.init(),{colKeys:i,select:r}=this.buildSelect(n);r=\"select \"+r,r+=`\n from `+n.$entityName;let o=this.sql.createCommand();if(e){if(e.where){let s=new Qt(o,n);e.where.__applyToConsumer(s),r+=await s.resolveWhere()}if(e.limit&&(e.orderBy=it.createUniqueSort(this.entity,e.orderBy)),e.orderBy||(e.orderBy=it.createUniqueSort(this.entity,new it)),e.orderBy){let s=!0,l=[];for(const a of e.orderBy.Segments)l.push(a);for(const a of l)s?(r+=\" Order By \",s=!1):r+=\", \",r+=n.$dbNameOf(a.field),a.isDescending&&(r+=\" desc\"),this.sql._getSourceSql().orderByNullsFirst&&(a.isDescending?r+=\" nulls last\":r+=\" nulls first\")}if(e.limit){let s=1;e.page&&(s=e.page),s<1&&(s=1),r+=\" \"+this.strategy.getLimitSqlSyntax(e.limit,(s-1)*e.limit)}}return o.execute(r).then(s=>s.rows.map(l=>this.buildResultRow(i,l,s)))}buildResultRow(e,n,i){let r={};for(let o=0;o<e.length;o++){const s=e[o];try{r[s.key]=s.valueConverter.fromDb(n[i.getColumnKeyInResultForIndexInSelect(o)])}catch(l){throw new Error(\"Failed to load from db:\"+s.key+`\\r\n`+l)}}return r}buildSelect(e){let n=\"\",i=[];for(const r of this.entity.fields)r.isServerExpression||(i.length>0&&(n+=\", \"),n+=e.$dbNameOf(r),i.push(r));return{colKeys:i,select:n}}async update(e,n){let i=await this.init(),r=this.sql.createCommand(),o=\"update \"+i.$entityName+\" set \",s=!1;for(const c of this.entity.fields)if(!tl(c,i)){if(n[c.key]!==void 0){let d=c.valueConverter.toDb(n[c.key]);d!==void 0&&(s?o+=\", \":s=!0,o+=i.$dbNameOf(c)+\" = \"+r.param(d))}}const l=this.entity.idMetadata.getIdFilter(e);let a=new Qt(r,i);me.fromEntityFilter(this.entity,l).__applyToConsumer(a),o+=await a.resolveWhere();let{colKeys:u,select:f}=this.buildSelect(i);return this.sql._getSourceSql().doesNotSupportReturningSyntax||(o+=\" returning \"+f),r.execute(o).then(c=>{var d,h;if((h=(d=this.sql._getSourceSql()).afterMutation)==null||h.call(d),this.sql._getSourceSql().doesNotSupportReturningSyntax)return el(this.entity,this,n,e,\"update\");if(c.rows.length!=1)throw new Error(\"Failed to update row with id \"+e+\", rows updated: \"+c.rows.length);return this.buildResultRow(u,c.rows[0],c)})}async delete(e){let n=await this.init(),i=this.sql.createCommand(),r=new Qt(i,n);me.fromEntityFilter(this.entity,this.entity.idMetadata.getIdFilter(e)).__applyToConsumer(r);let o=\"delete from \"+n.$entityName;return o+=await r.resolveWhere(),i.execute(o).then(()=>{var s,l;(l=(s=this.sql._getSourceSql()).afterMutation)==null||l.call(s)})}async insert(e){let n=await this.init(),i=this.sql.createCommand(),r=\"\",o=\"\",s=!1;for(const f of this.entity.fields)if(!tl(f,n)){let c=f.valueConverter.toDb(e[f.key]);c!=null&&(s?(r+=\", \",o+=\", \"):s=!0,r+=n.$dbNameOf(f),o+=i.param(c))}let l=`insert into ${n.$entityName} (${r}) values (${o})`,{colKeys:a,select:u}=this.buildSelect(n);return this.sql._getSourceSql().doesNotSupportReturningSyntax||(l+=\" returning \"+u),await i.execute(l).then(f=>{var c,d;if((d=(c=this.sql._getSourceSql()).afterMutation)==null||d.call(c),this.sql._getSourceSql().doesNotSupportReturningSyntax)if(hp(this.entity.idMetadata.field)){const h=f.rows[0];if(typeof h!=\"number\")throw new Error(\"Auto increment, for a database that is does not support returning syntax, should return an array with the single last added id. Instead it returned: \"+JSON.stringify(h));return this.find({where:new me(g=>g.isEqualTo(this.entity.idMetadata.field,h))}).then(g=>g[0])}else return el(this.entity,this,e,void 0,\"insert\");return this.buildResultRow(a,f.rows[0],f)})}};So.LogToConsole=!1;let eo=So;class ip{execute(e){throw new Error(\"Method not implemented.\")}addParameterAndReturnSqlToken(e){return this.param(e)}param(e){return e===null?\"null\":(e instanceof Date&&(e=e.toISOString()),typeof e==\"string\"?(e==null&&(e=\"\"),\"'\"+e.replace(/'/g,\"''\")+\"'\"):e.toString())}}function el(t,e,n,i,r){const o=i!==void 0?t.idMetadata.getIdFilter(i):{};return e.find({where:new me(s=>{for(const l of t.idMetadata.fields)s.isEqualTo(l,n[l.key]??o[l.key])})}).then(s=>{if(s.length!=1)throw new Error(`Failed to ${r} row - result contained ${s.length} rows`);return s[0]})}class Qt{constructor(e,n){this.r=e,this.nameProvider=n,this.where=\"\",this._addWhere=!0,this.promises=[]}async resolveWhere(){for(;this.promises.length>0;){let e=this.promises;this.promises=[];for(const n of e)await n}return this.where}custom(e,n){throw new Error(\"Custom filter should be translated before it gets here\")}or(e){let n=\"\";this.promises.push((async()=>{for(const i of e){let r=new Qt(this.r,this.nameProvider);r._addWhere=!1,i.__applyToConsumer(r);let o=await r.resolveWhere();if(!o)return;o.length>0&&(n.length>0&&(n+=\" or \"),e.length>1?n+=\"(\"+o+\")\":n+=o)}this.addToWhere(\"(\"+n+\")\")})())}isNull(e){this.promises.push((async()=>this.addToWhere(this.nameProvider.$dbNameOf(e)+\" is null\"))())}isNotNull(e){this.promises.push((async()=>this.addToWhere(this.nameProvider.$dbNameOf(e)+\" is not null\"))())}isIn(e,n){this.promises.push((async()=>{n&&n.length>0?this.addToWhere(this.nameProvider.$dbNameOf(e)+\" in (\"+n.map(i=>this.r.param(e.valueConverter.toDb(i))).join(\",\")+\")\"):this.addToWhere(\"1 = 0 /*isIn with no values*/\")})())}isEqualTo(e,n){this.add(e,n,\"=\")}isDifferentFrom(e,n){this.add(e,n,\"<>\")}isGreaterOrEqualTo(e,n){this.add(e,n,\">=\")}isGreaterThan(e,n){this.add(e,n,\">\")}isLessOrEqualTo(e,n){this.add(e,n,\"<=\")}isLessThan(e,n){this.add(e,n,\"<\")}containsCaseInsensitive(e,n){this.promises.push((async()=>{this.addToWhere(\"lower (\"+this.nameProvider.$dbNameOf(e)+\") like lower ('%\"+n.replace(/'/g,\"''\")+\"%')\")})())}notContainsCaseInsensitive(e,n){this.promises.push((async()=>{this.addToWhere(\"not lower (\"+this.nameProvider.$dbNameOf(e)+\") like lower ('%\"+n.replace(/'/g,\"''\")+\"%')\")})())}add(e,n,i){this.promises.push((async()=>{let r=this.nameProvider.$dbNameOf(e)+\" \"+i+\" \"+this.r.param(e.valueConverter.toDb(n));this.addToWhere(r)})())}addToWhere(e){this.where.length==0?this._addWhere&&(this.where+=\" where \"):this.where+=\" and \",this.where+=e}databaseCustom(e){this.promises.push((async()=>{if(e!=null&&e.buildSql){let n=new rp(this.r,this.nameProvider.wrapIdentifier),i=await e.buildSql(n);typeof i!=\"string\"&&(i=n.sql),i&&this.addToWhere(\"(\"+i+\")\")}})())}}class rp{constructor(e,n){this.r=e,this.wrapIdentifier=n,this.sql=\"\",this.param=(i,r)=>(typeof r==\"object\"&&r.valueConverter.toDb&&(i=r.valueConverter.toDb(i)),this.r.param(i)),this.filterToRaw=async(i,r)=>$i.filterToRaw(i,r,this,void 0,this.wrapIdentifier),this.param.bind(this),this.filterToRaw.bind(this)}addParameterAndReturnSqlToken(e){return this.param(e)}}function tl(t,e){return t.dbReadOnly||t.isServerExpression||t.options.sqlExpression&&t.dbName!=e.$dbNameOf(t)}async function Mu(t,e){let n=typeof e==\"function\"?{wrapIdentifier:e}:e||{};var i=bp(t);n.wrapIdentifier||(n.wrapIdentifier=wt.dataProvider.wrapIdentifier),n.wrapIdentifier||(n.wrapIdentifier=o=>o);const r={$entityName:await Au(i,n.wrapIdentifier),toString:()=>r.$entityName,$dbNameOf:o=>{var s;return typeof o==\"string\"?s=o:s=o.key,r[s]},wrapIdentifier:n.wrapIdentifier};for(const o of i.fields){let s=await _o(o,i,n.wrapIdentifier);o.options.sqlExpression||(typeof n.tableName==\"string\"?s=n.wrapIdentifier(n.tableName)+\".\"+s:n.tableName===!0&&(s=r.$entityName+\".\"+s)),r[o.key]=s}return r}async function Au(t,e=n=>n){if(t.options.sqlExpression){if(typeof t.options.sqlExpression==\"string\")return t.options.sqlExpression;if(typeof t.options.sqlExpression==\"function\"){const n=t.options.sqlExpression;try{return t.options.sqlExpression=\"recursive sqlExpression call for entity '\"+t.key+\"'. \",await n(t)}finally{t.options.sqlExpression=n}}}return e(t.dbName)}async function _o(t,e,n=i=>i){try{if(t.options.sqlExpression){let o;if(typeof t.options.sqlExpression==\"function\"){const s=t.options.sqlExpression;try{t.options.sqlExpression=\"recursive sqlExpression call for field '\"+t.key+\"'. \",o=await s(e),t.options.sqlExpression=()=>o}finally{}}else o=t.options.sqlExpression;return o||t.dbName}const i=ze(t);let r=(i==null?void 0:i.type)===\"toOne\"&&t.options.field;if(r){let o=e.fields.find(r);if(o)return _o(o,e,n)}return n(t.dbName)}finally{}}const Ge=class Ge{};Ge.required=Bn(async(e,n)=>n.value!=null&&n.value!=null&&n.value!==\"\",\"Should not be empty\"),Ge.unique=Bn(async(e,n)=>{if(!n.entityRef)throw\"unique validation may only work on columns that are attached to an entity\";return n.isBackend()&&(n.isNew||n.valueChanged())?await n.entityRef.repository.count({[n.metadata.key]:n.value})==0:!0},\"already exists\"),Ge.uniqueOnBackend=Bn(async(e,n)=>n.isBackend()&&(n.isNew||n.valueChanged())?await n.entityRef.repository.count({[n.metadata.key]:n.value})==0:!0,Ge.unique.defaultMessage),Ge.regex=zn((e,n)=>n.test(e)),Ge.email=Ti(e=>/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e),\"Invalid Email\"),Ge.url=Ti(e=>!!new URL(e),\"Invalid Url\"),Ge.in=zn((e,n)=>n.includes(e),e=>`Value must be one of: ${e.map(n=>typeof n==\"object\"?n.id!==void 0?n.id:n.toString():n).join(\", \")}`),Ge.notNull=Ti(e=>e!=null,\"Should not be null\"),Ge.enum=zn((e,n)=>Object.values(n).includes(e),e=>`Value must be one of ${Mi(e).join(\", \")}`),Ge.relationExists=Bn(async(e,n)=>n.valueIsNull()||!n.isBackend()?!0:!!await n.load(),\"Relation value does not exist\"),Ge.maxLength=zn((e,n)=>e.length<=n,e=>`Value must be at most ${e} characters`),Ge.minLength=zn((e,n)=>e.length>=n,e=>`Value must be at least ${e} characters`),Ge.defaultMessage=\"Invalid value\";let Ft=Ge;function Bn(t,e){const n=async(r,o,s)=>{const l=await t(r,o);typeof l==\"string\"&&l.length>0?o.error=l:l||(o.error=typeof s==\"function\"&&s(r,o,void 0)||s||typeof e==\"function\"&&e(r,o,void 0)||e||Ft.defaultMessage)},i=(r,o,s)=>typeof r==\"string\"||r===\"function\"||r===void 0&&o===void 0?async(l,a,u)=>await n(l,a,r||u):n(r,o,s);return Object.defineProperty(i,\"defaultMessage\",{get:()=>e,set:r=>{e=r},enumerable:!0}),Object.assign(i,{withMessage:r=>async(o,s)=>i(o,s,r)})}function Ti(t,e){return Bn((n,i)=>i.value===void 0||i.value===null?!0:t(i.value),e)}function zn(t,e){const n=op((i,r,o)=>r.value===void 0||r.value===null?!0:t(r.value,o),(i,r,o)=>typeof e==\"function\"&&e(o)||e,!0);return Object.assign((i,r)=>n(i,r),{get defaultMessage(){return e},set defaultMessage(i){e=i}})}function op(t,e,n=!1){return Object.assign((r,o)=>async(s,l)=>{const a=await t(s,l,r);typeof a==\"string\"?l.error=a:a||(l.error=o?typeof o==\"function\"?n?o(r):o(s,l,r):o:e?typeof e==\"function\"?e(s,l,r):e:Ft.defaultMessage)},{get defaultMessage(){return e},set defaultMessage(r){e=r}})}function Mi(t){return Object.values(t).filter(e=>typeof t[e]!=\"number\")}function Ai(t,e,n=!1){if(!e)return t;const i=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:t?[t]:[];return n?[...i,...r]:[...r,...i]}class vo{constructor(e,n,i,r,o){this._entity=e,this._remult=n,this._dataProvider=i,this._info=r,this._defaultFindOptions=o,this._idCache=new Map,this._cache=new Map}_notFoundError(e){return{message:`id ${e} not found in entity ${this.metadata.key}`,httpStatusCode:404}}[xn](){return this}async _createAfterFilter(e,n){let i=new Map;for(const s of it.translateOrderByToSort(this.metadata,e).Segments){let l=n[s.field.key];i.set(s.field.key,l)}let r={$or:[]},o=[];for(const s of it.translateOrderByToSort(this.metadata,e).Segments){let l={};for(const a of o)l[a.key]=i.get(a.key);o.push(s.field),s.isDescending?l[s.field.key]={$lt:i.get(s.field.key)}:l[s.field.key]={$gt:i.get(s.field.key)},r.$or.push(l)}return r}relations(e){return new Proxy({},{get:(n,i)=>{const r=this.fields.find(i),o=ze(r);if(!o)throw Error(i+\" is not a relation\");const{toRepo:s,returnNull:l,returnUndefined:a}=this._getFocusedRelationRepo(r,e);return o.type===\"toMany\"?s:{findOne:u=>l?Promise.resolve(null):a?Promise.resolve(void 0):s.findFirst({},u)}}})}_getFocusedRelationRepo(e,n){const i=ze(e);let r=i.toRepo,{findOptions:o,returnNull:s,returnUndefined:l}=this._findOptionsBasedOnRelation(i,e,void 0,n,r);return{toRepo:new vo(r._entity,r._remult,r._dataProvider,r._info,o),returnNull:s,returnUndefined:l}}get _edp(){return this.__edp?this.__edp:this.__edp=this._dataProvider.getEntityDataProvider(this.metadata)}_getCachedById(e,n){e=e+\"\",this._getCachedByIdAsync(e,n);let i=this._idCache.get(e);if(!(i instanceof Promise))return i}async _getCachedByIdAsync(e,n){e=e+\"\";let i=this._idCache.get(e);if(i instanceof Promise)return await i;if(this._idCache.has(e))return i;if(n)return;this._idCache.set(e,void 0);let r=this.findId(e).then(o=>(o===void 0?i=null:i=o,this._idCache.set(e,i),i));return this._idCache.set(e,r),await r}_addToCache(e){e&&this._idCache.set(this.getEntityRef(e).getId()+\"\",e)}get metadata(){return this._info}addEventListener(e){return this.listeners||(this.listeners=[]),this.listeners.push(e),()=>{this.listeners.splice(this.listeners.indexOf(e),1)}}query(e){return new pp(e,this)}getEntityRef(e){let n=e[yn];return n||(this._fixTypes(e),n=new _i(this._info,e,this,this._edp,this._remult,!0),Object.defineProperty(e,yn,{get:()=>n}),n.saveOriginalData()),n}async delete(e){const n=Le(e,!1);if(n)return n.delete();if(typeof e==\"string\"||typeof e==\"number\"){if(this._dataProvider.isProxy)return this._edp.delete(e);{let r=await this.findId(e);if(!r)throw this._notFoundError(e);return await Le(r).delete()}}let i=this._getRefForExistingRow(e,void 0);return this._dataProvider.isProxy||await i.reload(),i.delete()}async insert(e){if(Array.isArray(e))if(this._dataProvider.isProxy){let n=[],i=[];for(const r of e){let o=Le(e,!1);if(o){if(!o.isNew())throw\"Item is not new\"}else o=await this.getEntityRef(this.create(r));n.push(o),i.push(await o.buildDtoForInsert())}return Yn(await this._edp.insertMany(i),(r,o)=>n[o].processInsertResponseDto(r))}else{let n=[];for(const i of e)n.push(await this.insert(i));return n}else{let n=Le(e,!1);if(n){if(!n.isNew())throw\"Item is not new\";return await n.save()}else return await this.getEntityRef(this.create(e)).save()}}get fields(){return this.metadata.fields}async validate(e,...n){{let i=Le(e,!1);if(i||(i=this.getEntityRef({...e})),!n||n.length===0)return await i.validate();{i.__clearErrorsAndReportChanged();let r=!1;for(const o of n)await i.fields.find(o).validate()||(r=!0);return r?i.buildErrorInfoObject():void 0}}}async updateMany({where:e,set:n}){if(me.throwErrorIfFilterIsEmpty(e,\"updateMany\"),this._dataProvider.isProxy)return this._edp.updateMany(await this._translateWhereToFilter(e),n);{let i=0;for await(const r of this.query({where:e}))$r(r,n),await Le(r).save(),i++;return i}}async update(e,n){{let r=Le(n,!1);if(r)return await r.save()}{let r=Le(e,!1);if(r)return $r(e,n),r.save()}let i;if(typeof e==\"object\"?(i=this._getRefForExistingRow(e,this.metadata.idMetadata.getId(e)),Object.assign(i.instance,n)):i=this._getRefForExistingRow(n,e),this._dataProvider.isProxy)return await i.save(Object.keys(n));{const r=await i.reload();if(!r)throw this._notFoundError(i.id);for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){let s=i.fields[o];if(n[o]===void 0&&ze(s.metadata))continue;s&&(r[o]=n[o])}return await this._fixTypes(r),await i.save()}}_getRefForExistingRow(e,n){let i=Le(e,!1);if(!i){const r=new this._entity(this._remult);for(const s of this._fieldsOf(e))r[s.key]=e[s.key];this._fixTypes(r);let o=new _i(this._info,r,this,this._edp,this._remult,!1);typeof n==\"object\"&&(n=this.metadata.idMetadata.getId(n)),n?(o.id=n,o.originalId=n):o.id=o.getId(),i=o,Object.defineProperty(r,yn,{get:()=>o})}return i}async save(e){if(Array.isArray(e))return Yn(e,n=>this.save(n));{let n=Le(e,!1);if(n)return await n.save();if(e instanceof yp)return await this.getEntityRef(e).save();{let i=this.metadata.idMetadata.getId(e);return i===void 0?this.insert(e):this.update(i,e)}}}liveQuery(e){return e||(e={}),{subscribe:n=>{let i=n;return typeof n==\"function\"&&(i={next:n,complete:()=>{},error:()=>{}}),i.error??(i.error=()=>{}),i.complete??(i.complete=()=>{}),this._remult.liveQuerySubscriber.subscribe(this,e,i)}}}async _rawFind(e,n=!1,i){e||(e={}),this._defaultFindOptions&&(e={...this._defaultFindOptions,...e});let r=await this._buildEntityDataProviderFindOptions(e);n&&(delete r.orderBy,delete r.limit),Pn.onFind(this._info,e);const o=await this._edp.find(r);return await this._loadManyToOneForManyRows(o,e,i)}async find(e,n=!1){const i=new $s,r=await this._rawFind(e,n,i);return await i.resolveAll(),r}async _buildEntityDataProviderFindOptions(e){let n={};return n={},(!e.orderBy||Object.keys(e.orderBy).length===0)&&(e.orderBy=this._info.entityInfo.defaultOrderBy),n.where=await this._translateWhereToFilter(e.where),e.orderBy!==void 0&&(n.orderBy=it.translateOrderByToSort(this.metadata,e.orderBy)),e.limit!==void 0&&(n.limit=e.limit),e.page!==void 0&&(n.page=e.page),n}async _fromJsonArray(e,n){const i=new $s,r=await this._loadManyToOneForManyRows(e.map(o=>{let s={};for(const l of this.metadata.fields.toArray())s[l.key]=l.valueConverter.fromJson(o[l.key]);return s}),n,i);return await i.resolveAll(),r}async _loadManyToOneForManyRows(e,n,i){var l;let r;n!=null&&n.load&&(r=n.load(this.metadata.fields));for(const a of this.metadata.fields)if(gt(a.valueType,!1)&&!ze(a)){let c=!a.options.lazy;if(r!==void 0&&(c=r.includes(a)),c){let d=this._remult.repo(a.valueType),h=[];for(const g of e){let y=g[a.key];y!=null&&!h.includes(y)&&!d._idCache.has(y+\"\")&&h.push(y)}h.length>0&&await o(d,h)}}async function o(a,u){let f=await a.find({where:a.metadata.idMetadata.getIdFilter(...u)},!0);for(const c of f)a._addToCache(c)}let s=await Yn(e,async a=>await this._mapRawDataToResult(a,r));for(const a of this.metadata.fields){let u=ze(a),f=a.options.defaultIncluded;if(((l=n==null?void 0:n.include)==null?void 0:l[a.key])!==void 0&&(f=n.include[a.key]),u&&f){const c=u.toRepo;for(const d of s){let{findOptions:h,returnNull:g}=this._findOptionsBasedOnRelation(u,a,f,d,c);if(g)d[a.key]=null;else{const y=u.toEntity,p=c;i.load({entityType:y,find:m=>p._rawFind(m,!1,i),metadata:p.metadata},h).then(m=>{m.length==0&&u.type==\"toOne\"||(d[a.key]=u.type!==\"toMany\"?m.length==0?null:m[0]:m)})}}}}return s}_findOptionsBasedOnRelation(e,n,i,r,o){let s=!1,l=!1,a=[],u={},f=[];typeof e.options.findOptions==\"function\"?f.push(e.options.findOptions(r)):typeof e.options.findOptions==\"object\"&&f.push(e.options.findOptions),typeof i==\"object\"&&f.push(i);for(const h of f){h.where&&a.push(h.where);for(const g of[\"limit\",\"include\",\"orderBy\"])h[g]&&(u[g]=h[g])}const c=e.getFields(),d=h=>{let g=e.type===\"reference\"?Le(r).fields.find(n.key).getId():r[h];return(e.type===\"toOne\"||e.type===\"reference\")&&(g===null?s=!0:g===void 0?l=!0:e.type===\"reference\"&&typeof g==\"object\"&&(g=o.metadata.idMetadata.getId(g))),g};c.compoundIdField&&(e.type===\"toMany\"?a.push({[c.compoundIdField]:this.metadata.idMetadata.getId(r)}):a.push(o.metadata.idMetadata.getIdFilter(d(c.compoundIdField))));for(const h in c.fields)Object.prototype.hasOwnProperty.call(c.fields,h)&&a.push({[h]:d(c.fields[h])});return u.where={$and:a},(e.type===\"toOne\"||e.type===\"reference\")&&u.orderBy&&(u.limit=1),{findOptions:u,returnNull:s,returnUndefined:l}}async _mapRawDataToResult(e,n){if(!e)return;let i=new this._entity(this._remult),r=new _i(this._info,i,this,this._edp,this._remult,!1);return Object.defineProperty(i,yn,{get:()=>r}),await r.loadDataFrom(e,n),r.saveOriginalData(),i}toJson(e){return e==null?e:Array.isArray(e)?e.map(n=>this.toJson(n)):typeof e.then==\"function\"?e.then(n=>this.toJson(n)):this.getEntityRef(e).toApiJson(!0)}fromJson(e,n){if(e==null)return e;if(Array.isArray(e))return e.map(r=>this.fromJson(r,n));let i=new this._entity(this._remult);for(const r of this._fieldsOf(e))if(gt(r.valueType,!1)){let s=e[r.key];typeof s==\"string\"||typeof s==\"number\"?i[r.key]=s:i[r.key]=this._remult.repo(r.valueType).fromJson(s)}else e[r.key]!==void 0&&(i[r.key]=r.valueConverter.fromJson(e[r.key]));if(this._fixTypes(i),n)return this.create(i);{let r=new _i(this._info,i,this,this._edp,this._remult,!1);return Object.defineProperty(i,yn,{get:()=>r}),r.saveOriginalData(),i}}async count(e){return this._edp.count(await this._translateWhereToFilter(e))}async deleteMany({where:e}){if(me.throwErrorIfFilterIsEmpty(e,\"deleteMany\"),this._dataProvider.isProxy)return this._edp.deleteMany(await this._translateWhereToFilter(e));{let n=0;for await(const i of this.query({where:e}))await Le(i).delete(),n++;return n}}async findOne(e,n=!1){let i,r;if(e||(e={}),e.useCache){let o=bo(e,this.metadata),s=JSON.stringify(o);if(r=this._cache.get(s),r!==void 0)if(r.value&&this.getEntityRef(r.value).wasDeleted())r=void 0,this._cache.delete(s);else return this._cache.get(s).promise;else r={value:void 0,promise:void 0},this._cache.set(s,r)}return i=this.find({...e,limit:1},n).then(async o=>{let s;return o.length>0&&(s=o[0]),!s&&e.createIfNotFound&&(s=this.create(),e.where&&await xs(this.metadata,e.where,s)),s}),r&&(r.promise=i=i.then(o=>(r.value=o,o))),i}async findFirst(e,n,i=!1){if(n||(n={}),e)if(n.where){let r=n.where;n.where={$and:[r,e]}}else n.where=e;return this.findOne(n,i)}_fieldsOf(e){let n=Object.keys(e);return this.metadata.fields.toArray().filter(i=>n.includes(i.key))}create(e){var i;let n=new this._entity(this._remult);if(e){for(const r of this._fieldsOf(e))n[r.key]=e[r.key];this._fixTypes(n)}return(i=this._defaultFindOptions)!=null&&i.where&&(xs(this.metadata,this._defaultFindOptions.where,n),this._fixTypes(n)),this.getEntityRef(n),n}async _fixTypes(e){for(const n of this._fieldsOf(e)){const i=e[n.key];if(i!=null)if(n.valueType===Date&&!(i instanceof Date))e[n.key]=n.valueConverter.fromJson(n.valueConverter.toJson(i));else for(const[r,o]of[[String,\"string\"],[Number,\"number\"],[Boolean,\"boolean\"]])n.valueType===r&&typeof i!==o&&(e[n.key]=n.valueConverter.fromJson(n.valueConverter.toJson(i)))}return e}findId(e,n){if(e==null)return null;if(typeof e!=\"string\"&&typeof e!=\"number\")throw new Error(\"id can be either number or string, but got: \"+typeof e);return this.findFirst({},{...n,where:this.metadata.idMetadata.getIdFilter(e)},!0)}async _translateWhereToFilter(e){var i,r;e||(e={}),(i=this._defaultFindOptions)!=null&&i.where&&(e={$and:[e,(r=this._defaultFindOptions)==null?void 0:r.where]}),this._dataProvider.isProxy||(this.metadata.options.backendPreprocessFilter&&(e=await this.metadata.options.backendPreprocessFilter(e,{metadata:this.metadata,getFilterPreciseValues:o=>me.getPreciseValues(this.metadata,o||e)})),this.metadata.options.backendPrefilter&&(e={$and:[e,await me.resolve(this.metadata.options.backendPrefilter)]}));let n=await me.fromEntityFilter(this.metadata,e);return n&&!this._dataProvider.isProxy&&(n=await me.translateCustomWhere(n,this.metadata,this._remult)),n}}function sp(t,e){let n=fe.columnsOfType.get(t);n||fe.columnsOfType.set(t,n=[]);let i=gt(t)(e),r=O1(t),o=Object.getPrototypeOf(t);for(;o!=null;){let s=fe.columnsOfType.get(o);s&&n.unshift(...s.filter(a=>!n.find(u=>u.key==a.key)));let l=gt(o,!1);if(l){let a=l(e);i={...a,...i};let u=[\"saving\",\"saved\",\"deleting\",\"deleted\",\"validation\"];for(const f of u)if(a[f]&&a[f]!==i[f]){let c=i[f];i[f]=async(d,h)=>{await c(d,h),await a[f](d,h)}}}o=Object.getPrototypeOf(o)}return new dp(ap(n,e),i,e,t,r)}class lp{constructor(e,n,i,r){var o;this.fieldsMetadata=e,this.instance=n,this.remult=i,this.isNewRow=r,this._isLoading=!1,this.lookups=new Map,this.originalValues={};{let s=i;s!=null&&s.iAmRemultProxy&&(i=fe.remultFactory())}for(const s of e)if(gt(s.valueType,!1)&&i){let a=new T1(i.repo(s.valueType),!!ze(s),s.allowNull);this.lookups.set(s.key,a);let u=n[s.key],f;Object.defineProperty(n,s.key,{get:()=>(this._subscribers&&(this._subscribers.reportObserved(),f||(f=this.fields.find(s.key),f._subscribers||(f._subscribers=new vi)),f._subscribers.reportObserved()),a.item),set:c=>{var d;a.set(c),(d=this._subscribers)==null||d.reportChanged(),f||(f=this.fields.find(s.key),f._subscribers||(f._subscribers=new vi)),f._subscribers.reportChanged()},enumerable:!0}),a.set(u)}else if(((o=ze(s))==null?void 0:o.type)===\"toOne\"){let a=n.hasOwnProperty(s.key),u=n[s.key];r&&!u&&(a=!1),Object.defineProperty(n,s.key,{get:()=>u,set:f=>{if(u=f,f===void 0)return;const c=s.options;if(c.field&&(this.instance[c.field]=ze(s).toRepo.metadata.idMetadata.getId(f)),c.fields){for(const d in c.fields)if(Object.prototype.hasOwnProperty.call(c.fields,d)){const h=c.fields[d];this.instance[h]=f==null?null:f[d]}}},enumerable:!0}),a&&(n[s.key]=u)}}get error(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._error}set error(e){var n;this._error=e,(n=this._subscribers)==null||n.reportChanged()}subscribe(e){return this.initSubscribers(),this._subscribers.subscribe(e)}initSubscribers(){if(!this._subscribers){this._subscribers=new vi;for(const e of this.fieldsMetadata){let n=gt(e.valueType,!1),i=this.fields.find(e.key);if(i._subscribers=new vi,!(n&&this.remult)){let r=this.instance[e.key];Object.defineProperty(this.instance,e.key,{get:()=>(this._subscribers.reportObserved(),i._subscribers.reportObserved(),r),set:o=>{r=o,this._subscribers.reportChanged(),i._subscribers.reportChanged()},enumerable:!0})}}}}get isLoading(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._isLoading}set isLoading(e){var n;this._isLoading=e,(n=this._subscribers)==null||n.reportChanged()}async waitLoad(){await Yn([...this.lookups.values()],e=>e.waitLoad())}__assertValidity(){if(!this.hasErrors())throw this.buildErrorInfoObject()}buildErrorInfoObject(){let e={modelState:Object.assign({},this.errors),message:this.error};if(!e.message){for(const n of this.fieldsMetadata)if(this.errors[n.key]){e.message=this.fields[n.key].metadata.caption+\": \"+this.errors[n.key],this.error=e.message;break}}return e}catchSaveErrors(e){let n=e;if(n instanceof Promise)return n.then(r=>this.catchSaveErrors(r));n.error&&(n=n.error),n.message?this.error=n.message:n.Message?this.error=n.Message:this.error=n;let i=n.modelState;throw i||(i=n.ModelState),i&&(this.errors=i),e}__clearErrorsAndReportChanged(){this.errors=void 0,this.error=void 0,this._reportChangedToEntityAndFields()}_reportChangedToEntityAndFields(){if(this._subscribers){this._subscribers.reportChanged();for(const e of this.fields)e._subscribers.reportChanged()}}hasErrors(){var e;return(e=this._subscribers)==null||e.reportObserved(),!this.error&&this.errors==null}copyDataToObject(e=!1){let n={};for(const i of this.fieldsMetadata){let r=this.lookups.get(i.key),o;const s=ze(i);r?o=r.id:o=this.instance[i.key],s&&e&&!i.allowNull&&o==null&&(s.toRepo.metadata.idMetadata.field.valueType===Number?o=0:o=\"\"),(!s||s.type===\"reference\")&&(o!==void 0&&(o=i.valueConverter.toJson(o),o!=null&&(o=i.valueConverter.fromJson(JSON.parse(JSON.stringify(o))))),n[i.key]=o)}return n}saveOriginalData(){this.originalValues=this.copyDataToObject(),this.saveMoreOriginalData()}saveMoreOriginalData(){}async validate(){if(this.__clearErrorsAndReportChanged(),await this.__performColumnAndEntityValidations(),this.hasErrors(),!this.hasErrors())return this.buildErrorInfoObject()}async __validateEntity(){this.__clearErrorsAndReportChanged(),await this.__performColumnAndEntityValidations(),this.__assertValidity()}async __performColumnAndEntityValidations(){}toApiJson(e=!1,n=!1){let i={};for(const r of this.fieldsMetadata)if(n||!this.remult||r.includedInApi(this.instance)){let o,s=this.lookups.get(r.key),l=!1;s?e?(o=s.toJson(),l=!0,i[r.key]=o):o=s.id:ze(r)&&!e?l=!0:(o=this.instance[r.key],this.remult||o&&gt(o.constructor,!1)&&(o=Le(o).getId())),l||(i[r.key]=r.valueConverter.toJson(o))}return i}async _updateEntityBasedOnApi(e,n=!1){let i=Object.keys(e);for(const r of this.fieldsMetadata)if(i.includes(r.key)&&r.includedInApi(this.instance)&&(!this.remult||n||r.apiUpdateAllowed(this.instance))){let o=this.lookups.get(r.key);o?o.id=e[r.key]:this.instance[r.key]=r.valueConverter.fromJson(e[r.key])}await Yn([...this.fields].filter(r=>!ze(r.metadata)),r=>r.load())}}class _i extends lp{constructor(e,n,i,r,o,s){if(super(e.fieldsMetadata,n,o,s),this.info=e,this.repository=i,this.edp=r,this._isNew=s,this._wasDeleted=!1,this._saving=!1,this.metadata=e,s)for(const l of e.fieldsMetadata)l.options.defaultValue&&n[l.key]===void 0&&(typeof l.options.defaultValue==\"function\"?n[l.key]=l.options.defaultValue(n):n[l.key]||(n[l.key]=l.options.defaultValue));this.info.options.entityRefInit&&this.info.options.entityRefInit(this,n),Pn.entityRefInit&&Pn.entityRefInit(this,n)}clone(){const e=this.toApiJson(!0,!0);return this.repository.fromJson(e,this.isNew())}get relations(){return this.repository.relations(this.instance)}get apiUpdateAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiUpdate)}get apiDeleteAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiDelete)}get apiInsertAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiInsert)}getId(){const e=n=>{let i=this.lookups.get(n.key);return i?i.id:this.instance[n.key]};return this.metadata.idMetadata.field instanceof Zt?this.metadata.idMetadata.field.getId(e):e(this.metadata.idMetadata.field)}saveMoreOriginalData(){this.originalId=this.getId()}wasDeleted(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._wasDeleted}undoChanges(){this.loadDataFrom(this.originalValues),this.__clearErrorsAndReportChanged()}async reload(){return await this.edp.find({where:await this.getIdFilter()}).then(async e=>{if(e.length===0)throw this.repository._notFoundError(this.id);await this.loadDataFrom(e[0]),this.saveOriginalData()}),this._reportChangedToEntityAndFields(),this.instance}get fields(){if(!this._columns){let e=[],n={find:i=>n[typeof i==\"string\"?i:i.key],[Symbol.iterator]:()=>e[Symbol.iterator](),toArray:()=>e};for(const i of this.info.fieldsMetadata)e.push(n[i.key]=new nl(i.options,i,this.instance,this,this));this._columns=n}return this._columns}async save(e){var n;try{if(this._saving)throw new Error(\"cannot save while entity is already saving\");if(this._saving=!0,this.wasDeleted())throw new Error(\"cannot save a deleted row\");this.isLoading=!0,e===void 0&&await this.__validateEntity();let i=!1,r=this.buildLifeCycleEvent(()=>i=!0);if(!this.repository._dataProvider.isProxy){for(const u of this.fields)u.metadata.options.saving&&await u.metadata.options.saving(this.instance,u,r);this.info.entityInfo.saving&&await this.info.entityInfo.saving(this.instance,r)}this.__assertValidity();let o=this.copyDataToObject(this.isNew()),s=[];for(const u of this.metadata.fields)if(u.dbReadOnly||e!==void 0&&!e.includes(u.key)){o[u.key]=void 0,s.push(u.key);let f=this.fields.find(u);f.value=f.originalValue}let l,a=this.isNew();try{if((n=this._subscribers)==null||n.reportChanged(),this.isNew())l=await this.edp.insert(o);else{let u={},f=!1;for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c];this.fields.find(c).valueChanged()&&!s.includes(c)&&(u[c]=d,f=!0)}if(!f)return this.instance;i?l=(await this.edp.find({where:await this.getIdFilter()}))[0]:l=await this.edp.update(this.id,u)}if(await this.loadDataFrom(l),r.id=this.getId(),!this.repository._dataProvider.isProxy&&(this.info.entityInfo.saved&&await this.info.entityInfo.saved(this.instance,r),this.repository.listeners))for(const u of this.repository.listeners.filter(f=>f.saved))await u.saved(this.instance,a);return await this.repository._remult.liveQueryPublisher.itemChanged(this.repository.metadata.key,[{id:this.getId(),oldId:this.getOriginalId(),deleted:!1}]),this.saveOriginalData(),this._isNew=!1,this.instance}catch(u){await this.catchSaveErrors(u)}}finally{this.isLoading=!1,this._reportChangedToEntityAndFields(),this._saving=!1}}async processInsertResponseDto(e){return await this.loadDataFrom(e),this.saveOriginalData(),this._isNew=!1,this.instance}async buildDtoForInsert(){await this.__validateEntity(),this.__assertValidity();let e=this.copyDataToObject(this.isNew()),n=[];for(const i of this.metadata.fields)if(i.dbReadOnly){e[i.key]=void 0,n.push(i.key);let r=this.fields.find(i);r.value=r.originalValue}return e}buildLifeCycleEvent(e=()=>{}){const n=this;return{isNew:n.isNew(),fields:n.fields,id:n.getId(),originalId:n.getOriginalId(),metadata:n.repository.metadata,repository:n.repository,preventDefault:()=>e(),relations:n.repository.relations(n.instance)}}async getIdFilter(){return await this.repository._translateWhereToFilter(this.repository.metadata.idMetadata.getIdFilter(this.id))}async delete(){this.__clearErrorsAndReportChanged();let e=!0,n=this.buildLifeCycleEvent(()=>e=!1);this.repository._dataProvider.isProxy||this.info.entityInfo.deleting&&await this.info.entityInfo.deleting(this.instance,n),this.__assertValidity();try{if(e&&await this.edp.delete(this.id),this.repository._dataProvider.isProxy||this.info.entityInfo.deleted&&await this.info.entityInfo.deleted(this.instance,n),this.repository.listeners)for(const i of this.repository.listeners.filter(r=>r.deleted))await i.deleted(this.instance);await this.repository._remult.liveQueryPublisher.itemChanged(this.repository.metadata.key,[{id:this.getId(),oldId:this.getOriginalId(),deleted:!0}]),this._wasDeleted=!0}catch(i){await this.catchSaveErrors(i)}}async loadDataFrom(e,n){for(const i of this.info.fields){let r=this.lookups.get(i.key);r?(r.id=e[i.key],n===void 0?!i.options.lazy&&!ze(i)&&await r.waitLoad():n.includes(i)&&await r.waitLoad()):ze(i)||(this.instance[i.key]=e[i.key])}await this.calcServerExpression(),this.id=this.getId()}getOriginalId(){return this.originalId}async calcServerExpression(){if(j1())for(const e of this.info.fieldsMetadata)e.options.serverExpression&&(this.instance[e.key]=await e.options.serverExpression(this.instance))}isNew(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._isNew}wasChanged(){var e;(e=this._subscribers)==null||e.reportObserved();for(const n of this.fields){const i=ze(n.metadata);if((!i||i.type==\"reference\")&&n.valueChanged())return!0}return!1}async __performColumnAndEntityValidations(){for(const e of this.fieldsMetadata)e.options.validate&&await new nl(e.options,e,this.instance,this,this).__performValidation();if(this.info.entityInfo.validation){let e=this.buildLifeCycleEvent(()=>{});await this.info.entityInfo.validation(this.instance,e)}if(this.repository.listeners)for(const e of this.repository.listeners.filter(n=>n.validating))await e.validating(this.instance)}}function ap(t,e){return t.map(n=>mp(n.settings(e),e))}class nl{constructor(e,n,i,r,o){this.settings=e,this.metadata=n,this.container=i,this.helper=r,this.rowBase=o,this.target=this.settings.target,this.entityRef=this.helper}subscribe(e){return this._subscribers||this.rowBase.initSubscribers(),this._subscribers.subscribe(e)}valueIsNull(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id===void 0||e.id===null:this.value===null}originalValueIsNull(){return this.reportObserved(),this.rowBase.lookups.get(this.metadata.key),this.rawOriginalValue()===null}async load(){let e=this.rowBase.lookups.get(this.metadata.key),n=ze(this.metadata);if(n){if(n.type===\"toMany\")return this.container[this.metadata.key]=await this.helper.repository.relations(this.container)[this.metadata.key].find();{let i=await this.helper.repository.relations(this.container)[this.metadata.key].findOne();if(i)this.container[this.metadata.key]=i;else return null}}else if(e)return this.valueChanged()&&await e.waitLoadOf(this.rawOriginalValue()),await e.waitLoad();return this.value}reportObserved(){var e,n;(e=this._subscribers)==null||e.reportObserved(),(n=this.rowBase._subscribers)==null||n.reportObserved()}reportChanged(){var e,n;(e=this._subscribers)==null||e.reportChanged(),(n=this.rowBase._subscribers)==null||n.reportChanged()}get error(){if(this.reportObserved(),!!this.rowBase.errors)return this.rowBase.errors[this.metadata.key]}set error(e){this.rowBase.errors||(this.rowBase.errors={}),this.rowBase.errors[this.metadata.key]=e,this.reportChanged()}get displayValue(){return this.reportObserved(),this.value!=null?this.settings.displayValue?this.settings.displayValue(this.container,this.value):this.metadata.valueConverter.displayValue?this.metadata.valueConverter.displayValue(this.value):this.value.toString():\"\"}get value(){return this.container[this.metadata.key]}set value(e){this.container[this.metadata.key]=e}get originalValue(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.get(this.rawOriginalValue()):this.rowBase.originalValues[this.metadata.key]}rawOriginalValue(){return this.rowBase.originalValues[this.metadata.key]}setId(e){this.value=e}getId(){let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id!=null?e.id:null:this.value}get inputValue(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id!=null?e.id.toString():null:this.metadata.valueConverter.toInput(this.value,this.settings.inputType)}set inputValue(e){let n=this.rowBase.lookups.get(this.metadata.key);n?n.setId(e):this.value=this.metadata.valueConverter.fromInput(e,this.settings.inputType)}valueChanged(){this.reportObserved();let e=this.value,n=this.rowBase.lookups.get(this.metadata.key);return n&&(e=n.id),JSON.stringify(this.metadata.valueConverter.toJson(this.rowBase.originalValues[this.metadata.key]))!=JSON.stringify(this.metadata.valueConverter.toJson(e))}async __performValidation(){var e;try{const n=i=>{i!==!0&&i!==void 0&&!this.error&&(typeof i==\"string\"&&i.length>0?this.error=i:this.error=\"invalid value\")};if(this.settings.validate){let i=this,r={entityRef:this.entityRef,get error(){return i.error},set error(o){i.error=o},isNew:(e=this.entityRef)==null?void 0:e.isNew(),load:()=>i.load(),metadata:i.metadata,originalValue:i.originalValue,value:i.value,valueChanged:()=>i.valueChanged(),originalValueIsNull:()=>i.originalValueIsNull(),valueIsNull:()=>i.valueIsNull(),isBackend:()=>{var o,s,l;return!((l=(s=(o=i.rowBase)==null?void 0:o.remult)==null?void 0:s.dataProvider)!=null&&l.isProxy)}};if(Array.isArray(this.settings.validate))for(const o of this.settings.validate)n(await o(this.container,r));else typeof this.settings.validate==\"function\"&&n(await this.settings.validate(this.container,r))}}catch(n){typeof n==\"string\"?this.error=n:this.error=n.message}}async validate(){return await this.__performValidation(),!this.error}}let up={transformCaption:(t,e,n,i)=>n};const fp=fe.captionTransformer||(fe.captionTransformer=up);function Pu(t,e,n,i){let r;return typeof t==\"function\"?n&&(r=t(n)):t&&(r=t),r=fp.transformCaption(n,e,r,i),r||(e?I1(e):\"\")}class cp{constructor(e,n,i){this.settings=e,this.entityDefs=n,this.remult=i,this.options=this.settings,this.target=this.settings.target,this.valueConverter=new Proxy(this.settings.valueConverter,{get:(r,o)=>{let s=r[o];return typeof s==\"function\"?(...l)=>{try{return r[o](...l)}catch(a){const u=`${String(o)} failed for value ${l==null?void 0:l[0]}. Error: ${typeof a==\"string\"?a:a.message}`;throw{message:this.caption+\": \"+u,modelState:{[this.key]:u}}}}:s}}),this.allowNull=!!this.settings.allowNull,this.valueType=this.settings.valueType,this.key=this.settings.key,this.inputType=this.settings.inputType,e.serverExpression&&(this.isServerExpression=!0),typeof this.settings.allowApiUpdate==\"boolean\"&&(this.readonly=this.settings.allowApiUpdate),this.inputType||(this.inputType=this.valueConverter.inputType),this.dbName=e.dbName,this.dbName==null&&(this.dbName=e.key),this.caption=Pu(e.caption,e.key,i,n)}apiUpdateAllowed(e){return this.options.allowApiUpdate===void 0?!0:this.remult.isAllowedForInstance(e,this.options.allowApiUpdate)}displayValue(e){return this.entityDefs.getEntityMetadataWithoutBreakingTheEntity(e).fields.find(this.key).displayValue}includedInApi(e){return this.options.includeInApi===void 0?!0:this.remult.isAllowedForInstance(e,this.options.includeInApi)}toInput(e,n){return this.valueConverter.toInput(e,n)}fromInput(e,n){return this.valueConverter.fromInput(e,n)}async getDbName(){return _o(this,this.entityDefs)}get dbReadOnly(){return this.settings.dbReadOnly}}class dp{constructor(e,n,i,r,o){if(this.entityInfo=n,this.remult=i,this.entityType=r,this.key=o,this.fieldsMetadata=[],this.idMetadata={getId:l=>{if(l==null)return l;const a=Le(l,!1);return a?a.getId():this.idMetadata.field instanceof Zt?this.idMetadata.field.getId(l):l[this.idMetadata.field.key]},field:void 0,get fields(){return this.field instanceof Zt?this.field.fields:[this.field]},createIdInFilter:l=>{if(l.length>0)return{$or:l.map(a=>this.idMetadata.getIdFilter(Le(a).getId()))}},isIdField:l=>l.key==this.idMetadata.field.key,getIdFilter:(...l)=>{if(this.idMetadata.field instanceof Zt){let a=this.idMetadata.field;return l.length==1?a.isEqualTo(l[0]):{$or:l.map(u=>a.isEqualTo(u))}}return l.length==1?{[this.idMetadata.field.key]:l[0]}:{[this.idMetadata.field.key]:l}}},this.options=n,this.options.allowApiCrud!==void 0){let l;typeof this.options.allowApiCrud==\"function\"?l=(a,u)=>this.options.allowApiCrud(u):l=this.options.allowApiCrud,this.options.allowApiDelete===void 0&&(this.options.allowApiDelete=l),this.options.allowApiInsert===void 0&&(this.options.allowApiInsert=l),this.options.allowApiUpdate===void 0&&(this.options.allowApiUpdate=l),this.options.allowApiRead===void 0&&(this.options.allowApiRead=this.options.allowApiCrud)}this.options.allowApiRead===void 0&&(this.options.allowApiRead=!0),this.key||(this.key=r.name),n.dbName||(n.dbName=this.key),this.dbName=n.dbName;let s={find:l=>s[typeof l==\"string\"?l:l.key],[Symbol.iterator]:()=>this.fieldsMetadata[Symbol.iterator](),toArray:()=>this.fieldsMetadata};for(const l of e)this.fieldsMetadata.push(s[l.key]=new cp(l,this,i));if(this.fields=s,this.caption=Pu(n.caption,this.key,i,this),n.id){let l=typeof n.id==\"function\"?n.id(this.fields):Object.keys(n.id).map(a=>this.fields.find(a));Array.isArray(l)?l.length>1?this.idMetadata.field=new Zt(...l):l.length==1&&(this.idMetadata.field=l[0]):this.idMetadata.field=l}this.idMetadata.field||(this.fields.id?this.idMetadata.field=this.fields.id:this.idMetadata.field=[...this.fields][0])}apiUpdateAllowed(e){return this.options.allowApiUpdate===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiUpdateAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiUpdate)}get apiReadAllowed(){return this.options.allowApiRead===void 0?!0:this.remult.isAllowed(this.options.allowApiRead)}apiDeleteAllowed(e){return this.options.allowApiDelete===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiDeleteAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiDelete)}apiInsertAllowed(e){return this.options.allowApiUpdate===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiInsertAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiInsert)}getEntityMetadataWithoutBreakingTheEntity(e){let n=Le(e,!1);return n||this.remult.repo(this.entityType).getEntityRef({...e})}getDbName(){return Au(this)}}function hp(t){var e,n;return((n=(e=t.options)==null?void 0:e.valueConverter)==null?void 0:n.fieldTypeInDb)===\"autoincrement\"}const gp=Symbol.for(\"storableMember\"),Fr=Symbol.for(\"fieldOptionalValues\");function Nu(t,e){let n={};for(const i of t)if(i)if(typeof i==\"function\")i(n,e);else{const{validate:r,...o}=i;n.validate=Ai(n.validate,r),Object.assign(n,o)}return n}function mp(t,e){if(t.valueType){let n=t.valueType[gp];n&&(t=Nu([...n,t],e))}if(t.valueType==String){let n=t;t.valueConverter||(n.valueConverter=Ze.String)}if(t.valueType==Number){let n=t;t.valueConverter||(n.valueConverter=Ze.Number)}if(t.valueType==Date){let n=t;t.valueConverter||(n.valueConverter=Ze.Date)}if(t.valueType==Boolean){let n=t;n.valueConverter||(n.valueConverter=Ze.Boolean)}if(!t.valueConverter){if(gt(t.valueType,!1)){let i;t.valueConverter={toDb:r=>r,fromDb:r=>r},t.valueConverter=new Proxy(t.valueConverter,{get(r,o){if(r[o]===void 0&&i===void 0){if(o===\"inputType\")return\"\";i=e.repo(t.valueType).metadata.idMetadata.field.valueType===Number;for(const s of[\"fieldTypeInDb\",\"toJson\",\"fromJson\",\"toDb\",\"fromDb\"])r[s]=i?Ze.Integer[s]:Ze.String[s]}return r[o]},set(r,o,s,l){return r[o]=s,!0}})}else t.valueConverter=Ze.Default;return t}return t.valueConverter.toJson||(t.valueConverter.toJson=n=>n),t.valueConverter.fromJson||(t.valueConverter.fromJson=n=>n),t.valueConverter.toDb||(t.valueConverter.toDb=n=>t.valueConverter.toJson(n)),t.valueConverter.fromDb||(t.valueConverter.fromDb=n=>t.valueConverter.fromJson(n)),t.valueConverter.toInput||(t.valueConverter.toInput=n=>t.valueConverter.toJson(n)),t.valueConverter.fromInput||(t.valueConverter.fromInput=n=>t.valueConverter.fromJson(n)),t}class yp{get _(){return Le(this)}save(){return Le(this).save()}assign(e){return $r(this,e),this}delete(){return this._.delete()}isNew(){return this._.isNew()}get $(){return this._.fields}}class pp{constructor(e,n){this.options=e,this.repo=n,this._count=void 0,this.options||(this.options={}),this.options.pageSize||(this.options.pageSize=Q1.defaultPageSize)}async getPage(e){return e<1&&(e=1),this.repo.find({where:this.options.where,orderBy:this.options.orderBy,limit:this.options.pageSize,page:e,load:this.options.load,include:this.options.include})}async count(){return this._count===void 0&&(this._count=await this.repo.count(this.options.where)),this._count}async forEach(e){let n=0;for await(const i of this)await e(i),n++;return n}async paginator(e){this.options.orderBy=it.createUniqueEntityOrderBy(this.repo.metadata,this.options.orderBy);let n=await this.repo.find({where:{$and:[this.options.where,e]},orderBy:this.options.orderBy,limit:this.options.pageSize,load:this.options.load,include:this.options.include}),i,r=n.length==this.options.pageSize;if(r){let o=await this.repo._createAfterFilter(this.options.orderBy,n[n.length-1]);i=()=>this.paginator(o)}return{count:()=>this.count(),hasNextPage:r,items:n,nextPage:i}}[Symbol.asyncIterator](){this.options.where||(this.options.where={});let e=this.options.orderBy;this.options.orderBy=it.createUniqueEntityOrderBy(this.repo.metadata,e);let n=-1,i,r,o=0;return r=async()=>{if(this.options.progress&&this.options.progress.progress(o++/await this.count()),i===void 0||n==i.items.length){if(i&&!i.hasNextPage)return{value:void 0,done:!0};let s=i;if(i?i=await i.nextPage():i=await this.paginator(),n=0,i.items.length==0)return{value:void 0,done:!0};if((s==null?void 0:s.items.length)>0&&this.repo.getEntityRef(s.items[0]).getId()==this.repo.getEntityRef(i.items[0]).getId())throw new Error(\"pagination failure, returned same first row\")}if(n<i.items.length)return{value:i.items[n++],done:!1}},{next:async()=>r()}}}class vi{reportChanged(){this._subscribers&&this._subscribers.forEach(e=>e.reportChanged())}reportObserved(){this._subscribers&&this._subscribers.forEach(e=>e.reportObserved())}subscribe(e){let n;return typeof e==\"function\"?n={reportChanged:()=>e(),reportObserved:()=>{}}:n=e,this._subscribers||(this._subscribers=[]),this._subscribers.push(n),()=>this._subscribers=this._subscribers.filter(i=>i!=n)}}function bp(t){return t.metadata?t.metadata:gt(t,!1)?wt.repo(t).metadata:t}function wp(t){return gt(t,!1)?wt.repo(t):t}async function Yn(t,e){const n=[];for(let i=0;i<t.length;i++){const r=t[i];n.push(await e(r,i))}return n}const il=Ti(t=>!isNaN(t)&&isFinite(t));class wn{static object(...e){return tt(void 0,...e)}static json(...e){let n=e;return n.valueConverter&&!n.valueConverter.fieldTypeInDb&&(n.valueConverter.fieldTypeInDb=\"json\"),tt(void 0,{valueConverter:{fieldTypeInDb:\"json\"}},...e)}static dateOnly(...e){return tt(()=>Date,{valueConverter:Ze.DateOnly},...e)}static date(...e){return tt(()=>Date,...e)}static integer(...e){return tt(()=>Number,{valueConverter:Ze.Integer,validate:il},...e)}static autoIncrement(...e){return tt(()=>Number,{allowApiUpdate:!1,dbReadOnly:!0,valueConverter:{...Ze.Integer,fieldTypeInDb:\"autoincrement\"}},...e)}static number(...e){return tt(()=>Number,{validate:il},...e)}static createdAt(...e){return tt(()=>Date,{allowApiUpdate:!1,saving:(n,i,{isNew:r})=>{r&&(i.value=new Date)}},...e)}static updatedAt(...e){return tt(()=>Date,{allowApiUpdate:!1,saving:(n,i)=>{i.value=new Date}},...e)}static uuid(...e){return tt(()=>String,{allowApiUpdate:!1,defaultValue:()=>Zr(),saving:(n,i)=>{i.value||(i.value=Zr())}},...e)}static cuid(...e){return tt(()=>String,{allowApiUpdate:!1,defaultValue:()=>Js(),saving:(n,i)=>{i.value||(i.value=Js())}},...e)}static literal(e,...n){return wn.string({validate:(i,r)=>Ft.in(e())(i,r),[Fr]:e},...n)}static enum(e,...n){let i;return tt(()=>e(),{validate:(r,o)=>Ft.enum(e())(r,o),[Fr]:()=>Mi(e())},...n,r=>{if(r[Fr]=()=>Mi(e()),i===void 0){let o=e();i=Mi(o).find(l=>typeof l==\"string\")?Ze.String:Ze.Integer}r.valueConverter?r.valueConverter.fieldTypeInDb||(r.valueConverter.fieldTypeInDb=i.fieldTypeInDb):r.valueConverter=i})}static string(...e){return tt(()=>String,...e)}static boolean(...e){return tt(()=>Boolean,...e)}}function tt(t,...e){return(n,i,r)=>{const o=typeof i==\"string\"?i:i.name.toString();let s=u=>{let f=Nu(e,u);f.required&&(f.validate=Ai(f.validate,Ft.required,!0)),f.maxLength&&(f.validate=Ai(f.validate,Ft.maxLength(f.maxLength))),f.minLength&&(f.validate=Ai(f.validate,Ft.minLength(f.minLength))),!f.valueType&&t&&(f.valueType=t()),f.key||(f.key=o),f.dbName||(f.dbName=f.key);let c=f.valueType;return c||(c=typeof Reflect.getMetadata==\"function\"?Reflect.getMetadata(\"design:type\",n,o):[],f.valueType=c),f.target||(f.target=n),f};_p(n);let l=fe.columnsOfType.get(n.constructor);l||(l=[],fe.columnsOfType.set(n.constructor,l));let a=l.find(u=>u.key==o);if(!a)l.push({key:o,settings:s});else{let u=a.settings;a.settings=f=>{let c=u(f),d=s(f);return Object.assign(c,d)}}}}function _p(t){if(!t)throw new Error(\"Set the 'experimentalDecorators:true' option in your 'tsconfig' or 'jsconfig' (target undefined)\")}function vp(t,...e){return(n,i)=>{var o;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const l=n[s];(o=l==null?void 0:l.rawFilterInfo)!=null&&o.rawFilterTranslator&&(l.rawFilterInfo.key||(l.rawFilterInfo.key=s))}let r=s=>{let l={};for(const u of e)u&&(typeof u==\"function\"?u(l,s):Object.assign(l,u));let a=Object.getPrototypeOf(n);if(a){let u=gt(a,!1);if(u){let f=u(s);f&&(l={...f,...l})}}return l};return fe.allEntities.push(n),Z1(n,{key:t}),n[ku]=r,n[Su]=t,n}}const rl=[\"rgb(101, 116, 205)\",\"rgb(149, 97, 226)\",\"rgb(246, 109, 155)\",\"rgb(184, 194, 204)\",\"rgb(227, 52, 47)\",\"rgb(246, 153, 63)\",\"rgb(255, 237, 74)\",\"rgb(56, 193, 114)\",\"rgb(132, 204, 22)\",\"rgb(77, 192, 181)\",\"rgb(52, 144, 220)\",\"rgba(0, 0, 255, 0.45)\"];class kp{constructor(e){li(this,\"tables\");this.tables=e.map((n,i)=>{n.color=rl[i%rl.length];class r{}for(const o of n.fields)switch(o.type){case\"json\":wn.json()(r.prototype,o.key);break;case\"number\":wn.number()(r.prototype,o.key);break;case\"boolean\":wn.boolean()(r.prototype,o.key);break;default:wn.string()(r.prototype,o.key);break}return vp(n.key,{allowApiCrud:!0,caption:n.caption,id:n.ids})(r),{...n,repo:wt.repo(r)}})}async getItemsForSelect(e,n){return(await this.tables.find(r=>r.key==e.entityKey).repo.find({limit:25,orderBy:{[e.captionField]:\"asc\"},where:{[e.captionField]:n?{$contains:n}:void 0}})).map(r=>({id:r[e.idField],caption:r[e.captionField]}))}async displayValueFor(e,n){const i=e.relationToOne,o=await this.tables.find(s=>s.key==i.entityKey).repo.findId(n);return o?o[i.captionField]:\"not found - \"+n}}function Sp(){const{subscribe:t,set:e}=re();return e(new kp(entities)),{subscribe:t}}const pr=Sp();function ol(t,e,n){const i=t.slice();return i[3]=e[n],i}function sl(t){let e,n,i,r,o,s=t[3].caption+\"\",l,a,u,f,c,d,h;return n=new Vt({props:{type:\"source\",position:ye.Left,id:`${t[3].key}-source-left`}}),r=new Vt({props:{type:\"target\",position:ye.Left,id:`${t[3].key}-target-left`}}),u=new Vt({props:{type:\"source\",position:ye.Right,id:`${t[3].key}-source-right`}}),c=new Vt({props:{type:\"target\",position:ye.Right,id:`${t[3].key}-target-right`}}),{c(){e=ne(\"div\"),ee(n.$$.fragment),i=de(),ee(r.$$.fragment),o=de(),l=He(s),a=de(),ee(u.$$.fragment),f=de(),ee(c.$$.fragment),d=de(),S(e,\"class\",\"entity-field svelte-7jxvol\")},m(g,y){q(g,e,y),x(n,e,null),G(e,i),x(r,e,null),G(e,o),G(e,l),G(e,a),x(u,e,null),G(e,f),x(c,e,null),G(e,d),h=!0},p:le,i(g){h||(P(n.$$.fragment,g),P(r.$$.fragment,g),P(u.$$.fragment,g),P(c.$$.fragment,g),h=!0)},o(g){R(n.$$.fragment,g),R(r.$$.fragment,g),R(u.$$.fragment,g),R(c.$$.fragment,g),h=!1},d(g){g&&B(e),$(n),$(r),$(u),$(c)}}}function Ep(t){let e,n,i=t[0].caption+\"\",r,o,s,l,a=We(t[1]()),u=[];for(let c=0;c<a.length;c+=1)u[c]=sl(ol(t,a,c));const f=c=>R(u[c],1,1,()=>{u[c]=null});return{c(){e=ne(\"div\"),n=ne(\"div\"),r=He(i),o=de(),s=ne(\"div\");for(let c=0;c<u.length;c+=1)u[c].c();S(n,\"class\",\"entity-name svelte-7jxvol\"),S(s,\"class\",\"entity-fields svelte-7jxvol\"),S(e,\"class\",\"entity-node svelte-7jxvol\"),se(e,\"--color\",t[0].color)},m(c,d){q(c,e,d),G(e,n),G(n,r),G(e,o),G(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);l=!0},p(c,[d]){if((!l||d&1)&&i!==(i=c[0].caption+\"\")&&ft(r,i),d&2){a=We(c[1]());let h;for(h=0;h<a.length;h+=1){const g=ol(c,a,h);u[h]?(u[h].p(g,d),P(u[h],1)):(u[h]=sl(g),u[h].c(),P(u[h],1),u[h].m(s,null))}for(Te(),h=a.length;h<u.length;h+=1)f(h);Me()}(!l||d&1)&&se(e,\"--color\",c[0].color)},i(c){if(!l){for(let d=0;d<a.length;d+=1)P(u[d]);l=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)R(u[d]);l=!1},d(c){c&&B(e),Cn(u,c)}}}function Cp(t,e,n){const i=[\"data\"];Re(e,i);let{data:r}=e;const o=()=>r.fields;return t.$$set=s=>{e=_e(_e({},e),mt(s)),n(2,Re(e,i)),\"data\"in s&&n(0,r=s.data)},[r,o]}class Op extends ue{constructor(e){super(),ae(this,e,Cp,Ep,ce,{data:0})}}function Ip(t){let e,n,i,r,o,s;return e=new Jy({props:{patternColor:\"#aaa\",gap:16}}),i=new Fy({}),o=new n1({props:{zoomable:!0,pannable:!0,height:120}}),{c(){ee(e.$$.fragment),n=de(),ee(i.$$.fragment),r=de(),ee(o.$$.fragment)},m(l,a){x(e,l,a),q(l,n,a),x(i,l,a),q(l,r,a),x(o,l,a),s=!0},p:le,i(l){s||(P(e.$$.fragment,l),P(i.$$.fragment,l),P(o.$$.fragment,l),s=!0)},o(l){R(e.$$.fragment,l),R(i.$$.fragment,l),R(o.$$.fragment,l),s=!1},d(l){l&&(B(n),B(r)),$(e,l),$(i,l),$(o,l)}}}function Tp(t){let e,n,i;return n=new uy({props:{nodes:t[0],edges:t[1],nodeTypes:t[2],fitView:!0,snapGrid:[16,16],$$slots:{default:[Ip]},$$scope:{ctx:t}}}),{c(){e=ne(\"div\"),ee(n.$$.fragment),se(e,\"height\",\"100vh\")},m(r,o){q(r,e,o),x(n,e,null),i=!0},p(r,[o]){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){i||(P(n.$$.fragment,r),i=!0)},o(r){R(n.$$.fragment,r),i=!1},d(r){r&&B(e),$(n)}}}function Mp(t,e,n,i){return{sourceHandle:ll(n)+\"-source-\"+(t.position.x>e.position.x?\"left\":\"right\"),targetHandle:ll(i)+\"-target-\"+(t.position.x>e.position.x?\"right\":\"left\")}}function ll(t){const e=t.split(\"-\");return e[e.length-2]===\"source\"||e[e.length-2]===\"target\"?e.slice(0,e.length-2).join(\"-\"):t}function Ap(t,e,n){let i;j(t,pr,a=>n(3,i=a));const r=re([]),o=re([]),s={entity:Op},l=()=>{var c;const a=i.tables.map((d,h)=>({id:d.repo.metadata.key,position:{x:h*300,y:0},data:d,type:\"entity\"})),u=localStorage.getItem(\"erd\");if(u){const d=JSON.parse(u);for(const h of d){const g=a.find(y=>y.id===h.id);g&&(g.position=h.position)}}r.set(a);const f=[];for(const d of i.tables){let h=function(g,y){const p=i.tables.find(m=>m.key===g);if(p){const m=a.find(b=>b.id===d.key),_=a.find(b=>b.id===p.key);for(const b in y)if(Object.prototype.hasOwnProperty.call(y,b)){const v=y[b];f.push({id:`${d.key}-${v}-to-one`,source:m.id,target:_.id,...Mp(m,_,v,b)})}}};for(const g of d.fields)g.relationToOne&&h((c=g.relationToOne)==null?void 0:c.entityKey,g.relationToOne.fields);for(const g of d.relations)i.tables.find(p=>p.key===g.entityKey)&&h(g.entityKey,g.fields)}console.table(f),o.set(f)};return t.$$.update=()=>{t.$$.dirty&8&&i&&l()},[r,o,s,i]}class Pp extends ue{constructor(e){super(),ae(this,e,Ap,Tp,ce,{})}}function Np(t){let e;return{c(){e=ne(\"h2\"),e.textContent=\"Ho nooo! 404.\"},m(n,i){q(n,e,i)},p:le,i:le,o:le,d(n){n&&B(e)}}}class Dp extends ue{constructor(e){super(),ae(this,e,null,Np,ce,{})}}function Fp(t){let e,n,i;return{c(){e=ne(\"input\")},m(r,o){q(r,e,o),Mo(e,t[0]),n||(i=[be(e,\"input\",t[3]),be(e,\"change\",t[2])],n=!0)},p(r,[o]){o&1&&e.value!==r[0]&&Mo(e,r[0])},i:le,o:le,d(r){r&&B(e),n=!1,Ke(i)}}}function Rp(t,e,n){let{value:i}=e,{info:r}=e;function o(l){ke.call(this,t,l)}function s(){i=this.value,n(0,i)}return t.$$set=l=>{\"value\"in l&&n(0,i=l.value),\"info\"in l&&n(1,r=l.info)},[i,r,o,s]}class zp extends ue{constructor(e){super(),ae(this,e,Rp,Fp,ce,{value:0,info:1})}}const{Boolean:Lp}=Ml;function al(t,e,n){const i=t.slice();return i[22]=e[n],i}function ul(t,e,n){const i=t.slice();return i[25]=e[n],i[26]=e,i[27]=n,i}function fl(t){let e,n,i,r;function o(a,u){return a[3]?Bp:Hp}let s=o(t),l=s(t);return{c(){e=ne(\"td\"),n=ne(\"button\"),l.c(),S(n,\"title\",\"Relations\")},m(a,u){q(a,e,u),G(e,n),l.m(n,null),i||(r=be(n,\"click\",t[15]),i=!0)},p(a,u){s!==(s=o(a))&&(l.d(1),l=s(a),l&&(l.c(),l.m(n,null)))},d(a){a&&B(e),l.d(),i=!1,r()}}}function Hp(t){let e;return{c(){e=He(\">\")},m(n,i){q(n,e,i)},d(n){n&&B(e)}}}function Bp(t){let e;return{c(){e=He(\"\")},m(n,i){q(n,e,i)},d(n){n&&B(e)}}}function cl(t){let e,n,i,r;function o(l){t[16](l,t[25])}let s={info:t[25]};return t[5][t[25].valFieldKey]!==void 0&&(s.value=t[5][t[25].valFieldKey]),n=new zp({props:s}),In.push(()=>Ef(n,\"value\",o)),n.$on(\"change\",qp),{c(){e=ne(\"td\"),ee(n.$$.fragment)},m(l,a){q(l,e,a),x(n,e,null),r=!0},p(l,a){t=l;const u={};a&2&&(u.info=t[25]),!i&&a&34&&(i=!0,u.value=t[5][t[25].valFieldKey],vf(()=>i=!1)),n.$set(u)},i(l){r||(P(n.$$.fragment,l),r=!0)},o(l){R(n.$$.fragment,l),r=!1},d(l){l&&B(e),$(n)}}}function dl(t){let e,n,i,r,o;return{c(){e=ne(\"button\"),e.textContent=\"S\",n=de(),i=ne(\"button\"),i.textContent=\"C\",S(e,\"class\",\"icon-button\"),S(e,\"title\",\"Save\"),S(i,\"class\",\"icon-button\"),S(i,\"title\",\"Cancel\")},m(s,l){q(s,e,l),q(s,n,l),q(s,i,l),r||(o=[be(e,\"click\",t[11]),be(i,\"click\",t[17])],r=!0)},p:le,d(s){s&&(B(e),B(n),B(i)),r=!1,Ke(o)}}}function hl(t){let e,n,i;return{c(){e=ne(\"button\"),e.textContent=\"D\",S(e,\"class\",\"icon-button\"),S(e,\"title\",\"Delete\")},m(r,o){q(r,e,o),n||(i=be(e,\"click\",t[18]),n=!0)},p:le,d(r){r&&B(e),n=!1,i()}}}function gl(t){let e,n,i,r,o,s,l,a=We(t[2]),u=[];for(let c=0;c<a.length;c+=1)u[c]=ml(al(t,a,c));let f=t[9]&&typeof t[3]==\"object\"&&yl(t);return{c(){e=ne(\"tr\"),n=ne(\"td\"),i=de(),r=ne(\"td\");for(let c=0;c<u.length;c+=1)u[c].c();o=de(),f&&f.c(),S(r,\"colspan\",s=t[1].length+1)},m(c,d){q(c,e,d),G(e,n),G(e,i),G(e,r);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(r,null);G(r,o),f&&f.m(r,null),l=!0},p(c,d){if(d&76){a=We(c[2]);let h;for(h=0;h<a.length;h+=1){const g=al(c,a,h);u[h]?u[h].p(g,d):(u[h]=ml(g),u[h].c(),u[h].m(r,o))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}c[9]&&typeof c[3]==\"object\"?f?(f.p(c,d),d&520&&P(f,1)):(f=yl(c),f.c(),P(f,1),f.m(r,null)):f&&(Te(),R(f,1,1,()=>{f=null}),Me()),(!l||d&2&&s!==(s=c[1].length+1))&&S(r,\"colspan\",s)},i(c){l||(P(f),l=!0)},o(c){R(f),l=!1},d(c){c&&B(e),Cn(u,c),f&&f.d()}}}function ml(t){let e,n=t[6].tables.find(s).caption+\"\",i,r,o;function s(...a){return t[19](t[22],...a)}function l(...a){return t[20](t[22],...a)}return{c(){e=ne(\"button\"),i=He(n)},m(a,u){q(a,e,u),G(e,i),r||(o=be(e,\"click\",l),r=!0)},p(a,u){t=a,u&68&&n!==(n=t[6].tables.find(s).caption+\"\")&&ft(i,n)},d(a){a&&B(e),r=!1,o()}}}function yl(t){let e,n;return e=new Fu({props:{columns:t[9].fields,relations:t[9].relations,repo:t[9].repo,parentRelation:t[10]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&512&&(o.columns=i[9].fields),r&512&&(o.relations=i[9].relations),r&512&&(o.repo=i[9].repo),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Vp(t){let e,n,i,r,o,s,l,a,u=t[2].length>0&&fl(t),f=We(t[1]),c=[];for(let p=0;p<f.length;p+=1)c[p]=cl(ul(t,f,p));const d=p=>R(c[p],1,1,()=>{c[p]=null});let h=t[8]&&dl(t),g=t[0]&&hl(t),y=t[3]&&gl(t);return{c(){e=ne(\"tr\"),u&&u.c(),n=de();for(let p=0;p<c.length;p+=1)c[p].c();i=de(),r=ne(\"td\"),h&&h.c(),o=de(),g&&g.c(),s=de(),y&&y.c(),l=Xe(),S(r,\"align\",\"right\"),S(r,\"width\",\"90px\")},m(p,m){q(p,e,m),u&&u.m(e,null),G(e,n);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(e,null);G(e,i),G(e,r),h&&h.m(r,null),G(r,o),g&&g.m(r,null),q(p,s,m),y&&y.m(p,m),q(p,l,m),a=!0},p(p,[m]){if(p[2].length>0?u?u.p(p,m):(u=fl(p),u.c(),u.m(e,n)):u&&(u.d(1),u=null),m&34){f=We(p[1]);let _;for(_=0;_<f.length;_+=1){const b=ul(p,f,_);c[_]?(c[_].p(b,m),P(c[_],1)):(c[_]=cl(b),c[_].c(),P(c[_],1),c[_].m(e,i))}for(Te(),_=f.length;_<c.length;_+=1)d(_);Me()}p[8]?h?h.p(p,m):(h=dl(p),h.c(),h.m(r,o)):h&&(h.d(1),h=null),p[0]?g?g.p(p,m):(g=hl(p),g.c(),g.m(r,null)):g&&(g.d(1),g=null),p[3]?y?(y.p(p,m),m&8&&P(y,1)):(y=gl(p),y.c(),P(y,1),y.m(l.parentNode,l)):y&&(Te(),R(y,1,1,()=>{y=null}),Me())},i(p){if(!a){for(let m=0;m<f.length;m+=1)P(c[m]);P(y),a=!0}},o(p){c=c.filter(Lp);for(let m=0;m<c.length;m+=1)R(c[m]);R(y),a=!1},d(p){p&&(B(e),B(s),B(l)),u&&u.d(),Cn(c,p),h&&h.d(),g&&g.d(),y&&y.d(p)}}}const qp=t=>{};function Wp(t,e,n){let i,r,o,s;j(t,pr,E=>n(6,s=E));let{row:l}=e,{save:a}=e,{deleteAction:u=()=>Promise.resolve()}=e,{columns:f}=e,{relations:c}=e,{rowId:d}=e,h,g=null,y={...l};const p={};async function m(){try{n(7,h=void 0),await a(i),n(4,y={...i})}catch(E){alert(E.message),n(7,h=E)}}const _=()=>n(3,g=g?null:c[0]);function b(E,C){t.$$.not_equal(i[C.valFieldKey],E)&&(i[C.valFieldKey]=E,n(5,i),n(12,l))}const v=()=>{n(5,i=y),n(7,h=void 0)},M=async()=>{try{await u()}catch(E){alert(E.message)}},O=(E,C)=>C.key===E.entityKey,k=(E,C)=>{n(3,g=E)};return t.$$set=E=>{\"row\"in E&&n(12,l=E.row),\"save\"in E&&n(13,a=E.save),\"deleteAction\"in E&&n(0,u=E.deleteAction),\"columns\"in E&&n(1,f=E.columns),\"relations\"in E&&n(2,c=E.relations),\"rowId\"in E&&n(14,d=E.rowId)},t.$$.update=()=>{t.$$.dirty&4096&&n(5,i=l),t.$$.dirty&72&&n(9,r=g&&typeof g==\"object\"&&s.tables.find(E=>E.key===g.entityKey)),t.$$.dirty&50&&n(8,o=!!f.find(E=>i[E.key]!==y[E.key]))},[u,f,c,g,y,i,s,h,o,r,p,m,l,a,d,_,b,v,M,O,k]}class Du extends ue{constructor(e){super(),ae(this,e,Wp,Vp,ce,{row:12,save:13,deleteAction:0,columns:1,relations:2,rowId:14})}}function pl(t,e,n){const i=t.slice();return i[21]=e[n],i}function bl(t,e,n){const i=t.slice();return i[24]=e[n],i}function Xp(t){let e,n;return e=new Du({props:{rowId:void 0,row:t[7],columns:t[0],relations:t[1],deleteAction:t[14],save:t[15]}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&128&&(o.row=i[7]),r&1&&(o.columns=i[0]),r&2&&(o.relations=i[1]),r&128&&(o.deleteAction=i[14]),r&132&&(o.save=i[15]),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Yp(t){let e,n,i,r,o,s=t[2].metadata.caption+\"\",l,a,u,f,c,d,h,g,y,p=t[9]+\" - \"+t[8],m,_,b,v,M,O,k,E,C,D;return{c(){e=ne(\"tr\"),n=ne(\"td\"),i=ne(\"div\"),r=ne(\"span\"),o=ne(\"b\"),l=He(s),a=de(),u=ne(\"button\"),u.textContent=\"+\",f=de(),c=ne(\"span\"),d=ne(\"button\"),h=He(\"<\"),y=de(),m=He(p),_=He(\" of \"),b=He(t[6]),v=de(),M=ne(\"button\"),O=He(\">\"),d.disabled=g=(t[4].page||1)===1,M.disabled=k=t[8]>=t[6],se(i,\"display\",\"flex\"),se(i,\"justify-content\",\"space-between\"),S(n,\"colspan\",E=t[0].length+1+(t[1].length>0?1:0))},m(z,X){q(z,e,X),G(e,n),G(n,i),G(i,r),G(r,o),G(o,l),G(r,a),G(r,u),G(i,f),G(i,c),G(c,d),G(d,h),G(c,y),G(c,m),G(c,_),G(c,b),G(c,v),G(c,M),G(M,O),C||(D=[be(u,\"click\",t[11]),be(d,\"click\",t[12]),be(M,\"click\",t[13])],C=!0)},p(z,X){X&4&&s!==(s=z[2].metadata.caption+\"\")&&ft(l,s),X&16&&g!==(g=(z[4].page||1)===1)&&(d.disabled=g),X&768&&p!==(p=z[9]+\" - \"+z[8])&&ft(m,p),X&64&&ft(b,z[6]),X&320&&k!==(k=z[8]>=z[6])&&(M.disabled=k),X&3&&E!==(E=z[0].length+1+(z[1].length>0?1:0))&&S(n,\"colspan\",E)},i:le,o:le,d(z){z&&B(e),C=!1,Ke(D)}}}function wl(t){let e;return{c(){e=ne(\"td\")},m(n,i){q(n,e,i)},d(n){n&&B(e)}}}function _l(t){var f,c;let e,n=t[24].caption+\"\",i,r,o=((f=t[4].orderBy)==null?void 0:f[t[24].key])===\"asc\"?\"\":((c=t[4].orderBy)==null?void 0:c[t[24].key])===\"desc\"?\"\":\"\",s,l,a;function u(){return t[16](t[24])}return{c(){e=ne(\"th\"),i=He(n),r=de(),s=He(o)},m(d,h){q(d,e,h),G(e,i),G(e,r),G(e,s),l||(a=be(e,\"click\",u),l=!0)},p(d,h){var g,y;t=d,h&1&&n!==(n=t[24].caption+\"\")&&ft(i,n),h&17&&o!==(o=((g=t[4].orderBy)==null?void 0:g[t[24].key])===\"asc\"?\"\":((y=t[4].orderBy)==null?void 0:y[t[24].key])===\"desc\"?\"\":\"\")&&ft(s,o)},d(d){d&&B(e),l=!1,a()}}}function vl(t){let e,n;function i(...o){return t[17](t[21],...o)}function r(){return t[18](t[21])}return e=new Du({props:{rowId:t[2].metadata.idMetadata.getId(t[21]),row:t[21],save:i,deleteAction:r,columns:t[0],relations:t[1]}}),{c(){ee(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){t=o;const l={};s&36&&(l.rowId=t[2].metadata.idMetadata.getId(t[21])),s&32&&(l.row=t[21]),s&36&&(l.save=i),s&36&&(l.deleteAction=r),s&1&&(l.columns=t[0]),s&2&&(l.relations=t[1]),e.$set(l)},i(o){n||(P(e.$$.fragment,o),n=!0)},o(o){R(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Kp(t){let e,n,i,r,o,s,l,a,u,f,c,d,h;const g=[Yp,Xp],y=[];function p(k,E){return k[7]?1:0}r=p(t),o=y[r]=g[r](t);let m=t[1].length>0&&wl(),_=We(t[0]),b=[];for(let k=0;k<_.length;k+=1)b[k]=_l(bl(t,_,k));let v=We(t[5]),M=[];for(let k=0;k<v.length;k+=1)M[k]=vl(pl(t,v,k));const O=k=>R(M[k],1,1,()=>{M[k]=null});return{c(){e=ne(\"div\"),n=ne(\"table\"),i=ne(\"thead\"),o.c(),s=de(),l=ne(\"tr\"),m&&m.c(),a=de();for(let k=0;k<b.length;k+=1)b[k].c();u=de(),f=ne(\"th\"),f.textContent=\"Actions\",c=de(),d=ne(\"tbody\");for(let k=0;k<M.length;k+=1)M[k].c();S(f,\"align\",\"right\")},m(k,E){q(k,e,E),G(e,n),G(n,i),y[r].m(i,null),G(i,s),G(i,l),m&&m.m(l,null),G(l,a);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(l,null);G(l,u),G(l,f),G(n,c),G(n,d);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(d,null);h=!0},p(k,[E]){let C=r;if(r=p(k),r===C?y[r].p(k,E):(Te(),R(y[C],1,1,()=>{y[C]=null}),Me(),o=y[r],o?o.p(k,E):(o=y[r]=g[r](k),o.c()),P(o,1),o.m(i,s)),k[1].length>0?m||(m=wl(),m.c(),m.m(l,a)):m&&(m.d(1),m=null),E&1041){_=We(k[0]);let D;for(D=0;D<_.length;D+=1){const z=bl(k,_,D);b[D]?b[D].p(z,E):(b[D]=_l(z),b[D].c(),b[D].m(l,u))}for(;D<b.length;D+=1)b[D].d(1);b.length=_.length}if(E&39){v=We(k[5]);let D;for(D=0;D<v.length;D+=1){const z=pl(k,v,D);M[D]?(M[D].p(z,E),P(M[D],1)):(M[D]=vl(z),M[D].c(),P(M[D],1),M[D].m(d,null))}for(Te(),D=v.length;D<M.length;D+=1)O(D);Me()}},i(k){if(!h){P(o);for(let E=0;E<v.length;E+=1)P(M[E]);h=!0}},o(k){R(o),M=M.filter(Boolean);for(let E=0;E<M.length;E+=1)R(M[E]);h=!1},d(k){k&&B(e),y[r].d(),m&&m.d(),Cn(b,k),Cn(M,k)}}}function Jp(t,e,n){let i,r,{columns:o}=e,{relations:s}=e,{repo:l}=e,{parentRelation:a={}}=e,u={limit:25,page:1},f=[],c=-1,d=null;const h=()=>{d&&d(),d=l.liveQuery({...u}).subscribe(async E=>{n(5,f=E.applyChanges(f)),n(6,c=await l.count({$and:[]}))})};nr(()=>{d&&d()});let g;const y=E=>{var D;let C=(D=u.orderBy)==null?void 0:D[E];C===void 0?C=\"asc\":C===\"asc\"?C=\"desc\":C=void 0,n(4,u={...u,orderBy:{[E]:C}})},p=()=>{n(7,g=l.create({...a}))},m=()=>{n(4,u={...u,page:(u.page||2)-1})},_=()=>{n(4,u={...u,page:(u.page||1)+1})},b=async()=>{n(7,g=void 0)},v=async E=>{await l.insert(E),n(7,g=void 0)},M=E=>y(E.key),O=async(E,C)=>{await l.update(E,C)},k=E=>l.delete(E);return t.$$set=E=>{\"columns\"in E&&n(0,o=E.columns),\"relations\"in E&&n(1,s=E.relations),\"repo\"in E&&n(2,l=E.repo),\"parentRelation\"in E&&n(3,a=E.parentRelation)},t.$$.update=()=>{t.$$.dirty&20&&l&&u&&h(),t.$$.dirty&16&&n(9,i=((u.page||1)-1)*u.limit+1),t.$$.dirty&48&&n(8,r=((u.page||1)-1)*u.limit+((f==null?void 0:f.length)||0))},[o,s,l,a,u,f,c,g,r,i,y,p,m,_,b,v,M,O,k]}class Fu extends ue{constructor(e){super(),ae(this,e,Jp,Kp,ce,{columns:0,relations:1,repo:2,parentRelation:3})}}function kl(t){let e,n;return e=new Fu({props:{columns:t[0].fields,repo:t[0].repo,relations:t[0].relations}}),{c(){ee(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.columns=i[0].fields),r&1&&(o.repo=i[0].repo),r&1&&(o.relations=i[0].relations),e.$set(o)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Up(t){let e,n,i=t[0]&&kl(t);return{c(){i&&i.c(),e=Xe()},m(r,o){i&&i.m(r,o),q(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&P(i,1)):(i=kl(r),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(Te(),R(i,1,1,()=>{i=null}),Me())},i(r){n||(P(i),n=!0)},o(r){R(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function jp(t,e,n){let i,r;j(t,pr,s=>n(2,r=s));let{params:o={}}=e;return t.$$set=s=>{\"params\"in s&&n(1,o=s.params)},t.$$.update=()=>{t.$$.dirty&6&&n(0,i=r&&r.tables.find(s=>s.key===o.wild))},[i,o,r]}class Gp extends ue{constructor(e){super(),ae(this,e,jp,Up,ce,{params:1})}}const Pi=[];let Ru;function zu(t){const e=t.pattern.test(Ru);Sl(t,t.className,e),Sl(t,t.inactiveClassName,!e)}function Sl(t,e,n){(e||\"\").split(\" \").forEach(i=>{i&&(t.node.classList.remove(i),n&&t.node.classList.add(i))})}or.subscribe(t=>{Ru=t.location+(t.querystring?\"?\"+t.querystring:\"\"),Pi.map(zu)});function Lu(t,e){if(e&&(typeof e==\"string\"||typeof e==\"object\"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&t.hasAttribute(\"href\")&&(e.path=t.getAttribute(\"href\"),e.path&&e.path.length>1&&e.path.charAt(0)==\"#\"&&(e.path=e.path.substring(1))),e.className||(e.className=\"active\"),!e.path||typeof e.path==\"string\"&&(e.path.length<1||e.path.charAt(0)!=\"/\"&&e.path.charAt(0)!=\"*\"))throw Error('Invalid value for \"path\" argument');const{pattern:n}=typeof e.path==\"string\"?Dl(e.path):{pattern:e.path},i={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return Pi.push(i),zu(i),{destroy(){Pi.splice(Pi.indexOf(i),1)}}}function El(t,e,n){const i=t.slice();return i[2]=e[n],i}function Cl(t){let e,n,i=t[2].caption+\"\",r,o,s,l,a;return{c(){e=ne(\"div\"),n=ne(\"a\"),r=He(i),S(n,\"href\",o=\"#/entity/\"+t[2].key)},m(u,f){q(u,e,f),G(e,n),G(n,r),l||(a=Ue(s=Lu.call(null,n,{path:`/entity/${t[2].key}`,className:\"active\"})),l=!0)},p(u,f){t=u,f&1&&i!==(i=t[2].caption+\"\")&&ft(r,i),f&1&&o!==(o=\"#/entity/\"+t[2].key)&&S(n,\"href\",o),s&&Fe(s.update)&&f&1&&s.update.call(null,{path:`/entity/${t[2].key}`,className:\"active\"})},d(u){u&&B(e),l=!1,a()}}}function Zp(t){var h;let e,n,i,r,o,s,l,a,u,f,c=We(((h=t[0])==null?void 0:h.tables)??[]),d=[];for(let g=0;g<c.length;g+=1)d[g]=Cl(El(t,c,g));return l=new Nf({props:{routes:t[1]}}),{c(){e=ne(\"div\"),n=ne(\"div\");for(let g=0;g<d.length;g+=1)d[g].c();i=de(),r=ne(\"a\"),r.textContent=\" Diagram\",o=de(),s=ne(\"div\"),ee(l.$$.fragment),S(r,\"href\",\"#/\"),se(n,\"min-width\",\"100px\"),se(s,\"flex-grow\",\"1\"),S(e,\"class\",\"full svelte-hhc8e3\")},m(g,y){q(g,e,y),G(e,n);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(n,null);G(n,i),G(n,r),G(e,o),G(e,s),x(l,s,null),a=!0,u||(f=Ue(Lu.call(null,r,{path:\"/\",className:\"active\"})),u=!0)},p(g,[y]){var p;if(y&1){c=We(((p=g[0])==null?void 0:p.tables)??[]);let m;for(m=0;m<c.length;m+=1){const _=El(g,c,m);d[m]?d[m].p(_,y):(d[m]=Cl(_),d[m].c(),d[m].m(n,i))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}},i(g){a||(P(l.$$.fragment,g),a=!0)},o(g){R(l.$$.fragment,g),a=!1},d(g){g&&B(e),Cn(d,g),$(l),u=!1,f()}}}function Qp(t,e,n){let i;return j(t,pr,o=>n(0,i=o)),[i,{\"/\":Pp,\"/entity/*\":Gp,\"*\":Dp}]}class xp extends ue{constructor(e){super(),ae(this,e,Qp,Zp,ce,{})}}new xp({target:document.getElementById(\"app\")});\n\n</script>\n    <style>\n*{box-sizing:border-box}body{--border-color: #0000001a;--background-color: white;--background-color-gray: #f5f5f7;--cell-height: 28px;--navigation-width: 200px;background:var(--background-color-gray);color:#323338;height:100vh;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",Segoe UI Symbol}.root{display:flex;flex-direction:column;height:100%}thead{height:var(--cell-height);position:sticky;top:0;background-color:var(--background-color);z-index:2;font-weight:600}thead:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background:var(--background-color);z-index:1;border-bottom:1px solid var(--border-color)}th{text-align:center;white-space:nowrap;padding:0 .5rem}tr{height:var(--cell-height);position:relative}td>div:not(.extended__holder){padding:0 .5rem}tbody tr:nth-child(odd):not(.extended),tbody tr:nth-child(odd):not(.extended) td:first-child,tbody tr:nth-child(odd):not(.extended) .action-tab{background:var(--background-color-gray)}tr.extended{background:var(--background-color-gray)}tr.extended>td:first-child{display:none}tr.extended td{border-left:0;max-width:calc(100vw - var(--navigation-width))}.hide-navigation tr.extended td{max-width:100vw}tr.extended th{background:#fff!important;padding:0 .5rem;white-space:nowrap}.extended__holder{background:var(--background-color);border:1px solid var(--border-color);margin:.5rem;display:flex;width:calc(100vw - var(--navigation-width) - 1rem);flex-wrap:wrap}.hide-navigation .extended__holder{width:calc(100vw - 1rem)}.extended__holder .icon-button:has(.hamburger-icon){display:none}.extended__links{display:flex;justify-content:flex-start;align-items:center;background:var(--background-color-gray);flex:0 0 calc(100% - 200px);width:100%}.extended__holder .page-bar{height:var(--cell-height);flex:0 0 200px;width:200px}.extended__holder .page-bar__title{display:none}.extended__links .tab{width:auto}.extended__holder .table-container{flex:0 0 100%}th,td{height:calc(var(--cell-height) - 1px);border:1px solid var(--border-color);vertical-align:middle}td:first-child:has(button){min-width:calc(var(--cell-height) - 1px);border-left:0;position:sticky;background-color:var(--background-color);z-index:1}td:first-child:has(button):after{content:\"\";position:absolute;top:0;right:-1px;width:1px;height:100%;background:var(--background-color);z-index:1;border-right:1px solid var(--border-color)}td:has(.icon-button),td:has(.icon-button) button:has(svg){width:calc(var(--cell-height) - 1px)}td input{height:calc(var(--cell-height) - 1px);padding:0 .5rem;display:flex;height:100%}td .field-spacer{height:0;padding:0 .5rem;display:block;overflow:hidden;pointer-events:none;min-width:100px;max-width:400px}td input:focus{box-shadow:0 0 0 2px #007bff inset}.table-container{overflow-x:auto}.action-tab{padding:0 .5rem;position:sticky;right:0;background-color:var(--background-color);white-space:nowrap}.action-tab:before{content:\"\";position:absolute;top:0;left:-1px;width:1px;height:100%;background:var(--background-color);z-index:1;border-right:1px solid var(--border-color)}td.action-tab{padding:0rem}button{cursor:pointer;padding:.5rem;border:1px solid var(--border-color);border-radius:.5rem;white-space:nowrap;height:2.5rem}.icon-button{width:var(--cell-height);height:var(--cell-height);padding:.3rem;border:0;border-radius:0}.icon-button svg{transition:transform .2s;transform-origin:center}.icon-button.open svg{transform:rotate(90deg)}button:hover,button:active,.tab:hover,.tab:active,.tab.active{background:#e4e4e6}.tab{height:var(--cell-height);display:inline-flex;justify-content:flex-start;align-items:center;padding:.5rem;display:flex;width:100%}dialog{border:1px solid var(--border-color);padding:.5rem;border-radius:5px}dialog form{width:auto;display:flex}dialog input,dialog select,dialog button{border:1px solid var(--border-color);border-radius:0;padding:.2rem .5rem;margin-bottom:.5rem;min-width:auto!important;height:var(--cell-height)}dialog button.button-icon{display:flex;justify-content:center;align-items:center;width:var(--cell-height);height:var(--cell-height)}dialog button.button-icon svg{width:14px;height:var(--cell-height)}.page-bar{background:var(--background-color-gray);height:calc(var(--cell-height) - 1px);display:flex;align-items:center;justify-content:flex-end}.page-bar__title{font-weight:600;margin-right:auto;padding:0 .5rem}.page-bar span{display:block;padding:0 .5rem}.page-bar button{height:100%;display:flex;justify-content:center;align-items:center;border-radius:0;border-top:none;border-bottom:0}.page-bar .icon-button{width:var(--cell-height);height:calc(var(--cell-height) - 1px);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color)}.page-bar button+button,.page-bar .icon-button+button,.page-bar button:first-child{border-left:none}.page-bar button:last-child{border-right:none}#root{justify-content:flex-start;align-items:center}.app-holder{display:flex;flex:1;border-radius:10px;overflow:hidden;background:#fff;margin:0 auto;width:100%}.main-navigation{height:100vh;min-height:100%;position:fixed;left:0;display:flex;flex-direction:column;flex:0 0 var(--navigation-width);width:var(--navigation-width);align-items:flex-start;background:#f5f5f7;border-right:1px solid #e5e7eb;transition:.2s ease-in-out all;overflow-y:auto;padding-top:var(--cell-height)}.main-navigation__title{top:0;position:fixed;background:var(--background-color-gray);height:var(--cell-height);border-bottom:1px solid #e5e7eb;display:flex;justify-content:flex-start;padding:.5rem;align-items:center;font-size:.8rem;font-weight:600;width:calc(var(--navigation-width) - 1px);text-align:center}.main-content{transition:.2s ease-in-out all;transform:translate(var(--navigation-width));display:flex;flex-direction:column;flex:1;max-width:calc(100% - var(--navigation-width))}body.hide-navigation .main-navigation{transform:translate(calc(-1 * var(--navigation-width)))}body.hide-navigation .main-content{max-width:100%;transform:translate(0)}.hamburger-icon rect{transition:.2s ease-in-out all}body:not(.hide-navigation) .hamburger-icon rect:first-child{transform:rotate(35deg) translate(-3px,4px)}body:not(.hide-navigation) .hamburger-icon rect:nth-child(2){transform:translate(1px)}body:not(.hide-navigation) .hamburger-icon rect:last-child{transform:rotate(-35deg) translate(-17px,-8px)}.filter strong{display:block;margin-top:.5rem;margin-bottom:1rem;font-weight:600;text-align:center}.filter__group{display:flex;flex-direction:row;width:100%}.filter__group .button-icon{margin-left:auto;border:none}.filter__actions{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;padding:.5rem;width:100%}.filter__actions button{border:none;padding:.5rem;margin:0}.filter__actions button:last-of-type{background:#e4e4e6}.filter__add{margin-left:auto;border:none}.svelte-flow__zoom.svelte-4xkw84{width:100%;height:100%;position:absolute;top:0;left:0;z-index:4}.svelte-flow__pane.svelte-1esy7hx{position:absolute;top:0;left:0;width:100%;height:100%}.svelte-flow__viewport.svelte-1floaup{width:100%;height:100%;position:absolute;top:0;left:0}.svelte-flow__nodes.svelte-tf4uy4{width:100%;height:100%;position:absolute;left:0;top:0}.svelte-flow__selection.svelte-1iugwpu{position:absolute;top:0;left:0}.selection-wrapper.svelte-5pxri{position:absolute;top:0;left:0;z-index:7;pointer-events:all}.svelte-flow.svelte-12wlba6{width:100%;height:100%;overflow:hidden;position:relative;z-index:0;background-color:var(--background-color, var(--background-color-default))}:root{--background-color-default:#fff;--background-pattern-color-default:#ddd;--minimap-mask-color-default:rgb(240, 240, 240, .6);--minimap-mask-stroke-color-default:none;--minimap-mask-stroke-width-default:1;--controls-button-background-color-default:#fefefe;--controls-button-background-color-hover-default:#f4f4f4;--controls-button-color-default:inherit;--controls-button-color-hover-default:inherit;--controls-button-border-color-default:#eee}.svelte-flow__background.svelte-1r7pe8d{position:absolute;width:100%;height:100%;top:0;left:0}.svelte-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgb(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.svelte-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgb(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.svelte-flow__background{background-color:var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.svelte-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.svelte-flow__pane{z-index:1}.svelte-flow__pane.selection{cursor:pointer}.svelte-flow__pane.draggable{cursor:grab}.svelte-flow__pane.draggable.dragging{cursor:grabbing}.svelte-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.svelte-flow__renderer{z-index:4}.svelte-flow__selection{z-index:6}.svelte-flow__nodesselection-rect:focus,.svelte-flow__nodesselection-rect:focus-visible{outline:none}.svelte-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.svelte-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.svelte-flow__edges{position:absolute}.svelte-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.svelte-flow__edge{pointer-events:visibleStroke}.svelte-flow__edge.selectable{cursor:pointer}.svelte-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.svelte-flow__edge.animated path.svelte-flow__edge-interaction{stroke-dasharray:none;animation:none}.svelte-flow__edge.inactive{pointer-events:none}.svelte-flow__edge.selected,.svelte-flow__edge:focus,.svelte-flow__edge:focus-visible{outline:none}.svelte-flow__edge.selected .svelte-flow__edge-path,.svelte-flow__edge.selectable:focus .svelte-flow__edge-path,.svelte-flow__edge.selectable:focus-visible .svelte-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.svelte-flow__edge-textwrapper{pointer-events:all}.svelte-flow__edge .svelte-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__connection{pointer-events:none}.svelte-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.svelte-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.svelte-flow__nodes{pointer-events:none;transform-origin:0 0}.svelte-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.svelte-flow__node.selectable{cursor:pointer}.svelte-flow__node.draggable{cursor:grab;pointer-events:all}.svelte-flow__node.draggable.dragging{cursor:grabbing}.svelte-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.svelte-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.svelte-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.svelte-flow__handle.connectingfrom{pointer-events:all}.svelte-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.svelte-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.svelte-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.svelte-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.svelte-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.svelte-flow__edgeupdater{cursor:move;pointer-events:all}.svelte-flow__panel{position:absolute;z-index:5;margin:15px}.svelte-flow__panel.top{top:0}.svelte-flow__panel.bottom{bottom:0}.svelte-flow__panel.left{left:0}.svelte-flow__panel.right{right:0}.svelte-flow__panel.center{left:50%;transform:translate(-50%)}.svelte-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.svelte-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.svelte-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.svelte-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.svelte-flow__minimap-svg{display:block}.svelte-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.svelte-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.svelte-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.svelte-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.svelte-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.svelte-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.svelte-flow__controls.horizontal{flex-direction:row}.svelte-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.svelte-flow__edge.updating .svelte-flow__edge-path{stroke:#777}.svelte-flow__edge-text{font-size:10px}.svelte-flow__node.selectable:focus,.svelte-flow__node.selectable:focus-visible{outline:none}.svelte-flow__node-input,.svelte-flow__node-default,.svelte-flow__node-output,.svelte-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.svelte-flow__node-input.selectable:hover,.svelte-flow__node-default.selectable:hover,.svelte-flow__node-output.selectable:hover,.svelte-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.svelte-flow__node-input.selectable.selected,.svelte-flow__node-input.selectable:focus,.svelte-flow__node-input.selectable:focus-visible,.svelte-flow__node-default.selectable.selected,.svelte-flow__node-default.selectable:focus,.svelte-flow__node-default.selectable:focus-visible,.svelte-flow__node-output.selectable.selected,.svelte-flow__node-output.selectable:focus,.svelte-flow__node-output.selectable:focus-visible,.svelte-flow__node-group.selectable.selected,.svelte-flow__node-group.selectable:focus,.svelte-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.svelte-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.svelte-flow__nodesselection-rect,.svelte-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.svelte-flow__nodesselection-rect:focus,.svelte-flow__nodesselection-rect:focus-visible,.svelte-flow__selection:focus,.svelte-flow__selection:focus-visible{outline:none}.svelte-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.svelte-flow__controls-button:disabled{pointer-events:none}.svelte-flow__controls-button:disabled svg{fill-opacity:.4}.svelte-flow__controls-button:last-child{border-bottom:none}.svelte-flow__resize-control{position:absolute}.svelte-flow__resize-control.left,.svelte-flow__resize-control.right{cursor:ew-resize}.svelte-flow__resize-control.top,.svelte-flow__resize-control.bottom{cursor:ns-resize}.svelte-flow__resize-control.top.left,.svelte-flow__resize-control.bottom.right{cursor:nwse-resize}.svelte-flow__resize-control.bottom.left,.svelte-flow__resize-control.top.right{cursor:nesw-resize}.svelte-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));transform:translate(-50%,-50%)}.svelte-flow__resize-control.handle.left{left:0;top:50%}.svelte-flow__resize-control.handle.right{left:100%;top:50%}.svelte-flow__resize-control.handle.top{left:50%;top:0}.svelte-flow__resize-control.handle.bottom{left:50%;top:100%}.svelte-flow__resize-control.handle.top.left,.svelte-flow__resize-control.handle.bottom.left{left:0}.svelte-flow__resize-control.handle.top.right,.svelte-flow__resize-control.handle.bottom.right{left:100%}.svelte-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.svelte-flow__resize-control.line.left,.svelte-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.svelte-flow__resize-control.line.left{left:0;border-left-width:1px}.svelte-flow__resize-control.line.right{left:100%;border-right-width:1px}.svelte-flow__resize-control.line.top,.svelte-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.svelte-flow__resize-control.line.top{top:0;border-top-width:1px}.svelte-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.svelte-flow__edge-label{text-align:center;position:absolute;padding:2px;font-size:10px;cursor:pointer;color:var(--xy-edge-label-color, var(--xy-edge-label-color-default));background:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.svelte-flow__nodes,.svelte-flow__edgelabel-renderer{z-index:0}.entity-node.svelte-7jxvol{--entity-color:rgb(145, 196, 242);border:1px solid var(--entity-color);border-radius:4px;background:#fff}.entity-name.svelte-7jxvol{position:relative;padding:8px;background-color:var(--entity-color);border:0;border-radius:4px 4px 0 0;font-weight:700;text-align:center}.entity-fields.svelte-7jxvol{border:1px solid #cbd2d9;border-top:0;border-radius:0 0 4px 4px}.entity-field.svelte-7jxvol{position:relative;padding:8px;border-bottom:1px solid #cbd2d9}.entity-node.svelte-7jxvol{--entity-color:rgb(145, 196, 242);border-radius:4px;background:#fff;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;border-top:8px solid var(--color);min-width:200px}.entity-node.svelte-7jxvol:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a}.entity-name.svelte-7jxvol{position:relative;padding:8px;background-color:#f8fafc;border:1px solid rgb(203 213 225);font-size:1.25rem;line-height:1.75rem;font-weight:400;text-align:center}.entity-fields.svelte-7jxvol{border-top:0;border-radius:0 0 4px 4px}.entity-field.svelte-7jxvol{position:relative;padding:8px;font-size:.9rem;color:#606f7b;padding-inline-start:16px}.entity-field.svelte-7jxvol:hover{background:#f5f7fa}.full.svelte-hhc8e3{display:flex;gap:10px}a.active{color:#00f;font-weight:700}\n\n</style>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n  </body>\n</html>\n"
}